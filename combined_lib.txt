

You said:
انا حاليا بدرس كورس لعمل تطبيق متجر الكتروني وهدف الكورس انشاء تطبيق جيد ويركز تركيز اساسي علي تعليم firebase في تخزين البيانات و auth للتسجيل بحسابات التواصل الاجتماعي وتخزين البيانات باستخدام فاير ستور

ChatGPT said:
تمام 👌 كلامك واضح، وهدف الكورس كويس جدًا بصراحة.

خليني أرتّب لك الصورة بشكل عملي وبأسلوب يناسبك 👇
بما إنك بتدرس كورس متجر إلكتروني والتركيز الأساسي Firebase، فده معناه إنك لازم تطلع من الكورس وأنت فاهم 3 محاور كبار:

1️⃣ إنشاء تطبيق متجر إلكتروني “صح”
مش مجرد UI وخلاص، لأ:

عرض المنتجات

صفحة تفاصيل المنتج

سلة المشتريات

المفضلة (Wishlist)

الطلبات (Orders)

بروفايل المستخدم

حتى لو التطبيق بسيط، المهم الهيكلة صح.

2️⃣ Firebase Authentication (التسجيل والدخول)
ده قلب الكورس تقريبًا 🔥
لازم تبقى فاهم:

تسجيل حساب بالإيميل وكلمة السر

تسجيل / دخول باستخدام:

Google

Facebook (لو موجود)

التعامل مع:

user id (UID)

تسجيل خروج

الحفاظ على حالة المستخدم (Stay logged in)

📌 نقطة مهمة
Firebase Auth مش بيخزن بيانات المستخدم كاملة
هو بس:

email

uid

provider (google – email)

والباقي كله بيتخزن عندك في Firestore.

3️⃣ Firestore (تخزين البيانات)
وده الجزء الأهم فعليًا 👑
لازم تفهمه مش تحفظه.

أمثلة حقيقية لهيكلة الداتا:
users (collection)
  └── userId (document)
       ├── name
       ├── email
       ├── phone
       ├── createdAt
       └── favorites (array)

products
  └── productId
       ├── title
       ├── price
       ├── image
       ├── category
       └── description

orders
  └── orderId
       ├── userId
       ├── products
       ├── totalPrice
       ├── status
       └── createdAt
4️⃣ العلاقة بين Firebase + Flutter (أهم حتة)
لازم تفهم:

إمتى أجيب الداتا من Firestore

إمتى أخزن

إمتى أعمل تحديث (update)

إمتى أعمل حذف

ومش كل حاجة Stream 😉
أنت أصلًا مش بتحب Streams، وده تمام:

استخدم Future

مع Cubit (زي ما بتحب)

5️⃣ إنت تطلع من الكورس بإيه؟
لو الكورس ناجح فعلًا، المفروض تطلع بـ:

مشروع تقدر تحطه في GitHub

فاهم Auth مش حافظه

فاهم Firestore Structure

تقدر تعمل أي App يعتمد على Firebase بعده

نصيحتي ليك (مهمة)
💡 متتعاملش مع الكورس كمجرد “نفّذ وخلص”
اعمل كده:

كل Feature توقف وتسأل نفسك:

ليه استخدمنا Auth هنا؟

ليه collection مش subcollection؟

ليه document بالشكل ده؟

لو حابب:

أراجع معاك هيكلة Firestore

أو أقولك أهم الحاجات اللي تركز عليها وتسيب الباقي

أو نخلي التطبيق Production-ready شوية

قولّي تحب نبدأ منين 👊


You said:
مش عاوز ترد عاوزك تسمع المعلومات ديه الاول

ChatGPT said:
تمام 👍
أنا سامعك… كمل براحتك، وأنا هركّز مع كل كلمة.


You said:
عاوز الشات ده يبقي الشات الاساسي لمساعدتي في التطبيق

ChatGPT said:
تمام 🤝
اعتبر الشات ده المرجع الأساسي ليك في التطبيق خطوة بخطوة.

من هنا وطالع:

أي مشكلة كود

أي قرار Architecture

Firebase / Auth / Firestore

تنظيم المشروع، Cubit، تحسينات، أخطاء غريبة
كلّه هنا 👌

أنا معاك من أول سطر كود لحد ما التطبيق يطلع شكله احترافي، ومش همشيك حفظ… نفهم ونعمل صح.

كمل ابعت المعلومات أو أول نقطة حابب نشتغل عليها، وأنا سامعك للآخر.


You said:
بستخدم تطبيق تاني داش بورد لرفع المنتجات علي السيرفر المعلم يستخدم فاير ستور ولكن بسبب انهيحتاج لبيانات دفع في حالة رفع ملفات انا هستخدم سوبا بيز في رفع البيانات لكت auth هستخدم فاير بيو زي المعلم لانه لا يحتاج بيانات دفع

ChatGPT said:
تمام، فهمت قصدك 💡

إنت حابب تعمل كده:

رفع المنتجات (مع الصور/ملفات كبيرة)

حتستخدم Supabase Storage بدل Firebase Storage، عشان Firebase Storage يحتاج بطاقة دفع بعد حد معين للـ free tier، وSupabase عنده Free Tier سخية أكثر لرفع الملفات.

Auth وتسجيل الدخول

حتستخدم Firebase Auth زي المعلم، عشان مش محتاج بطاقة دفع، وسهل التعامل مع Google/Facebook/Email.

تخزين بيانات المنتج الأساسية (الاسم، السعر، الوصف…)

ممكن تخزنها على Supabase Database أو Firestore، حسب اختيارك، بس أهم حاجة:

إذا عايز كل حاجة في Firebase مع Firebase Auth → يبقى تخزن البيانات في Firestore.

لو عايز تبقى كل حاجة على Supabase → Auth و Database و Storage كلها هناك.

📌 نقطة مهمة:
لو خليت Auth على Firebase و Storage على Supabase:

لازم في قاعدة البيانات (Firestore أو Supabase DB) تخزن رابط الصورة من Supabase مع بيانات المنتج.

لازم تتأكد من التزامن بين Auth و Storage و DB بحيث كل منتج يكون مربوط بالمستخدم الصحيح.

لو تحب، أقدر أرسملك Architecture واضحة للمشروع تمشي عليها خطوة خطوة، بحيث تعرف كل جزء (Auth / DB / Storage) هيتعامل إزاي مع التاني.

تحب أرسمها لك؟


You said:
انا كملت اكتر من نصف الكورس وهبعت ليك الكود الحالي

ChatGPT said:
تمام 🔥
ابعت لي الكود كله دلوقتي، وأنا هراجع كل الملفات بعناية قبل ما نبدأ أي تعديل أو تحسين، عشان نضمن إن كل شيء منظم ومتناسق مع Firebase وSupabase حسب اختيارك.

مستني ملفاتك كاملة.


You said:
محتوى الدورة
Discord Link

Introduction
02:57

Create Trello Account
03:00

Trello Intro
07:19

Important Resources [Must Read]

App name And Icon
08:28

Create Splash View
03:14

On Generate Route
02:46

Splash View ui done
07:11

Splash View Logic Done
03:21

Steps to build On Boarding Feature
09:28

Create on boarding view
02:29

Page View item part one
06:14

Page View item part two
10:39

Page View item part three
06:51

Dots Indicator
04:58

Custom Button
09:40

Steps to finish feature logic
03:02

Add logic part one
02:11

Add logic part two
03:40

Add logic part three
06:50

Add text styles part one
13:47

Add text styles part two
09:24

add font family
07:20

fix issue
04:10

Add navigation logic to onboarding view
08:24

Create shared preferences singleton
08:02

Add navigation logic to splash view
04:49

Create login feature todo cards
13:04

Login ui part one
03:05

Login ui part two
05:12

Login ui part three
09:27

Login ui part 4
09:11

Login ui part 5
05:41

Login ui part 6
11:14

Signup tasks
03:37

Signup ui part 1
03:56

Signup ui part 2
02:11

Signup ui part 3
09:05

Signup ui part 4
14:22

Signup ui part 5
05:28

What service will we use & why
10:08

Add Firebase
11:25

Create user Entity
07:04

Add dart z package
01:37

Create firebase auth service
02:24

Implement create user with email and password
08:17

Implement auth repo create user with email and password
09:53

Create signup cubit
03:49

Add get it
10:28

Integrate signup cubit
04:38

Trigger signup cubit
13:54

Create Bloc Observer
07:58

Create Password Field
05:28

Accept terms and conditions
05:37

Log errors
10:35

Implement login with email
13:54

Create sign in cubit
05:33

Integrate sign in cubit
05:06

sign in with email and password
07:22

Create sign in with google method
05:25

implement sign in with google
06:17

Trigger sign in with google
04:09

Implement sign in with Facebook
05:16

Trigger sign in with Facebook
05:40

Add Facebook configuration
17:06

Implement sign in with apple
14:13

Configure sign in with apple
10:05

Test auth feature on ios
07:24

Configure sign in with google on ios
08:06

Configure sign in with Facebook on ios
07:47

Fix issue with facebook sign in on ios
09:30

Finish auth feature
04:30

Database Structure
05:28

Database Structure part two
09:06

Add FireStore
04:14

Create Abstract Database Service
04:49

Implement add data method
02:50

Add Tasks to Trello
01:25

Create Add User Data Method
05:55

Implement Add User Data
06:51

Trigger Add User Data Method
05:00

Delete user
07:18

Fix issue with adding data
03:09

Add user data in social auth
06:07

Implement fetch user data part one
05:51

Implement fetch user data part two
05:34

test get user data
05:54

fix issue with reading user data
05:25

Apply read data to social authentication
06:52

Intro
05:01

Create home feature
05:13

Create home app bar
13:08

Create search text field
12:18

Create featured item part one
08:55

Featured item part two
12:31

Featured item part 3
04:59

Create Featured list
04:22

Best selling header
02:03

Build fruit item
11:24

Build best selling grid view
04:38

Create custom bottom navigation bar part one
02:29

Create custom bottom navigation bar part two
06:30

Create custom bottom navigation bar part 3
06:05

Create custom bottom navigation bar part 4
05:01

Finish bottom navigation bar
08:03

Add logic to bottom navigation bar
04:50

Create best selling view
04:33

Create custom app bar
05:35

Navigate user to home view directly
04:58

Save user data
07:44

Fetch user data and display user name
04:18

Firebase Storage Update
04:23

Create fruits hub dashboard
03:25

Configure dashboard with firebase
04:54

Create dashboard view
04:02

Fire store collections part one
05:48

Fire store collections part two
07:08

Fire store collections part three
08:33

Create add product view
03:18

Create add product form part one
07:11

Create add product form part two
02:40

Create add product form part 3
06:21

Create add product form part 4
05:22

Add product form done
04:42

Validate add product form
06:26

Create add product input entity
04:45

Create images and products repo
06:20

Add cloud stoarge
11:08

Create storage service
04:47

Implement upload file
13:48

implement upload file part two
05:42

Create add product cubit
08:19

Implement add product
05:10

Fix some issues
05:28

Add Product to firestore
07:05

Integrate add product cubit with ui
06:20

Add additional data to fruit product
05:09

Add additional data to fruit product part 2
07:08

Create review entity and model
09:25

New Storage Service
03:12

Supabase create account
03:00

Supabase storage docs
06:56

Configure supabase with flutter
03:32

Create supabase storage service
03:28

Implement upload file with supabase
05:17

Upload file to supabase
08:12

Fix issue with create bucket
02:49

Get image url
08:13

Create products repo
06:05

Add selling count to product model
03:32

Update get data method
04:29

Implement get products method
05:51

Implement get best selling products
11:33

Create products cubit
06:21

Provide and trigger products cubit
05:44

Integrate products cubit with ui
08:42

Fix error with product model part one
11:44

Fix error with product model part two
02:05

Display fruit data
04:30

Fix issue with image
06:38

Create products view part one
11:51

Create Products view part 2
05:31

Finish products view
06:18

Create cart view part one
03:41

Create cart view part 2
09:57

Create cart view part 3
08:47

Finish cart view
06:47

Create cart item entity part one
04:49

Create cart item entity part 2 ده المحتوي من الكورس الي انهيته 
05:39

Create cart entity and cart cubit
05:56

Add product to cart part one
09:32

Add product to cart part two
03:08

Integrate cart cubit
04:41

Display number of products added
03:11

Update cart button
04:54

Display cart list
06:34

Remove cart item done
02:24

Display product quantity
03:24

Create and integrate cart item cubit
08:02

Finish cart Feature
04:09

Checkout feature
01:24

Create checkout view
01:41

Create active step item
04:15

Create in active step item
01:56

Create checkout steps
04:04

Create step item
02:25

Create checkout page view
03:41

Create shipping items
08:40

Select shipping item
04:34

Shipping section ui done
02:24

Address input section ui done
04:14

Create payment section part one
02:54

Create payment section part two
06:21

Create order summry widget
05:58

Checkout view state management part one
04:00

checkout view state management part two
03:35

checkout view state management part three
03:23

Create order address and shipping address entity
05:12

Pass items to checkout view
02:42

Display shipping price
05:42

Assign pay with cash value
04:35

Fix issue with shipping section state
02:26

Address form part one
06:48

Address form part two
07:39

Fix issue with null check operator
03:29

Display order details
13:24

Add order to firestore
03:26

Create order model part one
03:51

Create order model part two
08:30

Create orders repo and repo iml
03:20

Create add order cubit
02:10

Add order to firestore done
05:47

Create payment entity
05:47

Create payment entity part two
11:36

Process payment part one
05:34

process payment part two
08:54

Fix issue with resetting order entity
04:21

Checkout feature part one
06:09

Checkout feature part two
05:57

Create orders view
02:02

Create filter section
03:33

Create order item widget
06:25

Create order items list view
01:45

Create order entity
04:32

Create orders repo and orders repo impl
06:03

Create fetch orders cubit
02:59

Display orders done
09:09

Fix issue with displaying orders
14:28

Streams part one
10:40

Streams part two
07:27

Mange streams
03:11

Update order status part one
06:10

Update order status part two
04:46

Create update order cubit
03:51

Add order id
02:42

add Testing orders
01:42

Update order status done
03:35

END
16:23ده القادم ان شاء الله 

ChatGPT said:
تمام 😎، شكلك خلصت أكتر من نصف الكورس بالفعل، ومن الواضح إنك ماشي خطوة خطوة مع كل جزء: Onboarding → Auth → Firestore → Dashboard → Products → Cart → Checkout → Orders.

من اللي أرسلته، نقدر نرسم صورة واضحة عن حالتك الحالية:

1️⃣ إنت خلصت:
Auth كامل: Email, Google, Facebook, Apple. ✅

Firestore setup: إضافة/قراءة بيانات المستخدم والمنتجات ✅

UI المتجر: Home, Featured, Best selling, Products view ✅

Cart و Checkout كاملين: مع كل الخطوات، الدفع، العنوان، الشحن ✅

Orders & Streams: متابعة الطلبات وتغيير الحالة ✅

2️⃣ الخطوة القادمة في الكورس (حسب المحتوى القادم):
التعامل مع Streams بشكل أعمق

إدارة Update Order Status

تحسينات عامة، Testing

أي تحسينات إضافية على المنتجات وDashboard

3️⃣ نصيحتي ليك قبل ما تبعت الكود:
عشان نخلي الشات ده مساعدك الأساسي:

ابعتلي المشروع كامل أو كل الملفات المهمة (models, cubits, views, services).

حنراجع:

Architecture (Firebase Auth + Firestore + Supabase Storage)

Cubits وتنظيم الكود

أي أخطاء أو تحسينات ممكن نعملها

نعمل لك خطة عمل واضحة عشان نكمل المشروع خطوة بخطوة بدون مشاكل.

لو تحب، أقدر أعملك خريطة عمل مرئية للمشروع بحيث تعرف كل جزء:

Auth → Firestore → Supabase Storage → Products → Cart → Orders → Checkout
وكيفية ربط كل حاجة ببعض.

تحب أعملها لك دلوقتي؟


You said:
مع العلم اني بكتب الكود الخاص بالفاير ستور زي المعلم لكن بعد انتهاء الكورس هحاول اغير لسوبا بيو لتخزين البيانات

ChatGPT said:
تمام تمام، كده الصورة واضحة 🔥

يعني حاليًا أنت:

بتتبع الكورس بالضبط: Firebase Auth + Firestore لكل البيانات. ✅

بعد انتهاء الكورس: هتعمل Migration أو تعديل عشان تخزن البيانات في Supabase بدل Firestore، خصوصًا المنتجات والـ Dashboard والـ Storage.

ده كويس جدًا، لأنك:

دلوقتي تتعلم كل حاجة صح على Firebase (Auth، DB، Storage لو استعملت مؤقتًا).

بعد كده هتقدر تنقل المشروع لـ Supabase بدون ما تضيع أي من المنطق أو الـ Cubits أو الـ UI.

📌 ملاحظتين مهمتين لما تيجي تحول لـ Supabase:

Auth: ممكن تسيبه على Firebase Auth أو تنقله لـ Supabase Auth، حسب رغبتك، لكن لو Firebase Auth شغال تمام، ممكن تسيبه.

Data Migration: لازم كل مكان في الكود كان بيستخدم Firestore، يتغير عشان يستعمل Supabase Database وStorage.

روابط الصور = Supabase Storage URLs

بيانات المنتجات = Supabase Table

Orders = Supabase Table

لو تحب، ممكن أعمل لك خريطة تحويل واضحة خطوة بخطوة:

أي كلاس/Service/Repository/ Cubit يتغير إزاي عشان يشتغل على Supabase بدل Firestore.

تحب أجهزها لك دلوقتي؟


You said:
على Firebase Auth هسيبه

ChatGPT said:
تمام تمام، يبقى كده Firebase Auth هسيبه زي ما هو ✅

ده خيار ممتاز لأن:

مش محتاج تدفع أي حاجة على Firebase Auth (Free Tier كافي).

كل تسجيل دخول وحسابات التواصل الاجتماعي (Google, Facebook, Apple) شغالين تمام.

مش هتحتاج تغير أي UI أو Cubits الخاصة بالـ Auth بعد ما تحول الـ Data لـ Supabase.

يبقى الخطة عندك واضحة كده:

Auth → Firebase Auth (ثابت)

Data & Storage → بعد الكورس، تتحول من Firestore + Firebase Storage → Supabase Database + Supabase Storage

لو تحب، ممكن أعمل لك خريطة عملية واضحة لكل الملفات والخطوات اللي هتتغير لما تيجي تنقل البيانات لـ Supabase، عشان ما تضيعش وقت أو تغلط في الربط بين الـ Auth و Data.

تحب أجهزها لك دلوقتي؟


You said:
عاوز الكود الي بيجمع ملفات lib في ملف تيسكت عشان ابعت ليك المحتوي

ChatGPT said:
تمام، أفهمك 💡

انت عايز تجمع كل ملفات lib/ في مشروع Flutter في ملف نصي واحد عشان تبعتهولي، صح؟

فيك تعمل ده بسهولة باستخدام Terminal / PowerShell / CMD حسب نظامك. هديك الطريقة لكل نظام:

1️⃣ على Windows (PowerShell)
# انتقل لمجلد المشروع
cd C:\path\to\your\flutter_project

# دمج كل ملفات lib في ملف واحد
Get-ChildItem -Recurse .\lib\ -Include *.dart | ForEach-Object {
    Get-Content $_.FullName
} | Out-File combined_lib.txt
هيطلعلك ملف combined_lib.txt فيه كل محتوى ملفات lib/.

2️⃣ على Windows / Linux / macOS (CMD أو Terminal)
# انتقل لمجلد المشروع
cd /path/to/flutter_project

# دمج كل ملفات lib في ملف واحد
find lib -name "*.dart" -exec cat {} + > combined_lib.txt
3️⃣ نصائح
لو الكود كبير، ممكن تقسمه على أكثر من ملف نصي بدل واحد كبير.

تأكد ملفات الـ assets أو الصور مش محتاجين يتجمعوا، بس Dart code بس.

لو تحب، أقدر أجهزلك نسخة جاهزة من سكربت Dart صغير يعمل ده داخل المشروع ويطلعلك ملف نصي جاهز تلقائي، بدون ما تستخدم Terminal.

تحب أعمله لك؟


You said:
PS D:\flutter\fruit_hub> find lib -name "*.dart" -exec cat {} + > combined_lib.txt
find : File not found - *.dart
At line:1 char:1
+ find lib -name "*.dart" -exec cat {} + > combined_lib.txt
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (File not found - *.dart:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 

ChatGPT said:
آه فهمت 😅 المشكلة هنا إنك تستخدم PowerShell على ويندوز، وده أمر Unix (Linux/macOS)، لذلك ما اشتغلش عندك.

في PowerShell على ويندوز، استخدم الطريقة دي بدلها:

# انتقل لمجلد المشروع
cd D:\flutter\fruit_hub

# دمج كل ملفات lib/*.dart في ملف واحد
Get-ChildItem -Recurse .\lib\ -Filter *.dart | ForEach-Object {
    Get-Content $_.FullName
    "`n`n"  # إضافة سطر فارغ بين الملفات للتمييز
} | Out-File combined_lib.txt -Encoding UTF8
✅ ده حيطلعلك combined_lib.txt فيه كل كود ملفات الـ lib.

لو تحب، أقدر أعمل لك نسخة سكربت Dart تعمل نفس الشيء، بحيث تضغط على زر وتطلع الملف النصي مباشرة.

تحب أعمله لك؟

تمام، ده سكربت Dart صغير ممكن تحطه في مشروعك ويطلعلك كل ملفات lib/ في ملف نصي واحد تلقائيًا:

import 'dart:io';

void main() {
  final libDir = Directory('lib');
  final outputFile = File('combined_lib.txt');
  final sink = outputFile.openWrite();

  if (!libDir.existsSync()) {
    print('Directory lib/ not found!');
    return;
  }

  void writeFiles(Directory dir) {
    for (var entity in dir.listSync(recursive: true)) {
      if (entity is File && entity.path.endsWith('.dart')) {
        sink.writeln('// ===== File: ${entity.path} =====');
        sink.writeln(entity.readAsStringSync());
        sink.writeln('\n\n');
      }
    }
  }

  writeFiles(libDir);
  sink.close();
  print('All lib files have been combined into combined_lib.txt');
}
طريقة الاستخدام:
احفظ الكود ده في ملف combine_lib.dart في جذر المشروع.

افتح Terminal في مجلد المشروع وشغل:

dart run combine_lib.dart
هيطلعلك ملف combined_lib.txt في نفس مجلد المشروع، فيه كل كود ملفات lib/.

لو عايز، أقدر أعدل السكربت بحيث يضغط الملفات أو ينقلهم جاهزين للإرسال ليّا بسهولة. تحب أعمل ده؟


You said:
لما ببعت كود المشروع ليك بيحيلي الرسالة ديه The message you submitted was too long, please submit something shorter

ChatGPT said:
آه فهمت 😅 المشكلة مش في الكود نفسه، المشكلة إن حجم الكود كله كبير جدًا والـ Chat هنا مش قادر يستقبل ملف نصي ضخم كامل مرة واحدة.

في الحالة دي عندنا شوية حلول عملية:

1️⃣ تقسيم الملفات قبل الإرسال
بدل ما تبعت كل lib في ملف واحد كبير، قسمه على ملفات أصغر حسب المجلدات:

lib/models/...

lib/cubits/...

lib/views/...

lib/services/...

ابعت كل جزء في رسالة مستقلة.

2️⃣ إرسال الملفات المهمة فقط
مش لازم كل الملفات مرة واحدة، ركز على:

الـ Cubits و Repositories

الـ Models

أي Services تتعامل مع Firebase أو Supabase

أي Views/Widgets محتاجة مراجعة

كده نقدر نبدأ من أهم جزء ونتوسع تدريجيًا.

3️⃣ استخدام GitHub أو أي مكان رفع
لو تحب، ممكن ترفع المشروع على GitHub أو أي موقع رفع ملفات (مثل Google Drive أو Dropbox)

تبعتلي الرابط، وانا أقدر أراجع كل الكود بدون مشاكل الحجم.

لو تحب، أقدر أعمل لك خطة منظمة لإرسال الكود بالترتيب بحيث كل رسالة تكون قصيرة ومناسبة للـ Chat، ونتابع مراجعة المشروع خطوة خطوة.

تحب أجهز لك الخطة دي؟


You said:
ايه هو الملف التيكست4000 سطر ايه رايك اقسسمهم علي 3 مرات

 

ChatGPT said:
تمام بالضبط 💡

لو الملف فيه حوالي 4000 سطر، يبقى تقسيمه على 3 أجزاء تقريبًا فكرة ممتازة:

كل جزء حوالي 1300 – 1400 سطر → مناسب للـ Chat وما يحصلش مشكلة في الطول.

ابعت كل جزء في رسالة مستقلة بالترتيب (الجزء الأول، بعد ما نخلصه نروح للتاني، ثم التالت).

ممكن تحط تعليقات واضحة بين الأجزاء:

// ===== الجزء 1 من 3 =====
وهكذا، عشان نعرف ترتيب الملفات.

بهذه الطريقة نقدر نراجع الكود كله خطوة خطوة بدون أي مشاكل.

لو تحب، أقدر أقول لك أفضل ترتيب للإرسال حسب المجلدات بحيث يكون واضح وسهل المراجعة. تحب أعمل ده؟


You said:
بس متراجعش الملف كله غير  لما ابعت كل الاجزاء عشات تكون ملم بتفاصيل المشروع كلها 
 

ChatGPT said:
تمام تمام، فهمتك 🔥

الخطة هتكون كده:

انت هتقسم الملف على 3 أجزاء وترسلهولي بدون ما أراجع أي جزء دلوقتي.

بعد ما تخلص إرسال كل الأجزاء الثلاثة، ساعتها أنا هراجع المشروع كله مرة واحدة، عشان أكون ملم بكل التفاصيل وما يفوتناش أي شيء.

بعد المراجعة هديك خطة كاملة للتعديلات أو التحسينات أو أي تغييرات هتعملها للـ Supabase لاحقًا.

يبقى دلوقتي ممكن تبدأ تبعت الجزء الأول.


You said:
const kHorizintalPadding = 16.0;
const kTopPaddding = 16.0;
const kIsOnBoardingViewSeen = 'KisOnBoardingViewSeen';
const kUserData = 'userData';



// File generated by FlutterFire CLI.
// ignore_for_file: type=lint
import 'package:firebase_core/firebase_core.dart' show FirebaseOptions;
import 'package:flutter/foundation.dart'
    show defaultTargetPlatform, kIsWeb, TargetPlatform;

/// Default [FirebaseOptions] for use with your Firebase apps.
///
/// Example:
/// 
dart
/// import 'firebase_options.dart';
/// // ...
/// await Firebase.initializeApp(
///   options: DefaultFirebaseOptions.currentPlatform,
/// );
///

class DefaultFirebaseOptions {
  static FirebaseOptions get currentPlatform {
    if (kIsWeb) {
      return web;
    }
    switch (defaultTargetPlatform) {
      case TargetPlatform.android:
        return android;
      case TargetPlatform.iOS:
        return ios;
      case TargetPlatform.macOS:
        return macos;
      case TargetPlatform.windows:
        return windows;
      case TargetPlatform.linux:
        throw UnsupportedError(
          'DefaultFirebaseOptions have not been configured for linux - '
          'you can reconfigure this by running the FlutterFire CLI again.',
        );
      default:
        throw UnsupportedError(
          'DefaultFirebaseOptions are not supported for this platform.',
        );
    }
  }

  static const FirebaseOptions web = FirebaseOptions(
    apiKey: 'AIzaSyDbKRIMH0WcbFQiiVQf_clp0ynELT9OrqU',
    appId: '1:93656505089:web:7b6f2f75aa16e761a81900',
    messagingSenderId: '93656505089',
    projectId: 'fruithub0',
    authDomain: 'fruithub0.firebaseapp.com',
    storageBucket: 'fruithub0.firebasestorage.app',
    measurementId: 'G-EFZ9NMYY2S',
  );

  static const FirebaseOptions android = FirebaseOptions(
    apiKey: 'AIzaSyBhRyqGNsY9CuU3VLmVwF3AWUxyIwTJx_c',
    appId: '1:93656505089:android:bd710d69e1435390a81900',
    messagingSenderId: '93656505089',
    projectId: 'fruithub0',
    storageBucket: 'fruithub0.firebasestorage.app',
  );

  static const FirebaseOptions ios = FirebaseOptions(
    apiKey: 'AIzaSyBSoSX0u2Ifj7dcQQPSXQSqMW45HHKduoc',
    appId: '1:93656505089:ios:3e006d8bd8b6c3c1a81900',
    messagingSenderId: '93656505089',
    projectId: 'fruithub0',
    storageBucket: 'fruithub0.firebasestorage.app',
    iosBundleId: 'com.example.fruitHub',
  );

  static const FirebaseOptions macos = FirebaseOptions(
    apiKey: 'AIzaSyBSoSX0u2Ifj7dcQQPSXQSqMW45HHKduoc',
    appId: '1:93656505089:ios:3e006d8bd8b6c3c1a81900',
    messagingSenderId: '93656505089',
    projectId: 'fruithub0',
    storageBucket: 'fruithub0.firebasestorage.app',
    iosBundleId: 'com.example.fruitHub',
  );

  static const FirebaseOptions windows = FirebaseOptions(
    apiKey: 'AIzaSyDbKRIMH0WcbFQiiVQf_clp0ynELT9OrqU',
    appId: '1:93656505089:web:924caa29dfd10b7aa81900',
    messagingSenderId: '93656505089',
    projectId: 'fruithub0',
    authDomain: 'fruithub0.firebaseapp.com',
    storageBucket: 'fruithub0.firebasestorage.app',
    measurementId: 'G-T9M12VDV3D',
  );
}



import 'package:firebase_core/firebase_core.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:flutter_localizations/flutter_localizations.dart';
import 'package:fruit_hub/core/helper_fun/on-generate-route.dart';
import 'package:fruit_hub/core/services/custom_bloc_observer.dart';
import 'package:fruit_hub/core/services/git_it_services.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/features/splash/presentation/views/splash_view.dart';
import 'package:fruit_hub/generated/l10n.dart';
import 'package:fruit_hub/core/services/shared_preferences_singleton.dart';
import 'firebase_options.dart';

void main() async {
  Bloc.observer = CustomBlocObserver();
  WidgetsFlutterBinding.ensureInitialized();
  await Firebase.initializeApp(options: DefaultFirebaseOptions.currentPlatform);
  await Prefs.init();
  setupGitIt();
  runApp(const FruitHub());
}

class FruitHub extends StatelessWidget {
  const FruitHub({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      theme: ThemeData(
        scaffoldBackgroundColor: Colors.white,
        fontFamily: 'Cairo',
        colorScheme: ColorScheme.fromSeed(seedColor: AppColors.primaryColor),
      ),

      localizationsDelegates: [
        S.delegate,
        GlobalMaterialLocalizations.delegate,
        GlobalWidgetsLocalizations.delegate,
        GlobalCupertinoLocalizations.delegate,
      ],
      supportedLocales: S.delegate.supportedLocales,
      locale: const Locale('ar'),
      home: SplashView(),
      onGenerateRoute: onGenerateRoute,
      initialRoute: SplashView.routeName,
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/assets.dart';

class NotificationWidget extends StatelessWidget {
  const NotificationWidget({super.key});

  @override
  Widget build(BuildContext context) {
    return Container(
      padding: const EdgeInsets.all(12),
      decoration: const ShapeDecoration(
        color: Color(0xFFEEF8ED),
        shape: OvalBorder(),
      ),
      child: SvgPicture.asset(Assets.assetsImagesNotification),
    );
  }
}



import 'dart:io';

import 'package:fruit_hub/core/entities/review_entity.dart';


class ProductEntity {
  final String name;
  final String code;
  final String description;
  final num price;
  final File image;
  final bool isFeatured;
  String? imageUrl;
  final int expirationsMonths;
  final bool isOrganic;
  final int numberOfCalories;
  final num avgRating = 0;
  final num ratingCount = 0;
  final int unitAmount;
  final List<ReviewEntity> reviews;
  ProductEntity(
      {required this.name,
      required this.code,
      required this.description,
      required this.price,
      required this.reviews,
      required this.expirationsMonths,
      required this.numberOfCalories,
      required this.unitAmount,
      this.isOrganic = false,
      required this.image,
      required this.isFeatured,
      this.imageUrl});
}



import 'dart:io';

import 'review_entity.dart';

class ProductEntity {
  final String name;
  final String code;
  final String description;
  final num price;

  final bool isFeatured;
  String? imageUrl;
  final int expirationsMonths;
  final bool isOrganic;
  final int numberOfCalories;
  final num avgRating = 0;
  final num ratingCount = 0;
  final int unitAmount;
  final List<ReviewEntity> reviews;
  ProductEntity({
    required this.name,
    required this.code,
    required this.description,
    required this.price,
    required this.reviews,
    required this.expirationsMonths,
    required this.numberOfCalories,
    required this.unitAmount,
    this.isOrganic = false,
    required this.isFeatured,
    this.imageUrl,
  });
}



class ReviewEntity {
  final String name;
  final String image;
  final num ratting;
  final String date;
  final String reviewDescription;

  ReviewEntity(
      {required this.name,
      required this.image,
      required this.ratting,
      required this.date,
      required this.reviewDescription});
}



class CustomException implements Exception {
  final String message;

  CustomException({required this.message});

  @override
  String toString() {
    return message;
  }
}



abstract class Failure {
  final String message;
  Failure(this.message);
}

class ServerFailure extends Failure {
  ServerFailure(super.message);
}



import 'package:flutter/material.dart';

void buildSnackBar(BuildContext context, String message) {
  ScaffoldMessenger.of(context).showSnackBar(SnackBar(content: Text(message)));
}



import '../entities/review_entity.dart';

num getAvgRating(List<ReviewEntity> reviews) {
  var sum = 0.0;
  for (var review in reviews) {
    sum += review.ratting;
  }
  return sum / reviews.length;
}



import 'dart:io';

import 'package:fruit_hub/core/entities/product_entity.dart';

ProductEntity getDummyProduct() {
  return ProductEntity(
    name: 'Apple',
    code: '123',
    description: 'Fresh apple',
    price: 2.5,
    reviews: [],
    expirationsMonths: 6,
    numberOfCalories: 100,
    unitAmount: 1,
    isOrganic: true,
    isFeatured: true,
    imageUrl:
        'https://www.freshnessblogger.com/wp-content/uploads/2020/11/Apple-1.jpg',
  );
}

List<ProductEntity> getDummyProducts() {
  return [
    getDummyProduct(),
    getDummyProduct(),
    getDummyProduct(),
    getDummyProduct(),
    getDummyProduct(),
  ];
}



import 'dart:convert';

import 'package:fruit_hub/constants.dart';
import 'package:fruit_hub/core/services/shared_preferences_singleton.dart';
import 'package:fruit_hub/features/auth/data/models/user_model.dart';
import 'package:fruit_hub/features/auth/domain/entites/user_entity.dart';

UserEntity getUser() {
  var jsonString = Prefs.getString(kUserData);
  var UserEntity = UserModel.fromJson(jsonDecode(jsonString));
  return UserEntity;
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/auth/presentation/views/signin_view.dart';
import 'package:fruit_hub/features/auth/presentation/views/sign_up_view.dart';
import 'package:fruit_hub/features/best_selling/presentation/view/best_selling_view.dart';
import 'package:fruit_hub/features/home/presentation/views/main_view.dart';
import 'package:fruit_hub/features/on_boarding/presentation/views/on_boarding_view.dart';
import 'package:fruit_hub/features/splash/presentation/views/splash_view.dart';

Route<dynamic> onGenerateRoute(RouteSettings settings) {
  switch (settings.name) {
    case SplashView.routeName:
      return MaterialPageRoute(builder: (_) => const SplashView());
    case SigninView.routeName:
      return MaterialPageRoute(builder: (_) => const SigninView());
    case BestSellingView.routeName:
      return MaterialPageRoute(builder: (_) => const BestSellingView());
    case OnBoardingView.routeName:
      return MaterialPageRoute(builder: (_) => const OnBoardingView());
    case SignUpView.routeName:
      return MaterialPageRoute(builder: (_) => const SignUpView());
    case MainView.routeName:
      return MaterialPageRoute(builder: (_) => const MainView());
    default:
      return MaterialPageRoute(builder: (_) => const Scaffold());
  }
}



import 'dart:io';

import 'package:fruit_hub/core/entities/product_entity.dart';
import 'package:fruit_hub/core/helper_fun/get_avg_rating.dart';

import 'review_model.dart';

class ProductModel {
  final String name;
  final String code;
  final String description;
  final num price;

  final bool isFeatured;
  final num sellingCount;
  String? imageUrl;
  final int expirationsMonths;
  final bool isOrganic;
  final int numberOfCalories;
  final num avgRating;
  final num ratingCount = 0;
  final int unitAmount;
  final List<ReviewModel> reviews;
  ProductModel({
    required this.name,
    required this.code,
    required this.description,
    required this.expirationsMonths,
    required this.numberOfCalories,
    required this.avgRating,
    required this.unitAmount,
    required this.sellingCount,
    required this.reviews,
    required this.price,
    required this.isOrganic,
    required this.isFeatured,
    this.imageUrl,
  });

  factory ProductModel.fromJson(Map<String, dynamic> json) {
    return ProductModel(
      avgRating: getAvgRating(json['reviews']),
      name: json['name'],
      code: json['code'],
      description: json['description'],
      expirationsMonths: json['expirationsMonths'],
      numberOfCalories: json['numberOfCalories'],
      unitAmount: json['unitAmount'],
      sellingCount: json['sellingCount'],
      reviews:
          json['reviews'] != null
              ? List<ReviewModel>.from(
                json['reviews'].map((e) => ReviewModel.fromJson(e)),
              )
              : [],
      price: json['price'],
      isOrganic: json['isOrganic'],
      isFeatured: json['isFeatured'],
      imageUrl: json['imageUrl'],
    );
  }

  ProductEntity toEntity() {
    return ProductEntity(
      name: name,
      code: code,
      description: description,
      price: price,
      reviews: reviews.map((e) => e.toEntity()).toList(),
      expirationsMonths: expirationsMonths,
      numberOfCalories: numberOfCalories,
      unitAmount: unitAmount,
      isOrganic: isOrganic,
      isFeatured: isFeatured,
      imageUrl: imageUrl,
    );
  }

  toJson() {
    return {
      'name': name,
      'code': code,
      'description': description,
      'price': price,
      'isFeatured': isFeatured,
      'imageUrl': imageUrl,
      'expirationsMonths': expirationsMonths,
      'numberOfCalories': numberOfCalories,
      'unitAmount': unitAmount,
      'isOrganic': isOrganic,
      'reviews': reviews.map((e) => e.toJson()).toList(),
    };
  }
}



import '../entities/review_entity.dart';

class ReviewModel {
  final String name;
  final String image;
  final num ratting;
  final String date;
  final String reviewDescription;

  ReviewModel({
    required this.name,
    required this.image,
    required this.ratting,
    required this.date,
    required this.reviewDescription,
  });

  factory ReviewModel.fromEntity(ReviewEntity reviewEntity) {
    return ReviewModel(
      name: reviewEntity.name,
      image: reviewEntity.image,
      ratting: reviewEntity.ratting,
      date: reviewEntity.date,
      reviewDescription: reviewEntity.reviewDescription,
    );
  }

  factory ReviewModel.fromJson(Map<String, dynamic> json) {
    return ReviewModel(
      name: json['name'],
      image: json['image'],
      ratting: json['ratting'],
      date: json['date'],
      reviewDescription: json['reviewDescription'],
    );
  }

  ReviewEntity toEntity() {
    return ReviewEntity(
      name: name,
      image: image,
      ratting: ratting,
      date: date,
      reviewDescription: reviewDescription,
    );
  }

  toJson() {
    return {
      'name': name,
      'image': image,
      'ratting': ratting,
      'date': date,
      'reviewDescription': reviewDescription,
    };
  }
}



import 'package:bloc/bloc.dart';
import 'package:fruit_hub/core/entities/product_entity.dart';
import 'package:fruit_hub/core/repos/products_repo/products_repo.dart';
import 'package:meta/meta.dart';

part 'products_state.dart';

class ProductsCubit extends Cubit<ProductsState> {
  ProductsCubit(this.productsRepo) : super(ProductsInitial());

  final ProductsRepo productsRepo;
  int productsLength = 0;
  Future<void> getProducts() async {
    emit(ProductsLoading());
    final result = await productsRepo.getProducts();
    result.fold(
      (failure) => emit(ProductsFailure(errMessage: failure.message)),
      (products) => emit(ProductsSuccess(products)),
    );
  }

  Future<void> getBestSellingProducts() async {
    emit(ProductsLoading());
    final result = await productsRepo.getProducts();
    result.fold(
      (failure) => emit(ProductsFailure(errMessage: failure.message)),
      (products) {
        productsLength = products.length;
        emit(ProductsSuccess(products));
      },
    );
  }
}



part of 'products_cubit.dart';

@immutable
sealed class ProductsState {}

final class ProductsInitial extends ProductsState {}

final class ProductsLoading extends ProductsState {}

final class ProductsFailure extends ProductsState {
  final String errMessage;
  ProductsFailure({required this.errMessage});
}

final class ProductsSuccess extends ProductsState {
  final List<ProductEntity> products;
  ProductsSuccess(this.products);
}



import 'package:dartz/dartz.dart';
import 'package:fruit_hub/core/entities/product_entity.dart';
import 'package:fruit_hub/core/errors/failures.dart';

abstract class ProductsRepo {
  Future<Either<Failure, List<ProductEntity>>> getProducts();
  Future<Either<Failure, List<ProductEntity>>> getbestSellingProducts();
}



import 'package:dartz/dartz.dart';
import 'package:flutter_svg/flutter_svg.dart';
import 'package:fruit_hub/core/entities/product_entity.dart';
import 'package:fruit_hub/core/errors/failures.dart';
import 'package:fruit_hub/core/models/product_model.dart';
import 'package:fruit_hub/core/repos/products_repo/products_repo.dart';
import 'package:fruit_hub/core/services/database_services.dart';
import 'package:fruit_hub/core/utils/backend_endpoints.dart';

class ProductsRepoImpl extends ProductsRepo {
  final DatabaseServices databaseServices;

  ProductsRepoImpl(this.databaseServices);
  @override
  Future<Either<Failure, List<ProductEntity>>> getProducts() async {
    try {
      var data =
          await databaseServices.getUserData(path: BackendEndpoints.getProducts)
              as List<Map<String, dynamic>>;
      List<ProductEntity> products =
          data.map((e) => ProductModel.fromJson(e).toEntity()).toList();
      return right(products);
    } catch (e) {
      return left(ServerFailure(e.toString()));
    }
  }

  @override
  Future<Either<Failure, List<ProductEntity>>> getbestSellingProducts() async {
    try {
      var data =
          await databaseServices.getUserData(
                path: BackendEndpoints.getProducts,
                query: {
                  "limit": 10,
                  "orderBy": "sellingCount",
                  "descending": true,
                },
              )
              as List<Map<String, dynamic>>;
      List<ProductEntity> products =
          data.map((e) => ProductModel.fromJson(e).toEntity()).toList();
      return right(products);
    } catch (e) {
      return left(ServerFailure(e.toString()));
    }
  }
}



import 'dart:developer';

import 'package:bloc/bloc.dart';
import 'package:flutter/foundation.dart';

class CustomBlocObserver extends BlocObserver {
  @override
  void onTransition(Bloc bloc, Transition transition) {
    super.onTransition(bloc, transition);
    if (kDebugMode) {
      log('${bloc.runtimeType} $transition');
    }
  }

  @override
  void onChange(BlocBase bloc, Change change) {
    super.onChange(bloc, change);
    if (kDebugMode) {
      log('${bloc.runtimeType} $change');
    }
  }
}



abstract class DatabaseServices {
  Future<void> addData({
    required String path,
    required Map<String, dynamic> data,
    String? documentId,
  });
  Future<dynamic> getUserData({
    required String path,
    String? docuementId,
    Map<String, dynamic>? query,
  });
  Future<bool> checkIfDataExists({
    required String path,
    required String docuementId,
  });
}



import 'package:firebase_auth/firebase_auth.dart';
import 'package:flutter_facebook_auth/flutter_facebook_auth.dart';
import 'package:fruit_hub/core/errors/exceptions.dart';
import 'dart:developer';

import 'package:google_sign_in/google_sign_in.dart';

class FirebaseAuthService {
  Future deleteUser() async {
    await FirebaseAuth.instance.currentUser!.delete();
  }

  Future<User> createUserWithEmailAndPassword({
    required String email,
    required String password,
  }) async {
    try {
      final credential = await FirebaseAuth.instance
          .createUserWithEmailAndPassword(email: email, password: password);
      return credential.user!;
    } on FirebaseAuthException catch (e) {
      log(
        "Exception in FirebaseAuthService.createUserWithEmailAndPassword: ${e.toString()} and code is ${e.code}",
      );
      if (e.code == 'weak-password') {
        throw CustomException(message: 'Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø¶Ø¹ÙŠÙ Ø¬Ø¯Ø§Ù‹.');
      } else if (e.code == 'email-already-in-use') {
        throw CustomException(
          message: 'Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…Ø³Ø¨Ù‚Ø§Ù‹. Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.',
        );
      } else if (e.code == 'network-request-failed') {
        throw CustomException(message: 'ØªØ§ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø§Ù†ØªØ±Ù†Øª.');
      } else {
        throw CustomException(
          message: 'Ù„Ù‚Ø¯ Ø­Ø¯Ø« Ø®Ø·Ø§Ù” Ù…Ø§. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø§Ø®Ø±Ù‰.',
        );
      }
    } catch (e) {
      log(
        "Exception in FirebaseAuthService.createUserWithEmailAndPassword: ${e.toString()}",
      );

      throw CustomException(
        message: 'Ù„Ù‚Ø¯ Ø­Ø¯Ø« Ø®Ø·Ø§Ù” Ù…Ø§. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø§Ø®Ø±Ù‰.',
      );
    }
  }

  Future<User> signInWithEmailAndPassword({
    required String email,
    required String password,
  }) async {
    try {
      final credential = await FirebaseAuth.instance.signInWithEmailAndPassword(
        email: email,
        password: password,
      );
      return credential.user!;
    } on FirebaseAuthException catch (e) {
      log(
        "Exception in FirebaseAuthService.signInWithEmailAndPassword: ${e.toString()} and code is ${e.code}",
      );
      if (e.code == 'user-not-found') {
        throw CustomException(
          message: 'Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø§Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­.',
        );
      } else if (e.code == 'wrong-password') {
        throw CustomException(
          message: 'Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø§Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­.',
        );
      } else if (e.code == 'network-request-failed') {
        throw CustomException(message: 'ØªØ§ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø§Ù†ØªØ±Ù†Øª.');
      } else {
        throw CustomException(
          message: 'Ù„Ù‚Ø¯ Ø­Ø¯Ø« Ø®Ø·Ø§Ù” Ù…Ø§. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø§Ø®Ø±Ù‰.',
        );
      }
    } catch (e) {
      log(
        "Exception in FirebaseAuthService.signInWithEmailAndPassword: ${e.toString()}",
      );

      throw CustomException(
        message: 'Ù„Ù‚Ø¯ Ø­Ø¯Ø« Ø®Ø·Ø§Ù” Ù…Ø§. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø§Ø®Ø±Ù‰.',
      );
    }
  }

  Future<User> signInWithGoogle() async {
    final GoogleSignInAccount? googleUser = await GoogleSignIn().signIn();

    final GoogleSignInAuthentication? googleAuth =
        await googleUser?.authentication;

    final credential = GoogleAuthProvider.credential(
      accessToken: googleAuth?.accessToken,
      idToken: googleAuth?.idToken,
    );

    return (await FirebaseAuth.instance.signInWithCredential(credential)).user!;
  }

  Future<User> signinWithFacebook() async {
    final LoginResult loginResult = await FacebookAuth.instance.login();

    final OAuthCredential facebookAuthCredential =
        FacebookAuthProvider.credential(loginResult.accessToken!.tokenString);

    return (await FirebaseAuth.instance.signInWithCredential(
      facebookAuthCredential,
    )).user!;
  }

  bool isLoggedIn() {
    return FirebaseAuth.instance.currentUser != null;
  }
}



import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:fruit_hub/core/services/database_services.dart';

class FirestoreServices implements DatabaseServices {
  FirebaseFirestore firestore = FirebaseFirestore.instance;

  @override
  Future<void> addData({
    required String path,
    required Map<String, dynamic> data,
    String? documentId,
  }) async {
    if (documentId != null) {
      firestore.collection(path).doc(documentId).set(data);
    } else {
      await firestore.collection(path).add(data);
    }
  }

  @override
  Future<dynamic> getUserData({
    required String path,
    String? docuementId,
    Map<String, dynamic>? query,
  }) async {
    if (docuementId != null) {
      var data = await firestore.collection(path).doc(docuementId).get();
      return data.data;
    } else {
      Query data = firestore.collection(path);
      if (query != null) {
        if (query['orderBy'] != null) {
          var orderByField = query['orderBy'];
          var descending = query['descending'];
          data = data.orderBy(orderByField, descending: descending);
        }
        if (query['limit'] != null) {
          var limit = query['limit'];
          data = data.limit(limit);
        }
      }
      var result = await data.get();
      return result.docs.map((e) => e.data()).toList();
    }
  }

  @override
  Future<bool> checkIfDataExists({
    required String path,
    required String docuementId,
  }) async {
    var data = await firestore.collection(path).doc(docuementId).get();
    return data.exists;
  }
}



import 'package:fruit_hub/core/repos/products_repo/products_repo.dart';
import 'package:fruit_hub/core/repos/products_repo/products_repo_impl.dart';
import 'package:fruit_hub/core/services/database_services.dart';
import 'package:fruit_hub/core/services/firebase_auth_service.dart';
import 'package:fruit_hub/core/services/firestore_services.dart';
import 'package:fruit_hub/features/auth/data/repos/auth_repo_impl.dart';
import 'package:fruit_hub/features/auth/domain/repos/auth_repo.dart';
import 'package:get_it/get_it.dart';

final getIt = GetIt.instance;

void setupGitIt() {
  getIt.registerSingleton<FirebaseAuthService>(FirebaseAuthService());
  getIt.registerSingleton<DatabaseServices>(FirestoreServices());
  GetIt.I.registerSingleton<AuthRepo>(
    AuthRepoImpl(
      firebaseAuthService: getIt<FirebaseAuthService>(),
      databaseServices: getIt<DatabaseServices>(),
    ),
  );
  GetIt.I.registerSingleton<ProductsRepo>(
    ProductsRepoImpl(getIt<DatabaseServices>()),
  );
}



import 'package:shared_preferences/shared_preferences.dart';

class Prefs {
  static late SharedPreferences _instance;

  static Future<void> init() async {
    _instance = await SharedPreferences.getInstance();
  }

  static setBool(String key, bool value) {
    _instance.setBool(key, value);
  }

  static getBool(String key) {
    return _instance.getBool(key) ?? false;
  }

  static setString(String key, String value) async {
    await _instance.setString(key, value);
  }

  static getString(String key) {
    return _instance.getString(key) ?? '';
  }
}



import 'package:flutter/material.dart';

abstract class AppColors {
  static const Color primaryColor = Color(0xff1F5E3B);
  static const Color lightPrimaryColor = Color(0xFF2D9F5D);
  static const Color secondaryColor = Color(0xFFF4A91F);
  static const Color lightSecondaryColor = Color(0xFFF8C76D);
}



import 'package:flutter/material.dart';

abstract class TextStyles {
  static const TextStyle bold13 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 13,
  );
  static const TextStyle bold23 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 23,
  );

  static const TextStyle semiBold13 = TextStyle(
    fontWeight: FontWeight.w600,
    fontSize: 13,
  );

  static const TextStyle regular13 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 13,
  );

  static const TextStyle bold16 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 16,
  );

  static const TextStyle bold19 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 19,
  );

  static const TextStyle semiBold16 = TextStyle(
    fontWeight: FontWeight.w600,
    fontSize: 16,
  );

  static const TextStyle bold28 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 28,
  );

  static const TextStyle regular22 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 22,
  );

  static const TextStyle semiBold11 = TextStyle(
    fontWeight: FontWeight.w600,
    fontSize: 11,
  );

  static const TextStyle medium15 = TextStyle(
    fontWeight: FontWeight.w500,
    fontSize: 15,
  );

  static const TextStyle regular26 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 26,
  );

  static const TextStyle regular16 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 16,
  );

  static const TextStyle regular11 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 11,
  );
}



// ignore_for_file: prefer_single_quotes
class Assets {
  Assets._();
  
  /// Assets for assetsImagesAppIcon
  /// assets/images/app_icon.png
  static const String assetsImagesAppIcon = "assets/images/app_icon.png";

  /// Assets for assetsImagesAppLoge
  /// assets/images/app_loge.svg
  static const String assetsImagesAppLoge = "assets/images/app_loge.svg";

  /// Assets for assetsImagesAppleIcon
  /// assets/images/apple_icon.svg
  static const String assetsImagesAppleIcon = "assets/images/apple_icon.svg";

  /// Assets for assetsImagesBottomSplashScreen
  /// assets/images/bottom_splash_screen.svg
  static const String assetsImagesBottomSplashScreen = "assets/images/bottom_splash_screen.svg";

  /// Assets for assetsImagesCheckbox
  /// assets/images/Checkbox.svg
  static const String assetsImagesCheckbox = "assets/images/Checkbox.svg";

  /// Assets for assetsImagesFacebookIcon
  /// assets/images/facebook_icon.svg
  static const String assetsImagesFacebookIcon = "assets/images/facebook_icon.svg";

  /// Assets for assetsImagesFilterImage
  /// assets/images/filter_image.svg
  static const String assetsImagesFilterImage = "assets/images/filter_image.svg";

  /// Assets for assetsImagesFiltter2
  /// assets/images/filtter2.svg
  static const String assetsImagesFiltter2 = "assets/images/filtter2.svg";

  /// Assets for assetsImagesFreepikPlantInject63
  /// assets/images/freepik--Plant--inject-63.svg
  static const String assetsImagesFreepikPlantInject63 = "assets/images/freepik--Plant--inject-63.svg";

  /// Assets for assetsImagesGoogleIcon
  /// assets/images/google_icon.svg
  static const String assetsImagesGoogleIcon = "assets/images/google_icon.svg";

  /// Assets for assetsImagesHome
  /// assets/images/home.svg
  static const String assetsImagesHome = "assets/images/home.svg";

  /// Assets for assetsImagesHomeActive
  /// assets/images/home_active.svg
  static const String assetsImagesHomeActive = "assets/images/home_active.svg";

  /// Assets for assetsImagesImagesFeaturedItemBackground
  /// assets/images/imagesFeaturedItemBackground.svg
  static const String assetsImagesImagesFeaturedItemBackground = "assets/images/imagesFeaturedItemBackground.svg";

  /// Assets for assetsImagesNotification
  /// assets/images/notification.svg
  static const String assetsImagesNotification = "assets/images/notification.svg";

  /// Assets for assetsImagesOnBoardingPage1ViewItem
  /// assets/images/on_boarding_page1_view_item.svg
  static const String assetsImagesOnBoardingPage1ViewItem = "assets/images/on_boarding_page1_view_item.svg";

  /// Assets for assetsImagesOnBoardingPage1ViewItemBackground
  /// assets/images/On_Boarding_Page1_View_Item_background.svg
  static const String assetsImagesOnBoardingPage1ViewItemBackground = "assets/images/On_Boarding_Page1_View_Item_background.svg";

  /// Assets for assetsImagesOnBoardingPage2ViewItem
  /// assets/images/on_boarding_page2_view_item.svg
  static const String assetsImagesOnBoardingPage2ViewItem = "assets/images/on_boarding_page2_view_item.svg";

  /// Assets for assetsImagesOnBoardingPage2ViewItemBackground
  /// assets/images/On_Boarding_Page2_View_Item_background.svg
  static const String assetsImagesOnBoardingPage2ViewItemBackground = "assets/images/On_Boarding_Page2_View_Item_background.svg";

  /// Assets for assetsImagesProductActive
  /// assets/images/product_active.svg
  static const String assetsImagesProductActive = "assets/images/product_active.svg";

  /// Assets for assetsImagesProducts
  /// assets/images/products.svg
  static const String assetsImagesProducts = "assets/images/products.svg";

  /// Assets for assetsImagesProfileImage
  /// assets/images/profile_image.png
  static const String assetsImagesProfileImage = "assets/images/profile_image.png";

  /// Assets for assetsImagesSearchIcon
  /// assets/images/search_icon.svg
  static const String assetsImagesSearchIcon = "assets/images/search_icon.svg";

  /// Assets for assetsImagesShoppingCart
  /// assets/images/shopping-cart.svg
  static const String assetsImagesShoppingCart = "assets/images/shopping-cart.svg";

  /// Assets for assetsImagesShoppingCartActive
  /// assets/images/shopping-cart_active.svg
  static const String assetsImagesShoppingCartActive = "assets/images/shopping-cart_active.svg";

  /// Assets for assetsImagesTrashimage
  /// assets/images/trashimage.svg
  static const String assetsImagesTrashimage = "assets/images/trashimage.svg";

  /// Assets for assetsImagesUser
  /// assets/images/user.svg
  static const String assetsImagesUser = "assets/images/user.svg";

  /// Assets for assetsImagesUserActive
  /// assets/images/user_active.svg
  static const String assetsImagesUserActive = "assets/images/user_active.svg";
}




class BackendEndpoints {
  static const addUserData = 'users';
  static const getUserData = 'users';
  static const isUserExists = 'users';
  static const getProducts = 'products';
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/notification_widget.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

AppBar buildAppBar(context, {required String title}) {
  return AppBar(
    backgroundColor: Colors.white,
    actions: const [
      Padding(
        padding: EdgeInsets.symmetric(horizontal: 16),
        child: NotificationWidget(),
      ),
    ],
    leading: GestureDetector(
      onTap: () {
        Navigator.pop(context);
      },
      child: const Icon(Icons.arrow_back_ios_new),
    ),
    centerTitle: true,
    title: Text(title, textAlign: TextAlign.center, style: TextStyles.bold19),
  );
}



import 'package:flutter/material.dart';

class CustomNetworkImage extends StatelessWidget {
  const CustomNetworkImage({super.key, required this.imageUrl});

  final String imageUrl;

  @override
  Widget build(BuildContext context) {
    return Image.network(imageUrl);
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/notification_widget.dart';

import '../utils/app_text_styles.dart';

AppBar buildAppBar() {
  return AppBar(
    actions: const [
      Padding(
        padding: EdgeInsets.symmetric(horizontal: 16),
        child: NotificationWidget(),
      ),
    ],
    backgroundColor: Colors.transparent,
    elevation: 0,
    title: const Text(
      'Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ù‹Ø§',
      textAlign: TextAlign.center,
      style: TextStyles.bold19,
    ),
  );
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/notification_widget.dart';

import '../utils/app_text_styles.dart';

AppBar buildAppBar(
  context, {
  required String title,
  bool showBackButton = true,
  bool showNotification = true,
}) {
  return AppBar(
    backgroundColor: Colors.white,
    actions: [
      if (showNotification)
        Padding(
          padding: EdgeInsets.symmetric(horizontal: 16),
          child: const NotificationWidget(),
        ),
    ],
    leading: Visibility(
      visible: showBackButton,
      child: GestureDetector(
        onTap: () {
          Navigator.pop(context);
        },
        child: const Icon(Icons.arrow_back_ios_new),
      ),
    ),
    centerTitle: true,
    title: Text(title, textAlign: TextAlign.center, style: TextStyles.bold19),
  );
}



import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class CustomButton extends StatelessWidget {
  const CustomButton({super.key, required this.onPressed, required this.text});
  final VoidCallback onPressed;
  final String text;
  @override
  Widget build(BuildContext context) {
    return SizedBox(
      width: double.infinity,
      height: 54,
      child: TextButton(
        style: TextButton.styleFrom(
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(16),
          ),
          backgroundColor: AppColors.primaryColor,
        ),
        onPressed: onPressed,
        child: Text(
          text,
          style: TextStyles.bold16.copyWith(color: Colors.white),
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';

class CustomErrorWidget extends StatelessWidget {
  const CustomErrorWidget({super.key, required this.text});
  final String text;
  @override
  Widget build(BuildContext context) {
    return Center(child: Text(text));
  }
}






import 'package:flutter/material.dart';
import 'package:fruit_hub/core/widgets/custom_text_field.dart';

class CustomPasswordField extends StatefulWidget {
  const CustomPasswordField({super.key, this.onSaved});
  final void Function(String?)? onSaved;

  @override
  State<CustomPasswordField> createState() => _CustomPasswordFieldState();
}

class _CustomPasswordFieldState extends State<CustomPasswordField> {
  bool obscureText = true;
  @override
  Widget build(BuildContext context) {
    return CustomTextFormField(
      onSaved: widget.onSaved,
      obscureText: obscureText,
      hintText: 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
      textInputType: TextInputType.visiblePassword,
      suffixIcon: GestureDetector(
        onTap: () {
          obscureText = !obscureText;
          setState(() {});
        },
        child:
            obscureText
                ? const Icon(Icons.visibility_off, color: Color(0xFFC9CECF))
                : const Icon(Icons.remove_red_eye, color: Color(0xFFC9CECF)),
      ),
    );
  }
}



ChatGPT said:
تمام، استلمت الجزء الأول ✅

مستني باقي الأجزاء، ابعت الجزء التاني لما تكون جاهز.


You said:
import 'package:flutter/material.dart';
import 'package:modal_progress_hud_nsn/modal_progress_hud_nsn.dart';

class CustomProgressHud extends StatelessWidget {
  const CustomProgressHud({
    super.key,
    required this.isLoading,
    required this.child,
  });

  final bool isLoading;
  final Widget child;
  @override
  Widget build(BuildContext context) {
    return ModalProgressHUD(inAsyncCall: isLoading, child: child);
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class CustomTextFormField extends StatelessWidget {
  const CustomTextFormField({
    super.key,
    required this.hintText,
    required this.textInputType,
    this.suffixIcon,
    this.onSaved,
    this.obscureText = false,
  });
  final String hintText;
  final TextInputType textInputType;
  final Widget? suffixIcon;
  final void Function(String?)? onSaved;
  final bool obscureText;
  @override
  Widget build(BuildContext context) {
    return TextFormField(
      obscureText: obscureText,
      onSaved: onSaved,
      validator: (value) {
        if (value == null || value.isEmpty) {
          return "Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ù…Ø·Ù„ÙˆØ¨";
        }
        return null;
      },
      keyboardType: textInputType,
      decoration: InputDecoration(
        suffixIcon: suffixIcon,
        hintStyle: TextStyles.bold13.copyWith(color: const Color(0xFF949D9E)),
        hintText: hintText,
        filled: true,
        fillColor: const Color(0xFFF9FAFA),
        border: buildBorder(),
        enabledBorder: buildBorder(),
        focusedBorder: buildBorder(),
      ),
    );
  }

  OutlineInputBorder buildBorder() {
    return OutlineInputBorder(
      borderRadius: BorderRadius.circular(4),
      borderSide: const BorderSide(width: 1, color: Color(0xFFE6E9E9)),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/entities/product_entity.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/core/utils/assets.dart';

class FruitItem extends StatelessWidget {
  const FruitItem({super.key, required this.productEntity});

  final ProductEntity productEntity;
  @override
  Widget build(BuildContext context) {
    return Container(
      decoration: ShapeDecoration(
        color: const Color(0xFFF3F5F7),
        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(4)),
      ),
      child: Stack(
        children: [
          Positioned(
            top: 0,
            right: 0,
            child: IconButton(
              onPressed: () {},
              icon: const Icon(Icons.favorite_outline),
            ),
          ),
          Positioned.fill(
            child: Column(
              children: [
                const SizedBox(height: 20),
                Flexible(child: Image.network(productEntity.imageUrl!)),
                const SizedBox(height: 24),
                ListTile(
                  title: Text(
                    productEntity.name,
                    textAlign: TextAlign.right,
                    style: TextStyles.semiBold16,
                  ),
                  subtitle: Text.rich(
                    TextSpan(
                      children: [
                        TextSpan(
                          text: '${productEntity.price}Ø¬Ù†ÙŠØ© ',
                          style: TextStyles.bold13.copyWith(
                            color: AppColors.secondaryColor,
                          ),
                        ),
                        TextSpan(
                          text: '/',
                          style: TextStyles.bold13.copyWith(
                            color: AppColors.lightSecondaryColor,
                          ),
                        ),
                        TextSpan(
                          text: ' ',
                          style: TextStyles.semiBold13.copyWith(
                            color: AppColors.secondaryColor,
                          ),
                        ),
                        TextSpan(
                          text: 'ÙƒÙŠÙ„Ùˆ',
                          style: TextStyles.semiBold13.copyWith(
                            color: AppColors.lightSecondaryColor,
                          ),
                        ),
                      ],
                    ),
                    textAlign: TextAlign.right,
                  ),
                  trailing: const CircleAvatar(
                    backgroundColor: AppColors.primaryColor,
                    child: Icon(Icons.add, color: Colors.white),
                  ),
                ),
              ],
            ),
          ),
        ],
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/assets.dart';

class NotificationWidget extends StatelessWidget {
  const NotificationWidget({super.key});

  @override
  Widget build(BuildContext context) {
    return Container(
      padding: const EdgeInsets.all(12),
      decoration: const ShapeDecoration(
        color: Color(0xFFEEF8ED),
        shape: OvalBorder(),
      ),
      child: SvgPicture.asset(Assets.assetsImagesNotification),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/core/utils/assets.dart';

class SearchTextField extends StatelessWidget {
  const SearchTextField({super.key});

  @override
  Widget build(BuildContext context) {
    return Container(
      decoration: const BoxDecoration(
        boxShadow: [
          BoxShadow(
            color: Color(0x0A000000),
            blurRadius: 9,
            offset: Offset(0, 2),
            spreadRadius: 0,
          ),
        ],
      ),
      child: TextField(
        keyboardType: TextInputType.text,
        decoration: InputDecoration(
          prefixIcon: Container(
            width: 20,
            child: Center(
              child: SvgPicture.asset(Assets.assetsImagesSearchIcon),
            ),
          ),
          suffixIcon: Container(
            width: 20,
            child: Center(
              child: SvgPicture.asset(Assets.assetsImagesFilterImage),
            ),
          ),
          hintStyle: TextStyles.regular13.copyWith(color: Colors.white),
          hintText: 'Ø§Ø¨Ø­Ø« Ø¹Ù†.......',
          filled: true,
          fillColor: const Color(0xFFF9FAFA),
          border: buildBorder(),
          enabledBorder: buildBorder(),
          focusedBorder: buildBorder(),
        ),
      ),
    );
  }

  OutlineInputBorder buildBorder() {
    return OutlineInputBorder(
      borderRadius: BorderRadius.circular(4),
      borderSide: const BorderSide(width: 1, color: Colors.white),
    );
  }
}



import 'package:firebase_auth/firebase_auth.dart';
import 'package:flutter/material.dart';
import 'package:fruit_hub/features/auth/domain/entites/user_entity.dart';

class UserModel extends UserEntity {
  UserModel({required super.name, required super.email, required super.uId});
  factory UserModel.fromFirebaseUser(User user) {
    return UserModel(
      name: user.displayName ?? '',
      email: user.email ?? '',
      uId: user.uid,
    );
  }
  factory UserModel.fromJson(Map<String, dynamic> map) {
    return UserModel(
      name: map['name'] ?? '',
      email: map['email'] ?? '',
      uId: map['uId'] ?? '',
    );
  }
  factory UserModel.fromEntity(UserEntity user) {
    return UserModel(name: user.name, email: user.email, uId: user.uId);
  }
  toMap() {
    return {'name': name, 'email': email, 'uId': uId};
  }
}



import 'dart:convert';
import 'dart:developer';

import 'package:dartz/dartz.dart';
import 'package:firebase_auth/firebase_auth.dart';

import 'package:fruit_hub/constants.dart';
import 'package:fruit_hub/core/errors/exceptions.dart';
import 'package:fruit_hub/core/errors/failures.dart';
import 'package:fruit_hub/core/services/database_services.dart';
import 'package:fruit_hub/core/services/firebase_auth_service.dart';
import 'package:fruit_hub/core/services/shared_preferences_singleton.dart';
import 'package:fruit_hub/core/utils/backend_endpoints.dart';
import 'package:fruit_hub/features/auth/data/models/user_model.dart';
import 'package:fruit_hub/features/auth/domain/entites/user_entity.dart';
import 'package:fruit_hub/features/auth/domain/repos/auth_repo.dart';

class AuthRepoImpl extends AuthRepo {
  final FirebaseAuthService firebaseAuthService;
  final DatabaseServices databaseServices;

  AuthRepoImpl({
    required this.databaseServices,
    required this.firebaseAuthService,
  });

  @override
  Future<Either<Failure, UserEntity>> createUserWithEmailAndPassword(
    String email,
    String password,
    String name,
  ) async {
    User? user;
    try {
      user = await firebaseAuthService.createUserWithEmailAndPassword(
        email: email,
        password: password,
      );

      final userEntity = UserEntity(name: name, email: email, uId: user.uid);

      await addUserData(user: userEntity);
      await saveUserData(user: userEntity);

      return right(userEntity);
    } catch (e) {
      await deleteUser(user);
      log('Signup error: $e');
      return left(ServerFailure('Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§'));
    }
  }

  @override
  Future<Either<Failure, UserEntity>> signInWithEmailAndPassword(
    String email,
    String password,
  ) async {
    try {
      final user = await firebaseAuthService.signInWithEmailAndPassword(
        email: email,
        password: password,
      );

      final userEntity = await _handleUserAfterAuth(user);

      return right(userEntity);
    } on CustomException catch (e) {
      return left(ServerFailure(e.message));
    } catch (e) {
      log('Signin error: $e');
      return left(ServerFailure('Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§'));
    }
  }

  @override
  Future<Either<Failure, UserEntity>> signinWithGoogle() async {
    User? user;
    try {
      user = await firebaseAuthService.signInWithGoogle();

      final userEntity = await _handleUserAfterAuth(user);

      return right(userEntity);
    } catch (e) {
      await deleteUser(user);
      log('Google signin error: $e');
      return left(ServerFailure('Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§'));
    }
  }

  @override
  Future<Either<Failure, UserEntity>> signinWithFacebook() async {
    User? user;
    try {
      user = await firebaseAuthService.signinWithFacebook();

      final userEntity = await _handleUserAfterAuth(user);

      return right(userEntity);
    } catch (e) {
      await deleteUser(user);
      log('Facebook signin error: $e');
      return left(ServerFailure('Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§'));
    }
  }

  @override
  Future addUserData({required UserEntity user}) async {
    await databaseServices.addData(
      path: BackendEndpoints.addUserData,
      data: UserModel.fromEntity(user).toMap(),
      documentId: user.uId,
    );
  }

  @override
  Future<UserEntity> getUserData({required String uid}) async {
    final userData = await databaseServices.getUserData(
      path: BackendEndpoints.getUserData,
      docuementId: uid,
    );

    return UserModel.fromJson(userData);
  }

  Future saveUserData({required UserEntity user}) async {
    final jsonData = jsonEncode(UserModel.fromEntity(user).toMap());
    await Prefs.setString(kUserData, jsonData);
  }

  Future<UserEntity> _handleUserAfterAuth(User user) async {
    final userData = await databaseServices.getUserData(
      path: BackendEndpoints.getUserData,
      docuementId: user.uid,
    );

    late UserEntity userEntity;

    if (userData == null) {
      userEntity = UserModel.fromFirebaseUser(user);
      await addUserData(user: userEntity);
    } else {
      userEntity = UserModel.fromJson(userData);
    }

    await saveUserData(user: userEntity);

    return userEntity;
  }

  Future<void> deleteUser(User? user) async {
    if (user != null) {
      await firebaseAuthService.deleteUser();
    }
  }
}






class UserEntity {
  final String name;
  final String email;
  final String uId;

  UserEntity({required this.name, required this.email, required this.uId});
}



import 'package:dartz/dartz.dart';
import 'package:fruit_hub/core/errors/failures.dart';
import 'package:fruit_hub/features/auth/domain/entites/user_entity.dart';

abstract class AuthRepo {
  Future<Either<Failure, UserEntity>> createUserWithEmailAndPassword(
    String email,
    String password,
    String name,
  );
  Future<Either<Failure, UserEntity>> signInWithEmailAndPassword(
    String email,
    String password,
  );
  Future<Either<Failure, UserEntity>> signinWithGoogle();
  Future<Either<Failure, UserEntity>> signinWithFacebook();
  Future addUserData({required UserEntity user});
  Future<UserEntity> getUserData({required String uid});
}



import 'package:bloc/bloc.dart';
import 'package:fruit_hub/features/auth/domain/entites/user_entity.dart';
import 'package:fruit_hub/features/auth/domain/repos/auth_repo.dart';
import 'package:meta/meta.dart';

part 'signin_state.dart';

class SigninCubit extends Cubit<SigninState> {
  SigninCubit(this.authRepo) : super(SigninInitial());
  final AuthRepo authRepo;
  Future<void> signin(String email, String password) async {
    emit(SigninLoading());
    var result = await authRepo.signInWithEmailAndPassword(email, password);
    result.fold(
      (failure) => emit(SigninFailure(message: failure.message)),
      (userEntity) => emit(SigninSuccess(userEntity: userEntity)),
    );
  }

  Future<void> signinWithGoogle() async {
    emit(SigninLoading());
    var result = await authRepo.signinWithGoogle();
    result.fold(
      (failure) => emit(SigninFailure(message: failure.message)),
      (userEntity) => emit(SigninSuccess(userEntity: userEntity)),
    );
  }

  Future<void> signinWithFacebook() async {
    emit(SigninLoading());
    var result = await authRepo.signinWithFacebook();
    result.fold(
      (failure) => emit(SigninFailure(message: failure.message)),
      (userEntity) => emit(SigninSuccess(userEntity: userEntity)),
    );
  }
}



part of 'signin_cubit.dart';

@immutable
sealed class SigninState {}

final class SigninInitial extends SigninState {}

final class SigninLoading extends SigninState {}

final class SigninSuccess extends SigninState {
  final UserEntity userEntity;
  SigninSuccess({required this.userEntity});
}

final class SigninFailure extends SigninState {
  final String message;
  SigninFailure({required this.message});
}



import 'package:bloc/bloc.dart';
import 'package:fruit_hub/features/auth/domain/repos/auth_repo.dart';
import 'package:meta/meta.dart';
import 'package:fruit_hub/features/auth/domain/entites/user_entity.dart';
part 'signup_state.dart';

class SignupCubit extends Cubit<SignupState> {
  SignupCubit(this.authRepo) : super(SignupInitial());

  final AuthRepo authRepo;

  Future<void> createUserWithEmailAndPassword(
    String email,
    String password,
    String name,
  ) async {
    emit(SignupLoading());
    final result = await authRepo.createUserWithEmailAndPassword(
      email,
      password,
      name,
    );
    result.fold(
      (failure) => emit(SignupFailure(message: failure.message)),
      (userEntity) => emit(SignupSuccess(userEntity: userEntity)),
    );
  }
}



part of 'signup_cubit.dart';

@immutable
sealed class SignupState {}

final class SignupInitial extends SignupState {}

final class SignupLoading extends SignupState {}

final class SignupSuccess extends SignupState {
  final UserEntity userEntity;

  SignupSuccess({required this.userEntity});
}

final class SignupFailure extends SignupState {
  final String message;
  SignupFailure({required this.message});
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/core/services/git_it_services.dart';
import 'package:fruit_hub/core/utils/widgets/custom_app_bar.dart';
import 'package:fruit_hub/features/auth/domain/repos/auth_repo.dart';
import 'package:fruit_hub/features/auth/presentation/cubits/signin_cubit/cubit/signin_cubit.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/singin_view_body_bloc_consumer.dart';

class SigninView extends StatelessWidget {
  const SigninView({super.key});
  static const routeName = 'SigninView';
  @override
  Widget build(BuildContext context) {
    return BlocProvider(
      create: (context) => SigninCubit(getIt.get<AuthRepo>()),
      child: Scaffold(
        appBar: buildAppBar(context, title: 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„'),
        body: SinginViewBodyBlocConsumer(),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/services/git_it_services.dart';
import 'package:fruit_hub/core/utils/widgets/custom_app_bar.dart';
import 'package:fruit_hub/features/auth/domain/repos/auth_repo.dart';
import 'package:fruit_hub/features/auth/presentation/cubits/singup_cubit/cubit/signup_cubit.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/signup_view_body_bloc_consumer.dart';

class SignUpView extends StatelessWidget {
  const SignUpView({super.key});

  static const routeName = 'signup';

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: buildAppBar(context, title: 'Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯'),
      body: BlocProvider(
        create: (context) => SignupCubit(getIt<AuthRepo>()),
        child: SignupViewbodyBlocConsumer(),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/assets.dart';

class CustomCheckBox extends StatelessWidget {
  const CustomCheckBox({
    super.key,
    required this.isChecked,
    required this.onChecked,
  });
  final bool isChecked;
  final ValueChanged<bool> onChecked;
  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      onTap: () {
        onChecked(!isChecked);
      },
      child: AnimatedContainer(
        width: 24,
        height: 24,
        duration: const Duration(milliseconds: 100),
        decoration: ShapeDecoration(
          color: isChecked ? AppColors.primaryColor : Colors.white,
          shape: RoundedRectangleBorder(
            side: BorderSide(
              width: 1.50,
              color: isChecked ? Colors.transparent : const Color(0xFFDCDEDE),
            ),
            borderRadius: BorderRadius.circular(8),
          ),
        ),
        child:
            isChecked
                ? Padding(
                  padding: const EdgeInsets.all(2),
                  child: SvgPicture.asset(Assets.assetsImagesCheckbox),
                )
                : const SizedBox(),
      ),
    );
  }
}



import 'package:flutter/gestures.dart';
import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class IsHaveAnAccountWidget extends StatelessWidget {
  const IsHaveAnAccountWidget({
    super.key,
    required this.text1,
    required this.text2,
    required this.onTap,
  });

  final String text1;
  final String text2;
  final VoidCallback onTap;

  @override
  Widget build(BuildContext context) {
    return Text.rich(
      TextSpan(
        children: [
          TextSpan(
            text: text1,
            style: TextStyles.semiBold16.copyWith(
              color: const Color(0xFF949D9E),
            ),
          ),
          const TextSpan(text: ' '),
          TextSpan(
            recognizer: TapGestureRecognizer()..onTap = onTap,
            text: text2,
            style: TextStyles.semiBold16.copyWith(
              color: AppColors.primaryColor,
            ),
          ),
        ],
      ),
      textAlign: TextAlign.center,
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class OrDivider extends StatelessWidget {
  const OrDivider({super.key});

  @override
  Widget build(BuildContext context) {
    return const Row(
      children: [
        Expanded(child: Divider(color: Color(0xFFDCDEDE))),
        SizedBox(width: 18),
        Text('Ø£Ùˆ', textAlign: TextAlign.center, style: TextStyles.semiBold16),
        SizedBox(width: 18),
        Expanded(child: Divider(color: Color(0xFFDCDEDE))),
      ],
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/constants.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/core/utils/assets.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/widgets/custom_button.dart';
import 'package:fruit_hub/core/widgets/custom_password_field.dart';
import 'package:fruit_hub/core/widgets/custom_text_field.dart';
import 'package:fruit_hub/features/auth/presentation/cubits/signin_cubit/cubit/signin_cubit.dart';
import 'package:fruit_hub/features/auth/presentation/views/sign_up_view.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/is_have_account_widget.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/or_divider.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/social_signin_view_button.dart';

class SigninViewBody extends StatefulWidget {
  const SigninViewBody({super.key});

  @override
  State<SigninViewBody> createState() => _SigninViewBodyState();
}

class _SigninViewBodyState extends State<SigninViewBody> {
  AutovalidateMode autovalidateMode = AutovalidateMode.disabled;
  late String email, password;
  final GlobalKey<FormState> formKey = GlobalKey<FormState>();
  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.symmetric(horizontal: kHorizintalPadding),
      child: SingleChildScrollView(
        child: Form(
          key: formKey,
          autovalidateMode: autovalidateMode,
          child: Column(
            children: [
              SizedBox(height: 24),
              CustomTextFormField(
                onSaved: (value) {
                  email = value!;
                },
                hintText: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
                textInputType: TextInputType.emailAddress,
              ),
              const SizedBox(height: 16),
              CustomPasswordField(
                onSaved: (value) {
                  password = value!;
                },
              ),
              const SizedBox(height: 16),
              Row(
                mainAxisAlignment: MainAxisAlignment.end,
                children: [
                  Text(
                    'Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ',
                    style: TextStyles.semiBold13.copyWith(
                      color: AppColors.lightPrimaryColor,
                    ),
                  ),
                ],
              ),
              const SizedBox(height: 33),
              CustomButton(
                onPressed: () {
                  if (formKey.currentState!.validate()) {
                    formKey.currentState!.save();
                    context.read<SigninCubit>().signin(email, password);
                  } else {
                    autovalidateMode = AutovalidateMode.always;
                    setState(() {});
                  }
                },
                text: 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„',
              ),
              const SizedBox(height: 33),
              IsHaveAnAccountWidget(
                text1: 'Ù„Ø§ ØªÙ…ØªÙ„Ùƒ Ø­Ø³Ø§Ø¨ØŸ',
                text2: 'Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨',
                onTap: () {
                  Navigator.pushNamed(context, SignUpView.routeName);
                },
              ),
              const SizedBox(height: 33),
              const OrDivider(),
              const SizedBox(height: 16),
              SocialSigninViewButton(
                onPressed: () {
                  context.read<SigninCubit>().signinWithGoogle();
                },
                image: Assets.assetsImagesGoogleIcon,
                title: 'ØªØ³Ø¬ÙŠÙ„ Ø¨ÙˆØ§Ø³Ø·Ø© Ø¬ÙˆØ¬Ù„',
              ),
              const SizedBox(height: 16),
              SocialSigninViewButton(
                onPressed: () {
                  context.read<SigninCubit>().signinWithFacebook();
                },
                image: Assets.assetsImagesFacebookIcon,
                title: 'ØªØ³Ø¬ÙŠÙ„ Ø¨ÙˆØ§Ø³Ø·Ø© ÙÙŠØ³Ø¨ÙˆÙƒ',
              ),
            ],
          ),
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/core/helper_fun/build_snack_bar.dart';
import 'package:fruit_hub/core/widgets/custom_progress_hud.dart';
import 'package:fruit_hub/features/auth/presentation/cubits/singup_cubit/cubit/signup_cubit.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/sign_up_view_body.dart';

class SignupViewbodyBlocConsumer extends StatelessWidget {
  const SignupViewbodyBlocConsumer({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocConsumer<SignupCubit, SignupState>(
      listener: (context, state) {
        if (state is SignupSuccess) {
          Navigator.pop(context);
        }
        if (state is SignupFailure) {
          buildSnackBar(context, state.message);
        }
      },
      builder: (context, state) {
        return CustomProgressHud(
          isLoading: state is SignupLoading ? true : false,
          child: const SignUpViewBody(),
        );
      },
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/constants.dart';
import 'package:fruit_hub/core/helper_fun/build_snack_bar.dart';
import 'package:fruit_hub/core/widgets/custom_button.dart';
import 'package:fruit_hub/core/widgets/custom_password_field.dart';
import 'package:fruit_hub/core/widgets/custom_text_field.dart';
import 'package:fruit_hub/features/auth/presentation/cubits/singup_cubit/cubit/signup_cubit.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/is_have_account_widget.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/terms_and_conditions.dart';

class SignUpViewBody extends StatefulWidget {
  const SignUpViewBody({super.key});

  @override
  State<SignUpViewBody> createState() => _SignUpViewBodyState();
}

class _SignUpViewBodyState extends State<SignUpViewBody> {
  final GlobalKey<FormState> formkey = GlobalKey<FormState>();
  AutovalidateMode autoValidateMode = AutovalidateMode.disabled;
  late String email, userName, password;
  late bool isTermsAccepted = false;
  @override
  Widget build(BuildContext context) {
    return SingleChildScrollView(
      child: Padding(
        padding: const EdgeInsets.symmetric(horizontal: kHorizintalPadding),
        child: Form(
          key: formkey,
          autovalidateMode: autoValidateMode,
          child: Column(
            children: [
              SizedBox(height: 24),
              CustomTextFormField(
                onSaved: (value) {
                  userName = value!;
                },
                hintText: 'Ø§Ù„Ø§Ø³Ù… ÙƒØ§Ù…Ù„',
                textInputType: TextInputType.name,
              ),
              const SizedBox(height: 16),
              CustomTextFormField(
                onSaved: (value) {
                  email = value!;
                },

                hintText: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
                textInputType: TextInputType.emailAddress,
              ),
              const SizedBox(height: 16),
              CustomPasswordField(
                onSaved: (value) {
                  password = value!;
                },
              ),
              const SizedBox(height: 16),
              TermsAndConditionsWidget(
                onChecked: (value) {
                  isTermsAccepted = value;
                },
              ),
              const SizedBox(height: 30),
              CustomButton(
                onPressed: () {
                  if (formkey.currentState!.validate()) {
                    formkey.currentState!.save();
                    if (isTermsAccepted)
                      context
                          .read<SignupCubit>()
                          .createUserWithEmailAndPassword(
                            email,
                            password,
                            userName,
                          );
                    else {
                      buildSnackBar(
                        context,
                        "ÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø§Ø­ÙƒØ§Ù…",
                      );
                    }
                  } else {
                    setState(() {
                      autoValidateMode = AutovalidateMode.always;
                    });
                  }
                },
                text: "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨",
              ),
              const SizedBox(height: 26),
              IsHaveAnAccountWidget(
                text1: "ØªÙ…ØªÙ„Ùƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ",
                text2: "ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„",
                onTap: () {
                  Navigator.pop(context);
                },
              ),
            ],
          ),
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/core/helper_fun/build_snack_bar.dart';
import 'package:fruit_hub/core/widgets/custom_progress_hud.dart';
import 'package:fruit_hub/features/auth/presentation/cubits/signin_cubit/cubit/signin_cubit.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/signin_view_body.dart';
import 'package:fruit_hub/features/home/presentation/views/main_view.dart';

class SinginViewBodyBlocConsumer extends StatelessWidget {
  const SinginViewBodyBlocConsumer({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocConsumer<SigninCubit, SigninState>(
      listener: (context, state) {
        if (state is SigninSuccess) {
          Navigator.popAndPushNamed(context, MainView.routeName);
        }
        if (state is SigninFailure) {
          buildSnackBar(context, state.message);
        }
      },
      builder: (context, state) {
        return CustomProgressHud(
          isLoading: state is SigninLoading ? true : false,
          child: const SigninViewBody(),
        );
      },
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class SocialSigninViewButton extends StatelessWidget {
  const SocialSigninViewButton({
    super.key,
    required this.image,
    required this.title,
    required this.onPressed,
  });

  final String image;
  final String title;
  final VoidCallback onPressed;
  @override
  Widget build(BuildContext context) {
    return SizedBox(
      width: double.infinity,
      height: 56,
      child: TextButton(
        style: TextButton.styleFrom(
          shape: RoundedRectangleBorder(
            side: const BorderSide(color: Color(0xFFDCDEDE), width: 1),
            borderRadius: BorderRadius.circular(16),
          ),
        ),
        onPressed: onPressed,
        child: ListTile(
          visualDensity: const VisualDensity(
            vertical: VisualDensity.minimumDensity,
          ),
          leading: SvgPicture.asset(image),
          title: Text(
            title,
            textAlign: TextAlign.center,
            style: TextStyles.semiBold16,
          ),
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/custom_check_box.dart';

class TermsAndConditionsWidget extends StatefulWidget {
  const TermsAndConditionsWidget({super.key, required this.onChecked});
  final ValueChanged<bool> onChecked;
  @override
  State<TermsAndConditionsWidget> createState() =>
      _TermsAndConditionsWidgetState();
}

class _TermsAndConditionsWidgetState extends State<TermsAndConditionsWidget> {
  bool isTermsAccepted = false;
  @override
  Widget build(BuildContext context) {
    return Row(
      children: [
        CustomCheckBox(
          onChecked: (value) {
            isTermsAccepted = value;
            widget.onChecked(value);
            setState(() {});
          },
          isChecked: isTermsAccepted,
        ),
        const SizedBox(width: 16),
        Expanded(
          child: Text.rich(
            TextSpan(
              children: [
                TextSpan(
                  text: 'Ù…Ù† Ø®Ù„Ø§Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ ØŒ ÙØ¥Ù†Ùƒ ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ ',
                  style: TextStyles.semiBold13.copyWith(
                    color: const Color(0xFF949D9E),
                  ),
                ),
                TextSpan(
                  text: 'Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…',
                  style: TextStyles.semiBold13.copyWith(
                    color: AppColors.lightPrimaryColor,
                  ),
                ),
                const TextSpan(text: ' ', style: TextStyles.semiBold13),
                TextSpan(
                  text: 'Ø§Ù„Ø®Ø§ØµØ©',
                  style: TextStyles.semiBold13.copyWith(
                    color: AppColors.lightPrimaryColor,
                  ),
                ),
                const TextSpan(text: ' ', style: TextStyles.semiBold13),
                TextSpan(
                  text: 'Ø¨Ù†Ø§',
                  style: TextStyles.semiBold13.copyWith(
                    color: AppColors.lightPrimaryColor,
                  ),
                ),
              ],
            ),
            textAlign: TextAlign.right,
          ),
        ),
      ],
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/widgets/custom_app_bar.dart';
import 'package:fruit_hub/features/best_selling/presentation/view/widgets/best_selling_view_body.dart';

class BestSellingView extends StatelessWidget {
  const BestSellingView({super.key});
  static const routeName = 'BestSellingView';
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: buildAppBar(context, title: 'Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ù‹Ø§'),
      body: const BestSellingViewBody(),
    );
  }
}



import 'package:flutter/material.dart';

class BestSellingViewBody extends StatelessWidget {
  const BestSellingViewBody({super.key});

  @override
  Widget build(BuildContext context) {
    return const Placeholder();
  }
}



import 'package:fruit_hub/core/utils/assets.dart';

class BottomNavigationBarEntity {
  final String activeImage, inActiveImage;
  final String name;

  BottomNavigationBarEntity({
    required this.activeImage,
    required this.inActiveImage,
    required this.name,
  });
}

List<BottomNavigationBarEntity> get bottomNavigationBarItems => [
  BottomNavigationBarEntity(
    activeImage: Assets.assetsImagesHomeActive,
    inActiveImage: Assets.assetsImagesHome,
    name: 'Ø§Ù„Ø±ÙŠÙ”ÙŠØ³ÙŠØ©',
  ),
  BottomNavigationBarEntity(
    activeImage: Assets.assetsImagesProductActive,
    inActiveImage: Assets.assetsImagesProducts,
    name: 'Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª',
  ),
  BottomNavigationBarEntity(
    activeImage: Assets.assetsImagesShoppingCartActive,
    inActiveImage: Assets.assetsImagesShoppingCart,
    name: 'Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚',
  ),
  BottomNavigationBarEntity(
    activeImage: Assets.assetsImagesUserActive,
    inActiveImage: Assets.assetsImagesUser,
    name: 'Ø­Ø³Ø§Ø¨ÙŠ',
  ),
];



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/cart_view_body.dart';

class CartView extends StatelessWidget {
  const CartView({super.key});

  @override
  Widget build(BuildContext context) {
    return CartViewBody();
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/home/presentation/views/cart_view.dart';
import 'package:fruit_hub/features/home/presentation/views/products_view.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/custom_bottom_navigation_bar.dart';
import 'widgets/home_view.dart';

class MainView extends StatefulWidget {
  const MainView({super.key});

  static const routeName = 'home_view';

  @override
  State<MainView> createState() => _MainViewState();
}

class _MainViewState extends State<MainView> {
  int currentViewIndex = 0;
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      bottomNavigationBar: CustomBottomNavigationBar(
        onItemTapped: (index) {
          currentViewIndex = index;

          setState(() {});
        },
      ),
      body: SafeArea(
        child: IndexedStack(
          index: currentViewIndex,
          children: const [HomeView(), ProductsView(), CartView()],
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/core/products_cubit/cubit/products_cubit.dart';
import 'package:fruit_hub/core/repos/products_repo/products_repo.dart';
import 'package:fruit_hub/core/services/git_it_services.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/products_view_body.dart';

class ProductsView extends StatelessWidget {
  const ProductsView({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocProvider(
      create: (context) => ProductsCubit(getIt.get<ProductsRepo>()),
      child: const ProductsViewBody(),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class ActiveItem extends StatelessWidget {
  const ActiveItem({super.key, required this.text, required this.image});

  final String text;
  final String image;
  @override
  Widget build(BuildContext context) {
    return Center(
      child: Container(
        padding: const EdgeInsets.only(left: 16),
        decoration: ShapeDecoration(
          color: const Color(0xFFEEEEEE),
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(30),
          ),
        ),
        child: Row(
          mainAxisSize: MainAxisSize.min,
          children: [
            Container(
              width: 30,
              height: 30,
              decoration: ShapeDecoration(
                color: const Color(0xFF1B5E37),
                shape: RoundedRectangleBorder(
                  borderRadius: BorderRadius.circular(30),
                ),
              ),
              child: Center(child: SvgPicture.asset(image)),
            ),
            const SizedBox(width: 4),
            Text(
              text,
              style: TextStyles.semiBold11.copyWith(
                color: AppColors.primaryColor,
              ),
            ),
          ],
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/features/best_selling/presentation/view/best_selling_view.dart';

class BestSellingHeader extends StatelessWidget {
  const BestSellingHeader({super.key});

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.symmetric(horizontal: 12.0),
      child: Row(
        mainAxisAlignment: MainAxisAlignment.spaceBetween,
        children: [
          Text(
            'Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ù‹Ø§',
            style: TextStyles.bold16.copyWith(color: const Color(0xFF0C0D0D)),
          ),
          GestureDetector(
            onTap: () {
              Navigator.of(context).popAndPushNamed(BestSellingView.routeName);
            },
            child: Text(
              'Ø§Ù„Ù…Ø²ÙŠØ¯',
              style: TextStyles.regular13.copyWith(
                color: const Color(0xFF949D9E),
              ),
            ),
          ),
        ],
      ),
    );
  }
}



import 'package:flutter/material.dart';

class CartHeader extends StatelessWidget {
  const CartHeader({super.key});

  @override
  Widget build(BuildContext context) {
    return Container(
      width: double.infinity,
      padding: const EdgeInsets.symmetric(vertical: 20),
      decoration: const BoxDecoration(color: Color(0xFFEBF9F1)),
      child: const Center(
        child: Text(
          'Ù„Ø¯ÙŠÙƒ 3 Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø³Ù„Ù‡ Ø§Ù„ØªØ³ÙˆÙ‚',
          style: TextStyle(
            color: Color(0xFF1B5E37),
            fontSize: 13,
            fontFamily: 'Cairo',
            fontWeight: FontWeight.w400,
            height: 0.12,
          ),
        ),
      ),
    );
  }
}



ChatGPT said:
تمام، الكود اللي أرسلته عبارة عن مشروع Flutter كامل تقريبًا لإدارة تسجيل الدخول، التسجيل، واجهة المنتجات، والسلة، وكل الكومبوننتس الخاصة بيهم. فيه استخدام لـ:

Bloc/Cubit لإدارة الحالة (SigninCubit و SignupCubit).

FirebaseAuth و Firestore لتخزين بيانات المستخدم.

Widgets مخصصة زي CustomTextFormField، CustomPasswordField، CustomProgressHud، CustomCheckBox، إلخ.

واجهات مستخدم كاملة زي SigninView، SignUpView، BestSellingView، CartView.

لو انت عايز، ممكن أعمللك:

مراجعة عامة للكود وأقوللك لو فيه تحسينات أو أخطاء محتملة.

تحويل بعض الواجهات زي الـ Splash أو الـ AppBar أو الـ Custom Widgets لو عايزهم يكونوا أكثر كفاءة.

تبسيط الـ Bloc/Cubit أو تعديل طريقة حفظ واسترجاع البيانات من Firebase/SharedPreferences.

سؤالي ليك قبل ما أبدأ: هل هدفك يكون مراجعة الكود وتحسينه، ولا إصلاح مشكلة معينة ظهرتلك عند التشغيل؟


You said:


import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/entities/product_entity.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/assets.dart';
import 'package:fruit_hub/core/utils/widgets/custom_network_image.dart';
import 'package:fruit_hub/features/auth/domain/entites/cart_entity.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/cart_item_action_buttons.dart';
import '../../../../../core/entities/product_entity.dart';
import '../../../../../core/utils/app_text_styles.dart';

class CartItem extends StatelessWidget {
  const CartItem({super.key, required this.cartEntity});
  final CartEntity cartEntity;
  @override
  Widget build(BuildContext context) {
    return IntrinsicHeight(
      child: Row(
        children: [
          Container(
            width: 73,
            height: 92,
            decoration: const BoxDecoration(color: Color(0xFFF3F5F7)),
            child: CustomNetworkImage(
              imageUrl: CartEntity.ProductEntity.imageUrl!,
            ),
          ),
          const SizedBox(width: 17),
          Expanded(
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                Row(
                  children: [
                    const Text('Ø¨Ø·ÙŠØ®', style: TextStyles.bold13),
                    const Spacer(),
                    GestureDetector(
                      onTap: () {},
                      child: SvgPicture.asset(Assets.assetsImagesTrashimage),
                    ),
                  ],
                ),
                Text(
                  '3 ÙƒÙ…',
                  textAlign: TextAlign.right,
                  style: TextStyles.regular13.copyWith(
                    color: AppColors.secondaryColor,
                  ),
                ),
                Row(
                  children: [
                    const CartItemActionButtons(),
                    const Spacer(),
                    Text(
                      '60 Ø¬Ù†ÙŠÙ‡ ',
                      style: TextStyles.bold16.copyWith(
                        color: AppColors.secondaryColor,
                      ),
                    ),
                  ],
                ),
              ],
            ),
          ),
        ],
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class CartItemActionButtons extends StatelessWidget {
  const CartItemActionButtons({super.key});

  @override
  Widget build(BuildContext context) {
    return Row(
      children: [
        CartItemActionButton(
          iconColor: Colors.white,
          icon: Icons.add,
          color: AppColors.primaryColor,
          onPressed: () {},
        ),
        const Padding(
          padding: EdgeInsets.symmetric(horizontal: 16),
          child: Text(
            '3',
            textAlign: TextAlign.center,
            style: TextStyles.bold16,
          ),
        ),
        CartItemActionButton(
          iconColor: Colors.grey,
          icon: Icons.remove,
          color: const Color(0xFFF3F5F7),
          onPressed: () {},
        ),
      ],
    );
  }
}

class CartItemActionButton extends StatelessWidget {
  const CartItemActionButton({
    super.key,
    required this.icon,
    required this.color,
    required this.onPressed,
    required this.iconColor,
  });

  final IconData icon;
  final Color iconColor;
  final Color color;
  final VoidCallback onPressed;
  @override
  Widget build(BuildContext context) {
    return Container(
      width: 24,
      height: 24,
      padding: const EdgeInsets.all(2),
      decoration: ShapeDecoration(
        color: color,
        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(100)),
      ),
      child: FittedBox(child: Icon(icon, color: iconColor)),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/auth/domain/entites/cart_entity.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/cart_item.dart';

class CartItemList extends StatelessWidget {
  const CartItemList({super.key, required this.cartItems});
  final List<CartEntity> cartItems;
  @override
  Widget build(BuildContext context) {
    return SliverList.separated(
      separatorBuilder: (context, index) => const CustomDivider(),
      itemCount: cartItems.length,
      itemBuilder: (context, index) {
        return CartItem(cartEntity: cartItems[index]);
      },
    );
  }
}

class CustomDivider extends StatelessWidget {
  const CustomDivider({super.key});

  @override
  Widget build(BuildContext context) {
    return const Divider(color: Color(0xFFF1F1F5), height: 22);
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/widgets/custom_button.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/cart_header.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/cart_item_list.dart';

import '../../../../../constants.dart';
import '../../../../../core/widgets/custom_app_bar.dart';

class CartViewBody extends StatelessWidget {
  const CartViewBody({super.key});

  @override
  Widget build(BuildContext context) {
    return Stack(
      children: [
        CustomScrollView(
          slivers: [
            SliverToBoxAdapter(
              child: Column(
                children: [
                  const SizedBox(height: kTopPaddding),
                  buildAppBar(context, title: 'Ø§Ù„Ø³Ù„Ø©', showNotification: false),
                  const SizedBox(height: 16),
                  const CartHeader(),
                  const SizedBox(height: 12),
                ],
              ),
            ),
            const SliverToBoxAdapter(child: CustomDivider()),
            const CartItemList(),
            const SliverToBoxAdapter(child: CustomDivider()),
          ],
        ),
        Positioned(
          left: 16,
          right: 16,
          bottom: MediaQuery.sizeOf(context).height * .07,
          child: CustomButton(onPressed: () {}, text: 'Ø§Ù„Ø¯ÙØ¹  120Ø¬Ù†ÙŠÙ‡'),
        ),
      ],
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/home/domain/entites/bottom_navigation_bar_entity.dart';
import 'naivation_bar_item.dart';

class CustomBottomNavigationBar extends StatefulWidget {
  const CustomBottomNavigationBar({super.key, required this.onItemTapped});
  final ValueChanged<int> onItemTapped;
  @override
  State<CustomBottomNavigationBar> createState() =>
      _CustomBottomNavigationBarState();
}

class _CustomBottomNavigationBarState extends State<CustomBottomNavigationBar> {
  int selectedIndex = 0;
  @override
  Widget build(BuildContext context) {
    return Container(
      width: 375,
      height: 70,
      decoration: const ShapeDecoration(
        color: Colors.white,
        shape: RoundedRectangleBorder(
          borderRadius: BorderRadius.only(
            topLeft: Radius.circular(30),
            topRight: Radius.circular(30),
          ),
        ),
        shadows: [
          BoxShadow(
            color: Color(0x19000000),
            blurRadius: 25,
            offset: Offset(0, -2),
            spreadRadius: 0,
          ),
        ],
      ),
      child: Row(
        children:
            bottomNavigationBarItems.asMap().entries.map((e) {
              var index = e.key;
              var entity = e.value;

              return Expanded(
                flex: index == selectedIndex ? 3 : 2,
                child: GestureDetector(
                  onTap: () {
                    setState(() {
                      selectedIndex = index;
                      widget.onItemTapped(index);
                    });
                  },
                  child: NaivgationBarItem(
                    isSelected: selectedIndex == index,
                    bottomNavigationBarEntity: entity,
                  ),
                ),
              );
            }).toList(),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/helper_fun/get_user.dart';
import 'package:fruit_hub/core/notification_widget.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/core/utils/assets.dart';

class CustomHomeAppbar extends StatelessWidget {
  const CustomHomeAppbar({super.key});

  @override
  Widget build(BuildContext context) {
    return ListTile(
      trailing: NotificationWidget(),
      leading: Image.asset(Assets.assetsImagesProfileImage),
      title: Text(
        'ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ± !..',
        textAlign: TextAlign.right,
        style: TextStyles.regular16.copyWith(color: const Color(0xFF949D9E)),
      ),
      subtitle: Text(
        getUser().name,
        textAlign: TextAlign.right,
        style: TextStyles.bold16,
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/core/utils/assets.dart';
import 'package:flutter_svg_provider/flutter_svg_provider.dart' as svg;
import 'package:fruit_hub/features/home/presentation/views/widgets/featured_item_button.dart';

class FeaturedItem extends StatelessWidget {
  const FeaturedItem({super.key});

  @override
  Widget build(BuildContext context) {
    var itemWidth = MediaQuery.sizeOf(context).width - 32;
    return ClipRRect(
      borderRadius: BorderRadius.circular(4),
      child: SizedBox(
        width: itemWidth,
        child: AspectRatio(
          aspectRatio: 342 / 158,
          child: Stack(
            children: [
              Positioned(
                left: 0,
                top: 0,
                bottom: 0,
                right: itemWidth * .4,
                child: SvgPicture.asset(
                  Assets.assetsImagesOnBoardingPage2ViewItem,
                  fit: BoxFit.fill,
                ),
              ),
              Container(
                width: itemWidth * .5,
                decoration: const BoxDecoration(
                  image: DecorationImage(
                    image: svg.Svg(
                      Assets.assetsImagesImagesFeaturedItemBackground,
                    ),
                    fit: BoxFit.fill,
                  ),
                ),
                child: Padding(
                  padding: const EdgeInsets.only(right: 33),
                  child: Column(
                    crossAxisAlignment: CrossAxisAlignment.start,
                    children: [
                      const SizedBox(height: 25),
                      Text(
                        'Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹ÙŠØ¯',
                        style: TextStyles.regular13.copyWith(
                          color: Colors.white,
                        ),
                      ),
                      const Spacer(),
                      Text(
                        'Ø®ØµÙ… 25%',
                        style: TextStyles.bold19.copyWith(color: Colors.white),
                      ),
                      const SizedBox(height: 11),
                      FeaturedItemButton(onPressed: () {}),
                      const SizedBox(height: 29),
                    ],
                  ),
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class FeaturedItemButton extends StatelessWidget {
  const FeaturedItemButton({super.key, required this.onPressed});
  final VoidCallback onPressed;
  @override
  Widget build(BuildContext context) {
    return SizedBox(
      height: 32,
      child: TextButton(
        style: TextButton.styleFrom(
          shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(4)),
          backgroundColor: Colors.white,
        ),
        onPressed: onPressed,
        child: Padding(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: FittedBox(
            child: Text(
              'ØªØ³ÙˆÙ‚ Ø§Ù„Ø§Ù†',
              style: TextStyles.bold13.copyWith(color: AppColors.primaryColor),
            ),
          ),
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/featured_item.dart';

class FeaturedList extends StatelessWidget {
  const FeaturedList({super.key});

  @override
  Widget build(BuildContext context) {
    return SingleChildScrollView(
      scrollDirection: Axis.horizontal,
      child: Row(
        children: List.generate(4, (index) {
          return Padding(
            padding: const EdgeInsets.symmetric(horizontal: 8.0),
            child: const FeaturedItem(),
          );
        }),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/core/products_cubit/cubit/products_cubit.dart';
import 'package:fruit_hub/core/repos/products_repo/products_repo.dart';
import 'package:fruit_hub/core/services/git_it_services.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/home_view_body.dart';

class HomeView extends StatelessWidget {
  const HomeView({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocProvider(
      create: (context) => ProductsCubit(getIt.get<ProductsRepo>()),
      child: HomeViewBody(),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/constants.dart';
import 'package:fruit_hub/core/products_cubit/cubit/products_cubit.dart';
import 'package:fruit_hub/core/widgets/search_text_field.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/products_grid_view.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/products_grid_view_bloc_builder.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/best_selling_header.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/custom_home_appbar.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/featured_list.dart';

class HomeViewBody extends StatefulWidget {
  const HomeViewBody({super.key});

  @override
  State<HomeViewBody> createState() => _HomeViewBodyState();
}

class _HomeViewBodyState extends State<HomeViewBody> {
  @override
  void initState() {
    context.read<ProductsCubit>().getBestSellingProducts();
    super.initState();
  }

  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.symmetric(horizontal: 16.0),
      child: CustomScrollView(
        slivers: [
          SliverToBoxAdapter(
            child: Column(
              children: [
                SizedBox(height: kTopPaddding),
                CustomHomeAppbar(),
                SizedBox(height: 16),
                SearchTextField(),
                SizedBox(height: 12),
                FeaturedList(),
                SizedBox(height: 12),
                BestSellingHeader(),
                SizedBox(height: 8),
              ],
            ),
          ),
          ProductsGridViewBlocBuilder(),
        ],
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class InActiveItem extends StatelessWidget {
  const InActiveItem({super.key, required this.image});

  final String image;
  @override
  Widget build(BuildContext context) {
    return Container(color: Colors.transparent, child: SvgPicture.asset(image));
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/in_active_item.dart';

import '../../../domain/entites/bottom_navigation_bar_entity.dart';
import 'active_item.dart';

class NaivgationBarItem extends StatelessWidget {
  const NaivgationBarItem({
    super.key,
    required this.isSelected,
    required this.bottomNavigationBarEntity,
  });

  final bool isSelected;
  final BottomNavigationBarEntity bottomNavigationBarEntity;
  @override
  Widget build(BuildContext context) {
    return isSelected
        ? ActiveItem(
          image: bottomNavigationBarEntity.activeImage,
          text: bottomNavigationBarEntity.name,
        )
        : InActiveItem(image: bottomNavigationBarEntity.inActiveImage);
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/entities/product_entity.dart';
import 'package:fruit_hub/core/widgets/fruit_item.dart';

class ProductsGridView extends StatelessWidget {
  const ProductsGridView({super.key, required this.products});

  final List<ProductEntity> products;
  @override
  Widget build(BuildContext context) {
    return SliverGrid.builder(
      itemCount: products.length,
      gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
        crossAxisCount: 2,
        childAspectRatio: 163 / 214,
        mainAxisSpacing: 8,
        crossAxisSpacing: 16,
      ),
      itemBuilder: (context, index) {
        return FruitItem(productEntity: products[index]);
      },
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/core/helper_fun/get_dummy_product.dart';
import 'package:fruit_hub/core/products_cubit/cubit/products_cubit.dart';
import 'package:fruit_hub/core/widgets/custom_error_widget.dart';
import 'package:skeletonizer/skeletonizer.dart';
import 'products_grid_view.dart';

class ProductsGridViewBlocBuilder extends StatelessWidget {
  const ProductsGridViewBlocBuilder({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocBuilder<ProductsCubit, ProductsState>(
      builder: (context, state) {
        if (state is ProductsSuccess) {
          return ProductsGridView(products: state.products);
        } else if (state is ProductsFailure) {
          return SliverToBoxAdapter(
            child: CustomErrorWidget(text: state.errMessage),
          );
        } else {
          return Skeletonizer.sliver(
            enabled: true,
            child: ProductsGridView(products: getDummyProducts()),
          );
        }
      },
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/core/products_cubit/cubit/products_cubit.dart';
import 'package:fruit_hub/core/widgets/custom_app_bar.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/products_view_header.dart';
import '../../../../../constants.dart';
import '../../../../../core/widgets/search_text_field.dart';
import 'products_grid_view_bloc_builder.dart';

class ProductsViewBody extends StatefulWidget {
  const ProductsViewBody({super.key});

  @override
  State<ProductsViewBody> createState() => _ProductsViewBodyState();
}

class _ProductsViewBodyState extends State<ProductsViewBody> {
  @override
  void initState() {
    super.initState();
    context.read<ProductsCubit>().getProducts();
  }

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.symmetric(horizontal: 16),
      child: CustomScrollView(
        slivers: [
          SliverToBoxAdapter(
            child: Column(
              children: [
                const SizedBox(height: kTopPaddding),
                buildAppBar(context, title: "Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª", showBackButton: false),
                const SizedBox(height: 16),
                const SearchTextField(),
                const SizedBox(height: 12),
                ProductsViewHeader(
                  productsLength: context.read<ProductsCubit>().productsLength,
                ),
                const SizedBox(height: 8),
              ],
            ),
          ),
          const ProductsGridViewBlocBuilder(),
        ],
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/core/utils/assets.dart';

class ProductsViewHeader extends StatelessWidget {
  const ProductsViewHeader({super.key, required this.productsLength});
  final int productsLength;
  @override
  Widget build(BuildContext context) {
    return Row(
      children: [
        Text(
          '$productsLength Ù†ØªØ§Ø¦Ø¬',
          textAlign: TextAlign.right,
          style: TextStyles.bold16,
        ),
        const Spacer(),
        Container(
          padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),
          decoration: ShapeDecoration(
            color: Colors.white.withOpacity(0.10000000149011612),
            shape: RoundedRectangleBorder(
              side: const BorderSide(width: 1, color: Color(0x66CACECE)),
              borderRadius: BorderRadius.circular(4),
            ),
          ),
          child: SvgPicture.asset(Assets.assetsImagesFiltter2),
        ),
      ],
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/on_boarding/presentation/views/widgets/on_boarding_view_body.dart';

class OnBoardingView extends StatelessWidget {
  const OnBoardingView({super.key});
  static const String routeName = 'onBoardingView';
  @override
  Widget build(BuildContext context) {
    return Scaffold(body: SafeArea(child: const OnBoardingViewBody()));
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/core/utils/assets.dart';
import 'package:fruit_hub/features/on_boarding/presentation/views/widgets/on_boarding_page_view_item.dart';

class OnBoardingPageView extends StatelessWidget {
  const OnBoardingPageView({super.key, required this.pageController});
  final PageController pageController;
  @override
  Widget build(BuildContext context) {
    return Expanded(
      child: PageView(
        controller: pageController,
        children: [
          OnBoardingPageViewItem(
            isVisible: true,
            image: Assets.assetsImagesOnBoardingPage1ViewItem,
            backgroundimage:
                Assets.assetsImagesOnBoardingPage1ViewItemBackground,
            title: Row(
              mainAxisAlignment: MainAxisAlignment.center,
              children: [
                const Text('Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ', style: TextStyles.bold23),
                Text(
                  '  HUB',
                  style: TextStyles.bold23.copyWith(
                    color: AppColors.secondaryColor,
                  ),
                ),
                Text(
                  'Fruit',
                  style: TextStyles.bold23.copyWith(
                    color: AppColors.primaryColor,
                  ),
                ),
              ],
            ),
            subtitle:
                "Ø§ÙƒØªØ´Ù ØªØ¬Ø±Ø¨Ø© ØªØ³ÙˆÙ‚ ÙØ±ÙŠØ¯Ø© Ù…Ø¹ FruitHUB. Ø§Ø³ØªÙƒØ´Ù Ù…Ø¬Ù…ÙˆØ¹ØªÙ†Ø§ Ø§Ù„ÙˆØ§Ø³Ø¹Ø© Ù…Ù† Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ø§Ù„Ø·Ø§Ø²Ø¬Ø© Ø§Ù„Ù…Ù…ØªØ§Ø²Ø© ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ø±ÙˆØ¶ ÙˆØ§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¹Ø§Ù„ÙŠØ©.",
          ),
          OnBoardingPageViewItem(
            isVisible: false,
            image: Assets.assetsImagesOnBoardingPage2ViewItem,
            backgroundimage:
                Assets.assetsImagesOnBoardingPage2ViewItemBackground,
            subtitle:
                'Ù†Ù‚Ø¯Ù… Ù„Ùƒ Ø£ÙØ¶Ù„ Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø¨Ø¹Ù†Ø§ÙŠØ©. Ø§Ø·Ù„Ø¹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ù„ØµÙˆØ± ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù„ØªØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ§ÙƒÙ‡Ø© Ø§Ù„Ù…Ø«Ø§Ù„ÙŠØ©',
            title: Text(
              'Ø§Ø¨Ø­Ø« ÙˆØªØ³ÙˆÙ‚',
              textAlign: TextAlign.center,
              style: TextStyle(
                color: Color(0xFF0C0D0D),
                fontSize: 23,
                fontFamily: 'Cairo',
                fontWeight: FontWeight.w700,
                height: 0,
              ),
            ),
          ),
        ],
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/services/shared_preferences_singleton.dart';
import 'package:fruit_hub/features/auth/presentation/views/signin_view.dart';

class OnBoardingPageViewItem extends StatelessWidget {
  const OnBoardingPageViewItem({
    super.key,
    required this.title,
    required this.subtitle,
    required this.image,
    required this.backgroundimage,
    required this.isVisible,
  });

  final Widget title;
  final String subtitle;
  final String image;
  final String backgroundimage;
  final bool isVisible;

  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        SizedBox(
          height: MediaQuery.of(context).size.height * 0.5,
          width: double.infinity,
          child: Stack(
            children: [
              // Ø§Ù„Ø®Ù„ÙÙŠØ©
              Positioned.fill(
                child: SvgPicture.asset(backgroundimage, fit: BoxFit.fill),
              ),
              // Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ù…Ø­Ø§Ø°Ø§Ø© Bottom)
              Positioned(
                bottom: 0,
                left: 0,
                right: 0,
                child: SvgPicture.asset(image),
              ),
              // Ø²Ø± "ØªØ®Ø·"
              Visibility(
                visible: isVisible,
                child: GestureDetector(
                  onTap: () {
                    Prefs.setBool('KisOnBoardingViewSeen', true);
                    Navigator.of(context).popAndPushNamed(SigninView.routeName);
                  },
                  child: const Padding(
                    padding: EdgeInsets.all(16),
                    child: Text(
                      'ØªØ®Ø·',
                      style: TextStyle(color: Color(0xFF949D9E), fontSize: 13),
                    ),
                  ),
                ),
              ),
            ],
          ),
        ),

        // Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
        title,
        const SizedBox(height: 64),

        // Ø§Ù„Ù€ subtitle Ù…Ø¹ padding Ø£ÙƒØ¨Ø±
        Padding(
          padding: const EdgeInsets.symmetric(horizontal: 37),
          child: Text(
            subtitle,
            textAlign: TextAlign.center,
            style: const TextStyle(
              color: Color(0xFF4E5456),
              fontSize: 13,
              fontWeight: FontWeight.w600,
            ),
          ),
        ),
        const SizedBox(height: 24), // Ù…Ø³Ø§ÙØ© Ø¨Ø¹Ø¯ Ø§Ù„Ù€ subtitle
      ],
    );
  }
}



import 'package:dots_indicator/dots_indicator.dart';
import 'package:flutter/material.dart';
import 'package:fruit_hub/constants.dart';
import 'package:fruit_hub/core/services/shared_preferences_singleton.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/widgets/custom_button.dart';
import 'package:fruit_hub/features/auth/presentation/views/signin_view.dart';
import 'package:fruit_hub/features/on_boarding/presentation/views/widgets/on_boarding_page_view.dart';

class OnBoardingViewBody extends StatefulWidget {
  const OnBoardingViewBody({super.key});

  @override
  State<OnBoardingViewBody> createState() => _OnBoardingViewBodyState();
}

class _OnBoardingViewBodyState extends State<OnBoardingViewBody> {
  late PageController pageController;
  var currentPage = 0;
  @override
  void initState() {
    pageController = PageController();
    pageController.addListener(() {
      currentPage = pageController.page!.round();
      setState(() {});
    });
    super.initState();
  }

  @override
  void dispose() {
    pageController.dispose();
    super.dispose();
  }

  Widget build(BuildContext context) {
    return Column(
      children: [
        Expanded(child: OnBoardingPageView(pageController: pageController)),
        DotsIndicator(
          dotsCount: 2,
          decorator: DotsDecorator(
            activeColor: AppColors.primaryColor,
            color:
                currentPage == 1
                    ? AppColors.primaryColor
                    : AppColors.primaryColor.withOpacity(0.5),
          ),
        ),
        const SizedBox(height: 29),
        Visibility(
          visible: currentPage == 1 ? true : false,
          maintainSize: true,
          maintainAnimation: true,
          maintainState: true,
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: kHorizintalPadding),
            child: CustomButton(
              onPressed: () {
                Prefs.setBool('KisOnBoardingViewSeen', true);
                Navigator.of(
                  context,
                ).pushReplacementNamed(SigninView.routeName);
              },
              text: 'Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ù†',
            ),
          ),
        ),
        const SizedBox(height: 43),
      ],
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/splash/presentation/views/widgets/splash_view_body.dart';

class SplashView extends StatelessWidget {
  const SplashView({super.key});
  static const routeName = "splash";
  @override
  Widget build(BuildContext context) {
    return const Scaffold(body: SplashViewBody());
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/constants.dart';
import 'package:fruit_hub/core/services/firebase_auth_service.dart';
import 'package:fruit_hub/core/services/shared_preferences_singleton.dart';
import 'package:fruit_hub/core/utils/assets.dart';
import 'package:fruit_hub/features/auth/presentation/views/signin_view.dart';
import 'package:fruit_hub/features/home/presentation/views/main_view.dart';
import 'package:fruit_hub/features/on_boarding/presentation/views/on_boarding_view.dart';

class SplashViewBody extends StatefulWidget {
  const SplashViewBody({super.key});

  @override
  State<SplashViewBody> createState() => _SplashViewBodyState();
}

class _SplashViewBodyState extends State<SplashViewBody> {
  @override
  void initState() {
    excuteNaviagtion();
    super.initState();
  }

  @override
  Widget build(BuildContext context) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.stretch,
      mainAxisAlignment: MainAxisAlignment.spaceBetween,
      children: [
        Row(
          mainAxisAlignment: MainAxisAlignment.end,
          children: [SvgPicture.asset(Assets.assetsImagesFreepikPlantInject63)],
        ),
        SvgPicture.asset(Assets.assetsImagesAppLoge),
        SvgPicture.asset(
          Assets.assetsImagesBottomSplashScreen,
          fit: BoxFit.fill,
        ),
      ],
    );
  }

  void excuteNaviagtion() {
    bool isOnBoardingViewSeen = Prefs.getBool(kIsOnBoardingViewSeen);
    Future.delayed(const Duration(seconds: 1), () {
      if (isOnBoardingViewSeen) {
        var isLoggedIn = FirebaseAuthService().isLoggedIn();

        if (isLoggedIn) {
          Navigator.pushReplacementNamed(context, MainView.routeName);
        } else {
          Navigator.pushReplacementNamed(context, SigninView.routeName);
        }
      } else {
        Navigator.pushReplacementNamed(context, OnBoardingView.routeName);
      }
    });
  }
}



// GENERATED CODE - DO NOT MODIFY BY HAND
import 'package:flutter/material.dart';
import 'package:intl/intl.dart';
import 'intl/messages_all.dart';

// **************************************************************************
// Generator: Flutter Intl IDE plugin
// Made by Localizely
// **************************************************************************

// ignore_for_file: non_constant_identifier_names, lines_longer_than_80_chars
// ignore_for_file: join_return_with_assignment, prefer_final_in_for_each
// ignore_for_file: avoid_redundant_argument_values, avoid_escaping_inner_quotes

class S {
  S();

  static S? _current;

  static S get current {
    assert(
      _current != null,
      'No instance of S was loaded. Try to initialize the S delegate before accessing S.current.',
    );
    return _current!;
  }

  static const AppLocalizationDelegate delegate = AppLocalizationDelegate();

  static Future<S> load(Locale locale) {
    final name =
        (locale.countryCode?.isEmpty ?? false)
            ? locale.languageCode
            : locale.toString();
    final localeName = Intl.canonicalizedLocale(name);
    return initializeMessages(localeName).then((_) {
      Intl.defaultLocale = localeName;
      final instance = S();
      S._current = instance;

      return instance;
    });
  }

  static S of(BuildContext context) {
    final instance = S.maybeOf(context);
    assert(
      instance != null,
      'No instance of S present in the widget tree. Did you add S.delegate in localizationsDelegates?',
    );
    return instance!;
  }

  static S? maybeOf(BuildContext context) {
    return Localizations.of<S>(context, S);
  }

  /// Flash
  String get AppBarTitle {
    return Intl.message('Flash', name: 'AppBarTitle', desc: '', args: []);
  }

  /// Currencies
  String get currency {
    return Intl.message('Currencies', name: 'currency', desc: '', args: []);
  }

  /// Crypto
  String get cyrpto {
    return Intl.message('Crypto', name: 'cyrpto', desc: '', args: []);
  }

  /// Metals
  String get metal {
    return Intl.message('Metals', name: 'metal', desc: '', args: []);
  }

  /// Gram
  String get gram {
    return Intl.message('Gram', name: 'gram', desc: '', args: []);
  }

  /// Ounce
  String get Ounce {
    return Intl.message('Ounce', name: 'Ounce', desc: '', args: []);
  }

  /// Kilogram
  String get kilo {
    return Intl.message('Kilogram', name: 'kilo', desc: '', args: []);
  }

  /// Tonne
  String get tonne {
    return Intl.message('Tonne', name: 'tonne', desc: '', args: []);
  }

  /// ID
  String get id {
    return Intl.message('ID', name: 'id', desc: '', args: []);
  }

  /// Symbol
  String get symbol {
    return Intl.message('Symbol', name: 'symbol', desc: '', args: []);
  }

  /// Name
  String get name {
    return Intl.message('Name', name: 'name', desc: '', args: []);
  }

  /// Image
  String get image {
    return Intl.message('Image', name: 'image', desc: '', args: []);
  }

  /// Current Price
  String get currentPrice {
    return Intl.message(
      'Current Price',
      name: 'currentPrice',
      desc: '',
      args: [],
    );
  }

  /// Market Cap
  String get marketCap {
    return Intl.message('Market Cap', name: 'marketCap', desc: '', args: []);
  }

  /// Market Cap Rank
  String get marketCapRank {
    return Intl.message(
      'Market Cap Rank',
      name: 'marketCapRank',
      desc: '',
      args: [],
    );
  }

  /// Fully Diluted Valuation
  String get fullyDilutedValuation {
    return Intl.message(
      'Fully Diluted Valuation',
      name: 'fullyDilutedValuation',
      desc: '',
      args: [],
    );
  }

  /// Total Volume
  String get totalVolume {
    return Intl.message(
      'Total Volume',
      name: 'totalVolume',
      desc: '',
      args: [],
    );
  }

  /// High 24h
  String get high24h {
    return Intl.message('High 24h', name: 'high24h', desc: '', args: []);
  }

  /// Low 24h
  String get low24h {
    return Intl.message('Low 24h', name: 'low24h', desc: '', args: []);
  }

  /// Price Change 24h
  String get priceChange24h {
    return Intl.message(
      'Price Change 24h',
      name: 'priceChange24h',
      desc: '',
      args: [],
    );
  }

  /// Price Change Percentage 24h
  String get priceChangePercentage24h {
    return Intl.message(
      'Price Change Percentage 24h',
      name: 'priceChangePercentage24h',
      desc: '',
      args: [],
    );
  }

  /// Market Cap Change 24h
  String get marketCapChange24h {
    return Intl.message(
      'Market Cap Change 24h',
      name: 'marketCapChange24h',
      desc: '',
      args: [],
    );
  }

  /// Market Cap Change Percentage 24h
  String get marketCapChangePercentage24h {
    return Intl.message(
      'Market Cap Change Percentage 24h',
      name: 'marketCapChangePercentage24h',
      desc: '',
      args: [],
    );
  }

  /// Circulating Supply
  String get circulatingSupply {
    return Intl.message(
      'Circulating Supply',
      name: 'circulatingSupply',
      desc: '',
      args: [],
    );
  }

  /// Total Supply
  String get totalSupply {
    return Intl.message(
      'Total Supply',
      name: 'totalSupply',
      desc: '',
      args: [],
    );
  }

  /// Max Supply
  String get maxSupply {
    return Intl.message('Max Supply', name: 'maxSupply', desc: '', args: []);
  }

  /// All-Time High
  String get ath {
    return Intl.message('All-Time High', name: 'ath', desc: '', args: []);
  }

  /// ATH Change Percentage
  String get athChangePercentage {
    return Intl.message(
      'ATH Change Percentage',
      name: 'athChangePercentage',
      desc: '',
      args: [],
    );
  }

  /// ATH Date
  String get athDate {
    return Intl.message('ATH Date', name: 'athDate', desc: '', args: []);
  }

  /// All-Time Low
  String get atl {
    return Intl.message('All-Time Low', name: 'atl', desc: '', args: []);
  }

  /// ATL Change Percentage
  String get atlChangePercentage {
    return Intl.message(
      'ATL Change Percentage',
      name: 'atlChangePercentage',
      desc: '',
      args: [],
    );
  }

  /// ATL Date
  String get atlDate {
    return Intl.message('ATL Date', name: 'atlDate', desc: '', args: []);
  }

  /// Last Updated
  String get lastUpdated {
    return Intl.message(
      'Last Updated',
      name: 'lastUpdated',
      desc: '',
      args: [],
    );
  }

  /// Search for a metal...
  String get SearchForAMetal {
    return Intl.message(
      'Search for a metal...',
      name: 'SearchForAMetal',
      desc: '',
      args: [],
    );
  }

  /// Amount
  String get Amount {
    return Intl.message('Amount', name: 'Amount', desc: '', args: []);
  }

  /// Search for a currency...
  String get SearchForACurrency {
    return Intl.message(
      'Search for a currency...',
      name: 'SearchForACurrency',
      desc: '',
      args: [],
    );
  }

  /// Search for a crypto...
  String get SearchForACrypto {
    return Intl.message(
      'Search for a crypto...',
      name: 'SearchForACrypto',
      desc: '',
      args: [],
    );
  }

  /// No cryptocurrencies found
  String get NoCryptoFound {
    return Intl.message(
      'No cryptocurrencies found',
      name: 'NoCryptoFound',
      desc: '',
      args: [],
    );
  }

  /// No metals found
  String get NoMetalsFound {
    return Intl.message(
      'No metals found',
      name: 'NoMetalsFound',
      desc: '',
      args: [],
    );
  }

  /// No currencies found
  String get NoCurrenciesFound {
    return Intl.message(
      'No currencies found',
      name: 'NoCurrenciesFound',
      desc: '',
      args: [],
    );
  }

  /// {currency}
  String currency_name(Object currency) {
    return Intl.message(
      '$currency',
      name: 'currency_name',
      desc: '',
      args: [currency],
    );
  }

  ///     comparison currency
  String get comparison_currency {
    return Intl.message(
      '    comparison currency',
      name: 'comparison_currency',
      desc: '',
      args: [],
    );
  }

  /// Ø¹Ø±Ø¨ÙŠ
  String get current_language {
    return Intl.message('Ø¹Ø±Ø¨ÙŠ', name: 'current_language', desc: '', args: []);
  }
}

class AppLocalizationDelegate extends LocalizationsDelegate<S> {
  const AppLocalizationDelegate();

  List<Locale> get supportedLocales {
    return const <Locale>[
      Locale.fromSubtags(languageCode: 'en'),
      Locale.fromSubtags(languageCode: 'ar'),
    ];
  }

  @override
  bool isSupported(Locale locale) => _isSupported(locale);
  @override
  Future<S> load(Locale locale) => S.load(locale);
  @override
  bool shouldReload(AppLocalizationDelegate old) => false;

  bool _isSupported(Locale locale) {
    for (var supportedLocale in supportedLocales) {
      if (supportedLocale.languageCode == locale.languageCode) {
        return true;
      }
    }
    return false;
  }
}



// DO NOT EDIT. This is code generated via package:intl/generate_localized.dart
// This is a library that looks up messages for specific locales by
// delegating to the appropriate library.

// Ignore issues from commonly used lints in this file.
// ignore_for_file:implementation_imports, file_names, unnecessary_new
// ignore_for_file:unnecessary_brace_in_string_interps, directives_ordering
// ignore_for_file:argument_type_not_assignable, invalid_assignment
// ignore_for_file:prefer_single_quotes, prefer_generic_function_type_aliases
// ignore_for_file:comment_references

import 'dart:async';

import 'package:flutter/foundation.dart';
import 'package:intl/intl.dart';
import 'package:intl/message_lookup_by_library.dart';
import 'package:intl/src/intl_helpers.dart';

import 'messages_ar.dart' as messages_ar;
import 'messages_en.dart' as messages_en;

typedef Future<dynamic> LibraryLoader();
Map<String, LibraryLoader> _deferredLibraries = {
  'ar': () => new SynchronousFuture(null),
  'en': () => new SynchronousFuture(null),
};

MessageLookupByLibrary? _findExact(String localeName) {
  switch (localeName) {
    case 'ar':
      return messages_ar.messages;
    case 'en':
      return messages_en.messages;
    default:
      return null;
  }
}

/// User programs should call this before using [localeName] for messages.
Future<bool> initializeMessages(String localeName) {
  var availableLocale = Intl.verifiedLocale(
    localeName,
    (locale) => _deferredLibraries[locale] != null,
    onFailure: (_) => null,
  );
  if (availableLocale == null) {
    return new SynchronousFuture(false);
  }
  var lib = _deferredLibraries[availableLocale];
  lib == null ? new SynchronousFuture(false) : lib();
  initializeInternalMessageLookup(() => new CompositeMessageLookup());
  messageLookup.addLocale(availableLocale, _findGeneratedMessagesFor);
  return new SynchronousFuture(true);
}

bool _messagesExistFor(String locale) {
  try {
    return _findExact(locale) != null;
  } catch (e) {
    return false;
  }
}

MessageLookupByLibrary? _findGeneratedMessagesFor(String locale) {
  var actualLocale = Intl.verifiedLocale(
    locale,
    _messagesExistFor,
    onFailure: (_) => null,
  );
  if (actualLocale == null) return null;
  return _findExact(actualLocale);
}




ChatGPT said:
شفت الكود اللي بعته بالكامل، وفيه كذا نقطة تحتاج تعديل أو تصحيح خصوصًا في جزء الـ CartItem:

المشكلة الأساسية:
في هذا السطر داخل CartItem:

CustomNetworkImage(
  imageUrl: CartEntity.ProductEntity.imageUrl!,
),
هنا أنت بتحاول الوصول لـ ProductEntity من الكلاس CartEntity باستخدام اسم الكلاس نفسه بدل الـ instance.

الصحيح أنك تستخدم الـ instance cartEntity اللي مررته للـ widget.

أيضًا، ProductEntity.imageUrl ممكن تكون null، فيفضل التعامل مع null بأمان.

التصحيح:
CustomNetworkImage(
  imageUrl: cartEntity.productEntity.imageUrl ?? '',
),
هذا يضمن أن الصورة تعرض بدون أخطاء حتى لو كانت null.

ملاحظات عامة أخرى على الكود:
في CartItemList:

const CartItemList(),
هنا أنت لازم تمرر cartItems لأنه required، غير ذلك سيحدث خطأ.

الترميز العربي في النصوص:

النصوص مثل `'Ø§Ù„Ø


You said:
راجع التلت اجزاء وقولي رايك في المشروع حتي الأن

ChatGPT said:
تمام، خليني أديك مراجعة شاملة للمشروع من اللي بعته حتى الآن، مع رأي مفصل على كل جزء:

١. واجهة الـ Cart (عربة التسوق)
نقاط القوة:
تصميم الـ UI منظم جدًا: CartItem, CartItemList, CartViewBody مقسمة بشكل منطقي.

استخدام IntrinsicHeight وExpanded كويس لضبط حجم العناصر.

إضافة أزرار التحكم بالكمية (CartItemActionButtons) واضحة.

الـ CustomDivider مفيد للفصل بين العناصر.

نقاط التحسين:
خطأ في استخدام الـ instance في CartItem (زي ما ذكرت لك) عند الوصول لـ ProductEntity.imageUrl.

بعض النصوص العربية مش واضحة بسبب الترميز ('Ø¨Ø·ÙŠØØ¨' بدل 'بطّيخ'). يجب التأكد من أن ملفات الـ UTF-8 أو ملفات الـ .arb مضبوطة.

أرقام الكميات والأسعار مكتوبة كنصوص ثابتة ('3 كم', '60 جنيه'). لو المشروع حيشتغل ديناميكي لازم تربطها بالـ state.

٢. واجهة الـ Home والمنتجات
نقاط القوة:
تقسيم الـ HomeScreen لمكونات واضحة: CustomHomeAppbar, FeaturedList, ProductsGridViewBlocBuilder.

استخدام Bloc و Cubit لتنظيم استدعاء البيانات ممتاز.

ProductsGridViewBlocBuilder مع Skeletonizer يعطي تجربة جيدة أثناء تحميل البيانات.

واجهة المنتجات Grid مرتبة وواضحة.

نقاط التحسين:
بعض الـ widgets تستخدم padding ثابت (padding: const EdgeInsets.symmetric(horizontal: 16))، يفضل استخدام نسب من MediaQuery لتكون مرنة على جميع الشاشات.

الترميز العربي مرة أخرى يظهر مش صحيح في النصوص.

لو المشروع حيكون متعدد اللغات، يمكن دمج S.current من الـ intl بدل النصوص الثابتة.

٣. OnBoarding وSplash
نقاط القوة:
استخدام PageView وDotsIndicator ممتاز لتجربة OnBoarding سلسة.

إدارة الـ SharedPreferences لمعرفة إذا تم مشاهدة الـ OnBoarding جيدة.

التنقل بعد الـ SplashView واضح مع التحقق من تسجيل الدخول.

نقاط التحسين:
الكود في OnBoarding يحتوي على نصوص عربية مش مضبوطة ('ØªØ®Ø·'، 'Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ù†') يجب تصحيح الترميز.

في SplashViewBody، استخدام Future.delayed جيد، لكن يمكن تحويله لـ async-await لتقليل التعقيد.

بعض Widgets فيها Padding ثابت، يفضل جعلها responsive.

٤. ملاحظات عامة على المشروع
الترميز العربي: أغلب النصوص العربية تظهر بشكل غير صحيح (UTF-8 مشكلة) وهذا يؤثر على واجهة المستخدم.

الـ State management: استخدام Cubit ممتاز، لكن هناك بعض القيم (مثل الكميات والأسعار) ما مربوطة بعد بالـ state.

تنظيم الملفات: جيد جدًا، كل قسم (Cart, Home, OnBoarding, Products) في ملفات منفصلة.

التصميم: نظيف ومرتب، مع استخدام جيد للألوان والـ shadows والـ rounded corners.

رأيي العام:
المشروع منظم جدًا من ناحية هيكلة الكود وواجهات المستخدم.
الأجزاء الأساسية شغالة بشكل منطقي، واستخدام Bloc و Cubit ممتاز للتعامل مع البيانات.
لكن هناك مشاكل الترميز العربي و ربط الـ state بالقيم الديناميكية التي يجب حلها ليصبح المشروع جاهز للإنتاج.

لو تحب، أقدر أعمل لك خريطة إصلاح سريعة:

تصحيح الترميز العربي في كل الملفات.

ربط الكميات والأسعار بـ Cubit أو model.

جعل بعض الـ paddings و widths responsive.

تحسين تنقل Splash/OnBoarding مع async-await.

هل تحب أعمل لك الخريطة دي؟


You said:
انا عاوزك تعرف اني فش المشروع ده مش بركز علي UI مادام مفي خطأ او اكسبشن طبق ده علي بافي الشرح في المشروع

ChatGPT said:
تمام فهمت عليك 💡

يعني هدفك من المشروع مش التركيز على جمال الـ UI، لكن التركيز كله على:

عدم وجود أخطاء أو Exceptions أثناء التشغيل.

تثبيت الـ logic بحيث كل وظيفة أو كود شغال بدون crash.

التأكد من التعامل مع كل الحالات (مثل القيم الفارغة، الصور الغير موجودة، نصوص عربية أو null، استدعاء الـ API، تغيير الكميات، الخ…).

يعني الـ UI حلو لو موجود، بس مش مهم طالما التطبيق مستقر وما بيقفش.

لو حابب، أقدر أعمل لك قائمة شاملة بكل الأماكن اللي ممكن تسبب Exception أو crash في المشروع الحالي، وأديك الحلول السريعة لكل نقطة، بحيث تطبقها على كل المشروع.

تحب أعملها لك دلوقتي؟


You said:
الهدف الرئيسي من المشورع وهو معرفة التعامل مع الخدمات مثل سوبا بيز و فاير بيز واسنخدام  clean arch مع العلم اني علي علم بمعظم جوانب المروشع بنسبة جيدة مثل oop وUIو cubits الخدمات مثل سوبا بيز و فاير بيز و Clean arch مع العمل اني لاول مره اتعامل مع 

ChatGPT said:
تمام كده، دلوقتي الصورة واضحة جدًا 🔹

إنت الهدف الرئيسي من المشروع مش بس الـ UI، لكن تطبيق عملي للخدمات الخارجية واستخدام Clean Architecture، وده ممتاز لإنه يوريك الجانب العملي للتعامل مع Firebase و Supabase بالإضافة للـ Cubit و OOP.

من اللي شفته في المشروع:

النقاط الإيجابية:
استخدام Clean Architecture:

عندك فصل جيد بين الـ Views, Widgets, Cubit, Entities, Repos.

ده هيساعدك تفهم الفرق بين Domain, Data, Presentation.

التعامل مع خدمات خارجية:

Firebase Auth موجود للتسجيل/تسجيل الدخول.

Supabase أو أي REST API موجود لجلب البيانات (مثل المنتجات، الكارت…).

Cubit و BlocProvider:

استخدام جيد لـ Cubit لتحميل المنتجات وعرضها.

BlocBuilder مستخدم بطريقة سليمة للتعامل مع حالات Success, Failure, Loading.

Widgets Modular:

الكارت، المنتجات، Featured Items، Bottom Navigation كلها مقسمة بشكل Modular.

ده يقلل التعقيد في الصفحة الرئيسية.

النقاط اللي محتاجة تركيز (خصوصًا لأول مرة تتعامل فيها مع الخدمات دي وClean Arch):
التأكد من التعامل مع القيم الفارغة أو null:

مثال: CartEntity.ProductEntity.imageUrl! ممكن يطلع Exception لو الصورة مش موجودة.

لازم تستخدم null-safety أو fallback image.

إدارة State أثناء استدعاء الخدمات:

تأكد إن كل استدعاء لـ Firebase أو Supabase داخل Cubit محمي بـ try/catch.

لازم تكون جاهز لأي خطأ في الشبكة أو Exception.

تحديث البيانات بعد أي تغيير:

مثال: تغيير كمية المنتج في الكارت لازم يحدث الـ state بشكل صحيح.

استخدام Cubit هنا ممتاز بس ركز على الـ emit الصحيح بعد كل تحديث.

الـ Navigation بناءً على الحالة:

مثال: Splash screen تحدد هل المستخدم رايح OnBoarding، SignIn، أو MainView.

ممتاز، بس تأكد إن القيم المستخرجة من SharedPrefs موجودة ولا لا.

Localization و النصوص العربية:

الشفرة فيها نصوص عربية مش متحولة بعد للـ Intl.

مهم تكون متأكد إن الـ encoding مظبوط وما يحصل crash بسبب نصوص غير صحيحة.

💡 الخلاصة:

المشروع قوي من ناحية التعلم العملي لـ Firebase, Supabase, Clean Arch, Cubit.

لو ركزت على تجنب أي Exception وNull Values و تأكيد تحديث الـ state بشكل صحيح، هتكون استفدت أقصى استفادة عملية.

الـ UI دلوقتي كويس بس مش هدفك الأساسي، المهم إن كل جزء شغال بشكل مستقر.

لو تحب، أقدر أعمل لك قائمة بالأماكن اللي ممكن تسبب exceptions أو مشاكل في المشروع الحالي وأديك حلول جاهزة تطبقها على كل الملفات بحيث تبقى كل شيء مستقر.

تحب أعملها لك؟


You said:
وهقولك الملعومة ديه تاني ده كود بتم كتابته من خلال معلم الكورس وانا بكتب واره 

ChatGPT said:
تمام كده، ده مهم جدًا إنك وضحت النقطة دي 🔹

ده معناه إنك بتطبق عمليًا اللي بتتعلمه في الكورس، وده ممتاز جدًا خصوصًا مع Clean Architecture و Cubit و Services زي Firebase و Supabase.

الموضوع دلوقتي مش إنك تفكر إنت كاتب الكود صح ولا لأ، لكن مهم إنك تفهم كل سطر وليه مكتوب بالطريقة دي، وتتعلم إزاي تتعامل مع الأخطاء والمشاكل اللي ممكن تظهر وقت التنفيذ.

يعني:

الكود جاي من المعلم → ابدأ بقراءته وفهم الـ flow.

حاول تشوف كل استدعاء خدمة، كل emit في Cubit، وكل state.

ركز على الأماكن اللي ممكن تسبب Exception أو crash زي القيم null، أو استدعاءات الشبكة اللي ممكن تفشل.

بعد كده، لما تحاول تعدل أو تضيف حاجة، هتكون فاهم البنية ومقدرتش تخرب حاجة في الـ architecture.

لو تحب، أقدر أعمل لك خريطة أو شرح لكل جزء في المشروع الحالي مع تحديد أماكن الـ Exceptions المحتملة بحيث تكون قاعدة واضحة تشتغل عليها وانت بتكتب الكود ورا المعلم.

تحب أعملها لك دلوقتي؟


You said:
قولي ملخص الشات والي فهمته مني والي انا بعمله ومحتاجه منك

ChatGPT said:
تمام، هاعملك ملخص شامل عن الشات وفهمي لموقفك الحالي:

1️⃣ وضعك الحالي:
أنت شغال على مشروع Flutter تعليمي وبتتابع الكورس خطوة خطوة.

الكود معظمّه مكتوب بواسطة معلم الكورس وانت بتكتب وراه، مش من عندك بالكامل.

هدفك مش التركيز على UI في المرحلة دي، طالما الكود شغال ومفيش Exceptions.

هدفك الرئيسي هو فهم التعامل مع الخدمات زي Firebase و Supabase، وفهم Clean Architecture و Cubit في المشروع.

عندك فهم كويس لـ: OOP، UI، Cubits، وإدارة الحالة. لكن التعامل العملي مع الخدمات (Firebase/Supabase) و Clean Architecture ده جديد عليك.

2️⃣ احتياجاتك الحالية مني:
مراجعة الكود اللي بتكتبه والتأكد إنه خالي من Exceptions أو أخطاء تشغيلية.

ما يهمكش شكل الـ UI أو تحسينه دلوقتي، الهدف تطبيق الخدمات وفهم الـ flow.

لو في أي مكان محتمل يسبب crash أو خطأ، محتاج أعرفه ونطبق طريقة التعامل معاه.

محتاج شرح أو خريطة لكيفية عمل المشروع بحيث تبقى عارف كل جزء مسؤول عن إيه، وإزاي الـ data بتتحرك بين الـ layers.

3️⃣ طريقة مساعدتي ليك:
أقدر أعمل لك تحليل لكل جزء من المشروع:

Main files، Cubits، Views، Services، Entities.

الـ flow بين الـ layers (presentation → domain → data → services).

أماكن الـ Exceptions أو الـ null checks المحتملة.

أقدر أديك خطوات عملية للتعامل مع أي مشكلة تشغيلية أو Exception.

أقدر أجاوب على أي سؤال عندك عن أي Service أو Clean Arch layer أثناء متابعة الكورس.

لو تحب، الخطوة الجاية نقدر نعمل خريطة كاملة للمشروع الحالي مع تحديد أماكن الخطر والأجزاء المهمة اللي تتعامل مع Firebase و Supabase و Cubit.

تحب نبدأ بيها دلوقتي؟


You said:
وعاوزك لما اسألك علي حاجة تشرح لي سطر سطر وفولي امثلة وتسالني سؤال يحمل نفس المشكلة  اكمل او مقالي او اختيارات  لتتتاكد اني فهمت

ChatGPT said:
تمام يا معلم ✅
الفكرة واضحة جدًا: كل ما تسأل عن أي حاجة في الكود أو المشروع، هاعملك:

شرح سطر بسطر: كل سطر هيفهمك هو بيعمل إيه بالظبط، وليه موجود.

أمثلة عملية: هديك مثال تطبيقي يوضح الفكرة.

سؤال تفاعلي: هسألك سؤال له نفس المشكلة أو المفهوم، بأسلوب:

أكمل الفراغ

اختيارات متعددة

أو اعمل تعديل صغير على الكود

ده عشان أتأكد إنك فهمت كويس ومش مجرد حفظ.

لو تحب، نبدأ على طول بحاجة من المشروع اللي بعتهلي، ونطبق الطريقة دي خطوة خطوة؟


You said:
طب عاوز اعرف الي فهمتخ من طبيعة المشروع الي قولتلك عليها

ChatGPT said:
تمام، ده ملخص كامل للي فهمته منك عن طبيعة مشروعك وطريقة عملك عليه:

1️⃣ هدف المشروع
الهدف الأساسي مش UI أو تصميم واجهات فقط.

الهدف تعلم التعامل مع الخدمات الخارجية زي:

Supabase

Firebase

تطبيق Clean Architecture عمليًا داخل المشروع.

التعامل مع Cubit/Bloc لإدارة الحالة.

معرفة كيفية تنظيم المشروع بطريقة OOP قوية وتوزيع الكود على:

Features

Presentation (UI & Widgets)

Domain (Entities, UseCases)

Data (Repositories, Services)

2️⃣ خبرتك ومستوى فهمك
أنت على دراية جيدة بـ:

OOP

UI/Widgets

Cubit

لكن التعامل مع الخدمات الخارجية لأول مرة (Supabase و Firebase) هو الجديد بالنسبة لك.

المشروع كله تقريبًا نسخة من الكود اللي بعتهلك المعلم، وأنت بتكتبه ورا الكورس كتمرين عملي.

3️⃣ طبيعة أسلوبك في التعلم
مش عايز التركيز على الستايل أو الشكل الجمالي للـ UI إلا لو فيه أخطاء أو Exceptions.

التركيز على المنطق والكود والخدمات.

عايز شرح سطر بسطر مع أمثلة، وأسئلة للتأكد من الفهم.

4️⃣ توقعاتي منك كمساعد
لما تسأل عن أي جزء، هشرحلك سطر بسطر.

هديك أمثلة عملية لتوضيح المفهوم.

هسألك سؤال تفاعلي (اكمل/اختيارات/تعديل كود) عشان أتأكد إنك فهمت.

أي حاجة فيها Exception أو خطأ هنتعامل معاها أولًا قبل أي حاجة تانية.

لو تحب، نقدر نبدأ بمراجعة جزء من الكود اللي بعته على طول بأسلوب الشرح ده، ونحلل كل سطر خطوة خطوة.

تحب نبدأ بـ CartItem و CartItemList أولًا؟


You said:
هل محتاج معلومات اخر

ChatGPT said:
لا، المعلومات اللي قلتها كافية جدًا عشان نفهم طبيعة المشروع وطريقة عملك عليه.

يعني دلوقتي:

عارفين هدف المشروع (تعلم الخدمات + Clean Arch + Cubit)

عارفين مستواك الحالي وإيه الجديد بالنسبة لك

عارفين أسلوب الشرح اللي تحبه (سطر بسطر + أمثلة + أسئلة)

لو تحب، نقدر نبدأ مباشرة بمراجعة كود معين أو أي جزء تحب تركز عليه أولًا، ونطبق طريقة الشرح اللي اتفقنا عليها.

تحب نبدأ بـ CartItem و CartItemList ولا جزء تاني؟


You said:
طب سؤال عشان اتاكد انك فهمت ايه الخدمة الي بستخدمها لرفع البيانات

ChatGPT said:
تمام، عشان أتأكد إنك فاهم:

السؤال:

في المشروع اللي بتشتغل عليه، لما بتحب ترفع بيانات المستخدم أو بيانات المنتجات في السيرفر أو تخزنها بشكل دائم، إنت بتستخدم أي خدمة من الخدمات دي؟

أ) Firebase فقط
ب) Supabase فقط
ج) الاتنين مع بعض حسب النوع
د) Local Storage بس

مين فيهم؟


You said:
انا قولتلك فش الشات راجع الملعلومات الي قولتك عليها

ChatGPT said:
تمام تمام، دلوقتي رجعت للملفات والمعلومات اللي انت قولتلها في الشات:

إنت قلت إن الهدف الرئيسي من المشروع مش الـ UI، ده تدريب عملي على التعامل مع الخدمات زي Firebase و Supabase، واستخدام Clean Architecture، مع أنك كويس في OOP و Cubits و UI، وده أول مرة تتعامل مع الخدمات دي.

وبناءً على كود المشروع:

في FirebaseAuthService، ده واضح إنه مستخدم للتحقق من تسجيل الدخول.

في SharedPreferences (Prefs)، ده مستخدم لتخزين البيانات المحلية زي هل المستخدم شاف OnBoarding ولا لأ.

في ملفات الكور مثل products_cubit و ProductsRepo، انت غالبًا بتتعامل مع Supabase عشان تجيب البيانات (Products، Cart، الخ…).

يبقى لما سؤلتك عن رفع البيانات، الإجابة الصح هي:
✅ انت بتستخدم Supabase لرفع واسترجاع البيانات الخاصة بالمنتجات أو الكارت، و Firebase فقط للتحقق من تسجيل الدخول.

لو تحب أقدر أعمل لك مخطط سريع يوضح كل خدمة مسؤولة عن إيه في مشروعك، عشان يكون كل شيء واضح ومترابط. ده هيسهل عليك لما نبدأ نشرح سطر سطر كل حاجة بعدين. تحب أعمله؟


You said:
طب الخدمة الي بيتخدمها المعلم

ChatGPT said:
تمام، من الكود اللي انت بعته ومن كلامك:

المعلم في الكورس بيخلي الكود يتعامل مع الخدمات كالتالي:

FirebaseAuthService → للتحقق من تسجيل دخول المستخدم (Login/Logout).

SharedPreferences (Prefs) → لتخزين بيانات محلية زي: هل المستخدم شاف OnBoarding ولا لأ.

Supabase (من خلال ProductsRepo و Cubit) → لرفع البيانات واسترجاعها زي المنتجات (Products) والكارت (Cart) وأي بيانات ديناميكية تانية.

يبقى لو سألناك:

مين اللي بيحفظ بيانات المستخدم أو المنتجات؟ → Supabase

مين اللي بيتأكد هل المستخدم مسجل دخول؟ → FirebaseAuth

مين اللي بيخزن بيانات محلية صغيرة؟ → SharedPreferences

لو تحب، ممكن أعمل لك جدول أو مخطط يوضح كل خدمة مسؤولة عن إيه في المشروع بشكل بصري، ده هيخلي كل حاجة واضحة قبل ما نخش نشرح سطر سطر. تحب أعمله؟


You said:
لا المعلم بيستخدم فاير بيز للمصادقة ورفع البيانات وانا هطبيق معاه لكن بعد انتهاء الكورس هحول رفع اللبانات لسوبا بيز عسان فاير بيز بيحتاج طريقة دفع لرفع البيانات ونا مش متوفره عندي

ChatGPT said:
تمام، دلوقتي فهمت بشكل واضح 😎:

Firebase حاليًا بيستخدمه المعلم للمصادقة + رفع البيانات.

انت هتطبق معاه نفس الحاجة خلال الكورس عشان تتعلم الـ flow وطريقة التعامل مع الـ Firebase Auth + Firestore/Database.

بعد ما تخلص الكورس، ناوي تحول البيانات لـ Supabase لأن Firebase محتاج طريقة دفع علشان ترفع بيانات أكبر أو تستخدم بعض الخصائص، وانت مش متوفر عندك الدفع دلوقتي.

يعني الفكرة الأساسية: انت بتتعلم على Firebase كمختبر عملي، وبعدين هتطبق نفس المنهجية على Supabase كحل مجاني ومستقل عن الدفع.

لو تحب، أقدر أرسم لك مخطط بسيط يوضح فرق التعامل بين Firebase وSupabase في مشروعك بحيث يبقى واضح إنت بتشتغل على إيه دلوقتي وإيه هيتغير بعدين. تحب أعمله؟


You said:
قولي فهمت ايه من المعلومات الي قولتها ليك في كامل الشات و المطلوب منك وال يانا بحاول اعمله

ChatGPT said:
تمام، خلينا نلخص كل اللي فهمته منك من الشات لحد دلوقتي:

طبيعة المشروع:
هدف المشروع الأساسي:
تعلم التعامل مع الخدمات الخارجية (Firebase وSupabase) وتطبيق Clean Architecture، مش التركيز على الـ UI طالما مفيش أخطاء أو exceptions.

الجوانب اللي انت ملم بيها بالفعل:

OOP

UI (Widgets, Layouts, Flutter basics)

Cubits / Bloc لإدارة الحالة

الجوانب اللي بتتعلمها لأول مرة عمليًا:

التعامل مع الخدمات الخارجية زي Firebase وSupabase.

رفع البيانات ومزامنتها مع قاعدة البيانات.

المصادقة (Authentication) باستخدام Firebase.

تطبيق الـ Clean Architecture في مشروع Flutter عملي.

طريقة العمل مع المعلم:
المعلم بيشتغل على Firebase للمصادقة ورفع البيانات.

انت هتطبق معاه نفس الكود والخطوات خلال الكورس عشان تتعلم التطبيق العملي.

بعد ما تخلص الكورس، هتحول المشروع لـ Supabase، لأنه مجاني وبدون الحاجة لطريقة دفع، وده هيسمح لك برفع البيانات بدون قيود Firebase.

المطلوب منك منّي (دوري كمساعدك):
شرح كل سطر في الكود اللي بتشتغل عليه لو طلبت، مع أمثلة عملية.

عمل تمارين وأسئلة مشابهة للمشكلة اللي انت بتتعلمها، سواء اختيار من متعدد أو تكملة أو أكمل الكود، عشان أتأكد إنك فهمت.

التركيز على منطق التعامل مع البيانات والخدمات مش الـ UI، إلا لو في أخطاء أو exceptions.

مساعدتك في فهم Clean Architecture، Cubits، والتعامل مع Firebase/Supabase خطوة خطوة.

إنت بتعمله دلوقتي:
كتابة الكود اللي المعلم بيشرحه، خطوة خطوة.

تجربة التطبيق على Firebase أولًا لفهم المصادقة ورفع البيانات.

تحضير المشروع لاحقًا للتحويل لـ Supabase بعد انتهاء الكورس.

لو تحب، أقدر أرسم لك خريطة ذهنية للمشروع تبين كل الخدمات، الكلاسات، والمهام اللي انت بتتعامل معاها دلوقتي، وكمان اللي هتتعامل معاها بعد التحويل لـ Supabase، بحيث يكون عندك رؤية واضحة.

تحب أعملها لك دلوقتي؟


You said:
ما و هو نوع التبطيق

ChatGPT said:
تمام، من اللي فهمته منك، نوع التطبيق ده يكون:

تطبيق Flutter عملي تعليمي للتعامل مع قواعد البيانات والخدمات السحابية (Firebase وSupabase) مع تطبيق Clean Architecture.

يعني:

نوع التطبيق من حيث المنصة:

Mobile app (Flutter cross-platform، شغال على Android وiOS).

نوع التطبيق من حيث الوظيفة:

CRUD + Authentication app: فيه رفع بيانات، جلب بيانات، وتسجيل دخول/مصادقة.

تعليمي/تدريبي: الهدف الأساسي هو التعلم على التعامل مع الخدمات وتنظيم الكود باستخدام Clean Architecture.

مش تطبيق تجاري أو نهائي للـ UI:

UI موجود لكن مش هو التركيز، طالما التطبيق شغال ومفيش أخطاء أو exceptions.

لو تحب أقدر أرسم لك مخطط يوضح الهيكلية الكاملة للتطبيق (Services, Cubits, Entities, UI layers) عشان تبقى الصورة عندك واضحة جدًا عن نوع التطبيق وطريقة عمله.

تحب أعملها؟


You said:
انا بختبر انك فاهم صح هل هو تطبيق دروس اون لاين ام متجر الكتروني ام لعبة

ChatGPT said:
تمام فهمت سؤالك. 😄

بالاعتماد على كل الكلام اللي قلته: هو ليس تطبيق دروس أونلاين، ولا لعبة، وإنما: متجر إلكتروني (E-commerce app) للتدريب العملي على التعامل مع الخدمات مثل Firebase وSupabase.

يعني الهدف الأساسي هو:

رفع وجلب المنتجات من قواعد البيانات.

التعامل مع المصادقة (login/signup).

تنظيم الكود باستخدام Clean Architecture.

التركيز على تعلم الخدمات والخلفية أكثر من الـ UI.

لو تحب أقدر أسوي لك ملخص سريع لكل الـ features اللي موجودة في التطبيق حتى الآن بحيث يكون واضح المشروع عامل إزاي. تحب أعمله؟


You said:
تمام طب سؤال تاني كيف يرفع مالك التطبيق بيانات المنتجاا ليوبا بيز

ChatGPT said:
تمام، ركز معي. 👌

لو إحنا بنتكلم عن Supabase:

مالك التطبيق يرفع بيانات المنتجات من خلال إرسال بيانات المنتجات (مثل الاسم، السعر، الصورة، الوصف…) إلى قاعدة البيانات الموجودة في Supabase.

يعني:

أول حاجة عنده قاعدة بيانات في Supabase (مثلاً جدول اسمه products).

كل منتج ليه صف (row) فيه:

id

name

price

imageUrl

أي تفاصيل تانية

لما عايز يضيف منتج جديد:

يكتب البيانات في واجهة الـ Admin أو أي سكربت.

التطبيق أو السكربت يرسل البيانات عن طريق API الخاص بـ Supabase (insert request).

Supabase بيخزنها في قاعدة البيانات على طول، ومن أي جهاز تاني ممكن يجلبها.

مهم: Firebase بيتطلب وسيلة دفع للرفع لأنه بيشغل الـ Cloud Storage في بعض الحالات، أما Supabase عندك الـ database والرفع بشكل مجاني لحد حد معين.

سؤال ليك عشان أتأكد إنك فهمت:

لو عايز تضيف منتج جديد باسم "موز"، سعره 10 جنيه، وصورته رابط خارجي، في Supabase، إيه الخطوات اللي هتعملها بالترتيب؟

أ) أكتب البيانات في الـ Flutter app وأرسلها للـ Supabase.

ب) أفتح لوحة تحكم Supabase وأدخل البيانات يدوي.

ج) أعمل كود Dart يستخدم insert ويرسل البيانات للجدول.

د) كل ما سبق ممكن يكون صحيح.

إنت هتختار أي؟


You said:
اليس لك علم اني اعمل علي تطبيق داش بورد لرفع البيانات لتطبيق الاساسي

ChatGPT said:
آه صح! دلوقتي وضحت الصورة تمام. 😄

إنت مش بتعمل التطبيق الرئيسي (اللي المستخدم النهائي بيستخدمه)، إنت شغال على تطبيق Dashboard/لوحة تحكم، واللي الهدف منه:

رفع البيانات للـ Firebase (دلوقتي) أو لاحقًا لـ Supabase.

إدارة المنتجات أو الدروس أو أي محتوى يطلع في التطبيق الأساسي.

التحكم في المحتوى بدون ما تدخل الكود مباشرة في التطبيق الأساسي.

يعني: التطبيق الأساسي بيستقبل البيانات، والتطبيق اللي انت شغال عليه هو اللي بيبعتها للـ backend (Firebase/Supabase).

سؤال عشان أتأكد إنك فهمت:
لو عندك منتج جديد عايز يطلع في التطبيق الأساسي، إيه الطريقه الصح لعمل ده باستخدام الـ Dashboard اللي انت شغال عليه؟


You said:
هل انا بعت ليك كو التطبيق الاساسي كامل

ChatGPT said:
لا، إنت ما بعتهوليش كامل. 😅

إنت بعتهولي أكواد أجزاء من التطبيق الأساسي (زي صفحات الـ Home، Cart، OnBoarding، Splash، وبعض الـ Widgets)، مش المشروع كله.

اللي فهمته إنك عايز تركز دلوقتي على فهم الخدمات والـ Clean Architecture ورفع البيانات أكتر من الـ UI، وبتستخدم الأكواد اللي المعلم بيكتبها كمرجع.

سؤال عشان أتأكد:
لو عايز تختبر رفع منتج جديد، إيه الحاجة اللي محتاج تركز عليها دلوقتي: الكود الكامل للتطبيق الأساسي ولا كفاية الـ Dashboard والـ Firebase؟


You said:
طب هبعت ليك الكود كامل مقسم علي تلت اجزاء اربط التلت اجزاء ببعض ولا تشرح شئ قبل ان ارسل ليك 3 اجزاءكود التطبيق الاساسي وكود الداش بورد

ChatGPT said:
تمام 😎، تمام.

لا أشرح حاجة دلوقتي ولا أبدأ أعمل أي مراجعة أو شرح.
أول حاجة إبعتهولي التلت أجزاء كاملة من:

كود التطبيق الأساسي

كود الداشبورد

بعد ما أستلم الثلاث أجزاء، ساعتها أقدر أربطهم مع بعض وأفهم كل الوظائف، وبعدها أبدأ أشرح لك سطر سطر وأديك أمثلة وأسئلة زي ما اتفقنا.

ممكن تبعتهم واحد واحد أو كله دفعة واحدة، المهم يكون كامل. ✅

هل هتبعتهم دلوقتي؟


You said:
const kHorizintalPadding = 16.0;
const kTopPaddding = 16.0;
const kIsOnBoardingViewSeen = 'KisOnBoardingViewSeen';
const kUserData = 'userData';



// File generated by FlutterFire CLI.
// ignore_for_file: type=lint
import 'package:firebase_core/firebase_core.dart' show FirebaseOptions;
import 'package:flutter/foundation.dart'
    show defaultTargetPlatform, kIsWeb, TargetPlatform;

/// Default [FirebaseOptions] for use with your Firebase apps.
///
/// Example:
/// ```dart
/// import 'firebase_options.dart';
/// // ...
/// await Firebase.initializeApp(
///   options: DefaultFirebaseOptions.currentPlatform,
/// );
/// ```
class DefaultFirebaseOptions {
  static FirebaseOptions get currentPlatform {
    if (kIsWeb) {
      return web;
    }
    switch (defaultTargetPlatform) {
      case TargetPlatform.android:
        return android;
      case TargetPlatform.iOS:
        return ios;
      case TargetPlatform.macOS:
        return macos;
      case TargetPlatform.windows:
        return windows;
      case TargetPlatform.linux:
        throw UnsupportedError(
          'DefaultFirebaseOptions have not been configured for linux - '
          'you can reconfigure this by running the FlutterFire CLI again.',
        );
      default:
        throw UnsupportedError(
          'DefaultFirebaseOptions are not supported for this platform.',
        );
    }
  }

  static const FirebaseOptions web = FirebaseOptions(
    apiKey: 'AIzaSyDbKRIMH0WcbFQiiVQf_clp0ynELT9OrqU',
    appId: '1:93656505089:web:7b6f2f75aa16e761a81900',
    messagingSenderId: '93656505089',
    projectId: 'fruithub0',
    authDomain: 'fruithub0.firebaseapp.com',
    storageBucket: 'fruithub0.firebasestorage.app',
    measurementId: 'G-EFZ9NMYY2S',
  );

  static const FirebaseOptions android = FirebaseOptions(
    apiKey: 'AIzaSyBhRyqGNsY9CuU3VLmVwF3AWUxyIwTJx_c',
    appId: '1:93656505089:android:bd710d69e1435390a81900',
    messagingSenderId: '93656505089',
    projectId: 'fruithub0',
    storageBucket: 'fruithub0.firebasestorage.app',
  );

  static const FirebaseOptions ios = FirebaseOptions(
    apiKey: 'AIzaSyBSoSX0u2Ifj7dcQQPSXQSqMW45HHKduoc',
    appId: '1:93656505089:ios:3e006d8bd8b6c3c1a81900',
    messagingSenderId: '93656505089',
    projectId: 'fruithub0',
    storageBucket: 'fruithub0.firebasestorage.app',
    iosBundleId: 'com.example.fruitHub',
  );

  static const FirebaseOptions macos = FirebaseOptions(
    apiKey: 'AIzaSyBSoSX0u2Ifj7dcQQPSXQSqMW45HHKduoc',
    appId: '1:93656505089:ios:3e006d8bd8b6c3c1a81900',
    messagingSenderId: '93656505089',
    projectId: 'fruithub0',
    storageBucket: 'fruithub0.firebasestorage.app',
    iosBundleId: 'com.example.fruitHub',
  );

  static const FirebaseOptions windows = FirebaseOptions(
    apiKey: 'AIzaSyDbKRIMH0WcbFQiiVQf_clp0ynELT9OrqU',
    appId: '1:93656505089:web:924caa29dfd10b7aa81900',
    messagingSenderId: '93656505089',
    projectId: 'fruithub0',
    authDomain: 'fruithub0.firebaseapp.com',
    storageBucket: 'fruithub0.firebasestorage.app',
    measurementId: 'G-T9M12VDV3D',
  );
}



import 'package:firebase_core/firebase_core.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:flutter_localizations/flutter_localizations.dart';
import 'package:fruit_hub/core/helper_fun/on-generate-route.dart';
import 'package:fruit_hub/core/services/custom_bloc_observer.dart';
import 'package:fruit_hub/core/services/git_it_services.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/features/splash/presentation/views/splash_view.dart';
import 'package:fruit_hub/generated/l10n.dart';
import 'package:fruit_hub/core/services/shared_preferences_singleton.dart';
import 'firebase_options.dart';

void main() async {
  Bloc.observer = CustomBlocObserver();
  WidgetsFlutterBinding.ensureInitialized();
  await Firebase.initializeApp(options: DefaultFirebaseOptions.currentPlatform);
  await Prefs.init();
  setupGitIt();
  runApp(const FruitHub());
}

class FruitHub extends StatelessWidget {
  const FruitHub({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      theme: ThemeData(
        scaffoldBackgroundColor: Colors.white,
        fontFamily: 'Cairo',
        colorScheme: ColorScheme.fromSeed(seedColor: AppColors.primaryColor),
      ),

      localizationsDelegates: [
        S.delegate,
        GlobalMaterialLocalizations.delegate,
        GlobalWidgetsLocalizations.delegate,
        GlobalCupertinoLocalizations.delegate,
      ],
      supportedLocales: S.delegate.supportedLocales,
      locale: const Locale('ar'),
      home: SplashView(),
      onGenerateRoute: onGenerateRoute,
      initialRoute: SplashView.routeName,
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/assets.dart';

class NotificationWidget extends StatelessWidget {
  const NotificationWidget({super.key});

  @override
  Widget build(BuildContext context) {
    return Container(
      padding: const EdgeInsets.all(12),
      decoration: const ShapeDecoration(
        color: Color(0xFFEEF8ED),
        shape: OvalBorder(),
      ),
      child: SvgPicture.asset(Assets.assetsImagesNotification),
    );
  }
}



import 'dart:io';

import 'package:fruit_hub/core/entities/review_entity.dart';


class ProductEntity {
  final String name;
  final String code;
  final String description;
  final num price;
  final File image;
  final bool isFeatured;
  String? imageUrl;
  final int expirationsMonths;
  final bool isOrganic;
  final int numberOfCalories;
  final num avgRating = 0;
  final num ratingCount = 0;
  final int unitAmount;
  final List<ReviewEntity> reviews;
  ProductEntity(
      {required this.name,
      required this.code,
      required this.description,
      required this.price,
      required this.reviews,
      required this.expirationsMonths,
      required this.numberOfCalories,
      required this.unitAmount,
      this.isOrganic = false,
      required this.image,
      required this.isFeatured,
      this.imageUrl});
}



import 'dart:io';

import 'review_entity.dart';

class ProductEntity {
  final String name;
  final String code;
  final String description;
  final num price;

  final bool isFeatured;
  String? imageUrl;
  final int expirationsMonths;
  final bool isOrganic;
  final int numberOfCalories;
  final num avgRating = 0;
  final num ratingCount = 0;
  final int unitAmount;
  final List<ReviewEntity> reviews;
  ProductEntity({
    required this.name,
    required this.code,
    required this.description,
    required this.price,
    required this.reviews,
    required this.expirationsMonths,
    required this.numberOfCalories,
    required this.unitAmount,
    this.isOrganic = false,
    required this.isFeatured,
    this.imageUrl,
  });
}



class ReviewEntity {
  final String name;
  final String image;
  final num ratting;
  final String date;
  final String reviewDescription;

  ReviewEntity(
      {required this.name,
      required this.image,
      required this.ratting,
      required this.date,
      required this.reviewDescription});
}



class CustomException implements Exception {
  final String message;

  CustomException({required this.message});

  @override
  String toString() {
    return message;
  }
}



abstract class Failure {
  final String message;
  Failure(this.message);
}

class ServerFailure extends Failure {
  ServerFailure(super.message);
}



import 'package:flutter/material.dart';

void buildSnackBar(BuildContext context, String message) {
  ScaffoldMessenger.of(context).showSnackBar(SnackBar(content: Text(message)));
}



import '../entities/review_entity.dart';

num getAvgRating(List<ReviewEntity> reviews) {
  var sum = 0.0;
  for (var review in reviews) {
    sum += review.ratting;
  }
  return sum / reviews.length;
}



import 'dart:io';

import 'package:fruit_hub/core/entities/product_entity.dart';

ProductEntity getDummyProduct() {
  return ProductEntity(
    name: 'Apple',
    code: '123',
    description: 'Fresh apple',
    price: 2.5,
    reviews: [],
    expirationsMonths: 6,
    numberOfCalories: 100,
    unitAmount: 1,
    isOrganic: true,
    isFeatured: true,
    imageUrl:
        'https://www.freshnessblogger.com/wp-content/uploads/2020/11/Apple-1.jpg',
  );
}

List<ProductEntity> getDummyProducts() {
  return [
    getDummyProduct(),
    getDummyProduct(),
    getDummyProduct(),
    getDummyProduct(),
    getDummyProduct(),
  ];
}



import 'dart:convert';

import 'package:fruit_hub/constants.dart';
import 'package:fruit_hub/core/services/shared_preferences_singleton.dart';
import 'package:fruit_hub/features/auth/data/models/user_model.dart';
import 'package:fruit_hub/features/auth/domain/entites/user_entity.dart';

UserEntity getUser() {
  var jsonString = Prefs.getString(kUserData);
  var UserEntity = UserModel.fromJson(jsonDecode(jsonString));
  return UserEntity;
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/auth/presentation/views/signin_view.dart';
import 'package:fruit_hub/features/auth/presentation/views/sign_up_view.dart';
import 'package:fruit_hub/features/best_selling/presentation/view/best_selling_view.dart';
import 'package:fruit_hub/features/home/presentation/views/main_view.dart';
import 'package:fruit_hub/features/on_boarding/presentation/views/on_boarding_view.dart';
import 'package:fruit_hub/features/splash/presentation/views/splash_view.dart';

Route<dynamic> onGenerateRoute(RouteSettings settings) {
  switch (settings.name) {
    case SplashView.routeName:
      return MaterialPageRoute(builder: (_) => const SplashView());
    case SigninView.routeName:
      return MaterialPageRoute(builder: (_) => const SigninView());
    case BestSellingView.routeName:
      return MaterialPageRoute(builder: (_) => const BestSellingView());
    case OnBoardingView.routeName:
      return MaterialPageRoute(builder: (_) => const OnBoardingView());
    case SignUpView.routeName:
      return MaterialPageRoute(builder: (_) => const SignUpView());
    case MainView.routeName:
      return MaterialPageRoute(builder: (_) => const MainView());
    default:
      return MaterialPageRoute(builder: (_) => const Scaffold());
  }
}



import 'dart:io';

import 'package:fruit_hub/core/entities/product_entity.dart';
import 'package:fruit_hub/core/helper_fun/get_avg_rating.dart';

import 'review_model.dart';

class ProductModel {
  final String name;
  final String code;
  final String description;
  final num price;

  final bool isFeatured;
  final num sellingCount;
  String? imageUrl;
  final int expirationsMonths;
  final bool isOrganic;
  final int numberOfCalories;
  final num avgRating;
  final num ratingCount = 0;
  final int unitAmount;
  final List<ReviewModel> reviews;
  ProductModel({
    required this.name,
    required this.code,
    required this.description,
    required this.expirationsMonths,
    required this.numberOfCalories,
    required this.avgRating,
    required this.unitAmount,
    required this.sellingCount,
    required this.reviews,
    required this.price,
    required this.isOrganic,
    required this.isFeatured,
    this.imageUrl,
  });

  factory ProductModel.fromJson(Map<String, dynamic> json) {
    return ProductModel(
      avgRating: getAvgRating(json['reviews']),
      name: json['name'],
      code: json['code'],
      description: json['description'],
      expirationsMonths: json['expirationsMonths'],
      numberOfCalories: json['numberOfCalories'],
      unitAmount: json['unitAmount'],
      sellingCount: json['sellingCount'],
      reviews:
          json['reviews'] != null
              ? List<ReviewModel>.from(
                json['reviews'].map((e) => ReviewModel.fromJson(e)),
              )
              : [],
      price: json['price'],
      isOrganic: json['isOrganic'],
      isFeatured: json['isFeatured'],
      imageUrl: json['imageUrl'],
    );
  }

  ProductEntity toEntity() {
    return ProductEntity(
      name: name,
      code: code,
      description: description,
      price: price,
      reviews: reviews.map((e) => e.toEntity()).toList(),
      expirationsMonths: expirationsMonths,
      numberOfCalories: numberOfCalories,
      unitAmount: unitAmount,
      isOrganic: isOrganic,
      isFeatured: isFeatured,
      imageUrl: imageUrl,
    );
  }

  toJson() {
    return {
      'name': name,
      'code': code,
      'description': description,
      'price': price,
      'isFeatured': isFeatured,
      'imageUrl': imageUrl,
      'expirationsMonths': expirationsMonths,
      'numberOfCalories': numberOfCalories,
      'unitAmount': unitAmount,
      'isOrganic': isOrganic,
      'reviews': reviews.map((e) => e.toJson()).toList(),
    };
  }
}



import '../entities/review_entity.dart';

class ReviewModel {
  final String name;
  final String image;
  final num ratting;
  final String date;
  final String reviewDescription;

  ReviewModel({
    required this.name,
    required this.image,
    required this.ratting,
    required this.date,
    required this.reviewDescription,
  });

  factory ReviewModel.fromEntity(ReviewEntity reviewEntity) {
    return ReviewModel(
      name: reviewEntity.name,
      image: reviewEntity.image,
      ratting: reviewEntity.ratting,
      date: reviewEntity.date,
      reviewDescription: reviewEntity.reviewDescription,
    );
  }

  factory ReviewModel.fromJson(Map<String, dynamic> json) {
    return ReviewModel(
      name: json['name'],
      image: json['image'],
      ratting: json['ratting'],
      date: json['date'],
      reviewDescription: json['reviewDescription'],
    );
  }

  ReviewEntity toEntity() {
    return ReviewEntity(
      name: name,
      image: image,
      ratting: ratting,
      date: date,
      reviewDescription: reviewDescription,
    );
  }

  toJson() {
    return {
      'name': name,
      'image': image,
      'ratting': ratting,
      'date': date,
      'reviewDescription': reviewDescription,
    };
  }
}



import 'package:bloc/bloc.dart';
import 'package:fruit_hub/core/entities/product_entity.dart';
import 'package:fruit_hub/core/repos/products_repo/products_repo.dart';
import 'package:meta/meta.dart';

part 'products_state.dart';

class ProductsCubit extends Cubit<ProductsState> {
  ProductsCubit(this.productsRepo) : super(ProductsInitial());

  final ProductsRepo productsRepo;
  int productsLength = 0;
  Future<void> getProducts() async {
    emit(ProductsLoading());
    final result = await productsRepo.getProducts();
    result.fold(
      (failure) => emit(ProductsFailure(errMessage: failure.message)),
      (products) => emit(ProductsSuccess(products)),
    );
  }

  Future<void> getBestSellingProducts() async {
    emit(ProductsLoading());
    final result = await productsRepo.getProducts();
    result.fold(
      (failure) => emit(ProductsFailure(errMessage: failure.message)),
      (products) {
        productsLength = products.length;
        emit(ProductsSuccess(products));
      },
    );
  }
}



part of 'products_cubit.dart';

@immutable
sealed class ProductsState {}

final class ProductsInitial extends ProductsState {}

final class ProductsLoading extends ProductsState {}

final class ProductsFailure extends ProductsState {
  final String errMessage;
  ProductsFailure({required this.errMessage});
}

final class ProductsSuccess extends ProductsState {
  final List<ProductEntity> products;
  ProductsSuccess(this.products);
}



import 'package:dartz/dartz.dart';
import 'package:fruit_hub/core/entities/product_entity.dart';
import 'package:fruit_hub/core/errors/failures.dart';

abstract class ProductsRepo {
  Future<Either<Failure, List<ProductEntity>>> getProducts();
  Future<Either<Failure, List<ProductEntity>>> getbestSellingProducts();
}



import 'package:dartz/dartz.dart';
import 'package:flutter_svg/flutter_svg.dart';
import 'package:fruit_hub/core/entities/product_entity.dart';
import 'package:fruit_hub/core/errors/failures.dart';
import 'package:fruit_hub/core/models/product_model.dart';
import 'package:fruit_hub/core/repos/products_repo/products_repo.dart';
import 'package:fruit_hub/core/services/database_services.dart';
import 'package:fruit_hub/core/utils/backend_endpoints.dart';

class ProductsRepoImpl extends ProductsRepo {
  final DatabaseServices databaseServices;

  ProductsRepoImpl(this.databaseServices);
  @override
  Future<Either<Failure, List<ProductEntity>>> getProducts() async {
    try {
      var data =
          await databaseServices.getUserData(path: BackendEndpoints.getProducts)
              as List<Map<String, dynamic>>;
      List<ProductEntity> products =
          data.map((e) => ProductModel.fromJson(e).toEntity()).toList();
      return right(products);
    } catch (e) {
      return left(ServerFailure(e.toString()));
    }
  }

  @override
  Future<Either<Failure, List<ProductEntity>>> getbestSellingProducts() async {
    try {
      var data =
          await databaseServices.getUserData(
                path: BackendEndpoints.getProducts,
                query: {
                  "limit": 10,
                  "orderBy": "sellingCount",
                  "descending": true,
                },
              )
              as List<Map<String, dynamic>>;
      List<ProductEntity> products =
          data.map((e) => ProductModel.fromJson(e).toEntity()).toList();
      return right(products);
    } catch (e) {
      return left(ServerFailure(e.toString()));
    }
  }
}



import 'dart:developer';

import 'package:bloc/bloc.dart';
import 'package:flutter/foundation.dart';

class CustomBlocObserver extends BlocObserver {
  @override
  void onTransition(Bloc bloc, Transition transition) {
    super.onTransition(bloc, transition);
    if (kDebugMode) {
      log('${bloc.runtimeType} $transition');
    }
  }

  @override
  void onChange(BlocBase bloc, Change change) {
    super.onChange(bloc, change);
    if (kDebugMode) {
      log('${bloc.runtimeType} $change');
    }
  }
}



abstract class DatabaseServices {
  Future<void> addData({
    required String path,
    required Map<String, dynamic> data,
    String? documentId,
  });
  Future<dynamic> getUserData({
    required String path,
    String? docuementId,
    Map<String, dynamic>? query,
  });
  Future<bool> checkIfDataExists({
    required String path,
    required String docuementId,
  });
}



import 'package:firebase_auth/firebase_auth.dart';
import 'package:flutter_facebook_auth/flutter_facebook_auth.dart';
import 'package:fruit_hub/core/errors/exceptions.dart';
import 'dart:developer';

import 'package:google_sign_in/google_sign_in.dart';

class FirebaseAuthService {
  Future deleteUser() async {
    await FirebaseAuth.instance.currentUser!.delete();
  }

  Future<User> createUserWithEmailAndPassword({
    required String email,
    required String password,
  }) async {
    try {
      final credential = await FirebaseAuth.instance
          .createUserWithEmailAndPassword(email: email, password: password);
      return credential.user!;
    } on FirebaseAuthException catch (e) {
      log(
        "Exception in FirebaseAuthService.createUserWithEmailAndPassword: ${e.toString()} and code is ${e.code}",
      );
      if (e.code == 'weak-password') {
        throw CustomException(message: 'Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø¶Ø¹ÙŠÙ Ø¬Ø¯Ø§Ù‹.');
      } else if (e.code == 'email-already-in-use') {
        throw CustomException(
          message: 'Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù…Ø³Ø¨Ù‚Ø§Ù‹. Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.',
        );
      } else if (e.code == 'network-request-failed') {
        throw CustomException(message: 'ØªØ§ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø§Ù†ØªØ±Ù†Øª.');
      } else {
        throw CustomException(
          message: 'Ù„Ù‚Ø¯ Ø­Ø¯Ø« Ø®Ø·Ø§Ù” Ù…Ø§. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø§Ø®Ø±Ù‰.',
        );
      }
    } catch (e) {
      log(
        "Exception in FirebaseAuthService.createUserWithEmailAndPassword: ${e.toString()}",
      );

      throw CustomException(
        message: 'Ù„Ù‚Ø¯ Ø­Ø¯Ø« Ø®Ø·Ø§Ù” Ù…Ø§. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø§Ø®Ø±Ù‰.',
      );
    }
  }

  Future<User> signInWithEmailAndPassword({
    required String email,
    required String password,
  }) async {
    try {
      final credential = await FirebaseAuth.instance.signInWithEmailAndPassword(
        email: email,
        password: password,
      );
      return credential.user!;
    } on FirebaseAuthException catch (e) {
      log(
        "Exception in FirebaseAuthService.signInWithEmailAndPassword: ${e.toString()} and code is ${e.code}",
      );
      if (e.code == 'user-not-found') {
        throw CustomException(
          message: 'Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø§Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­.',
        );
      } else if (e.code == 'wrong-password') {
        throw CustomException(
          message: 'Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø§Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­.',
        );
      } else if (e.code == 'network-request-failed') {
        throw CustomException(message: 'ØªØ§ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø§Ù†ØªØ±Ù†Øª.');
      } else {
        throw CustomException(
          message: 'Ù„Ù‚Ø¯ Ø­Ø¯Ø« Ø®Ø·Ø§Ù” Ù…Ø§. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø§Ø®Ø±Ù‰.',
        );
      }
    } catch (e) {
      log(
        "Exception in FirebaseAuthService.signInWithEmailAndPassword: ${e.toString()}",
      );

      throw CustomException(
        message: 'Ù„Ù‚Ø¯ Ø­Ø¯Ø« Ø®Ø·Ø§Ù” Ù…Ø§. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø§Ø®Ø±Ù‰.',
      );
    }
  }

  Future<User> signInWithGoogle() async {
    final GoogleSignInAccount? googleUser = await GoogleSignIn().signIn();

    final GoogleSignInAuthentication? googleAuth =
        await googleUser?.authentication;

    final credential = GoogleAuthProvider.credential(
      accessToken: googleAuth?.accessToken,
      idToken: googleAuth?.idToken,
    );

    return (await FirebaseAuth.instance.signInWithCredential(credential)).user!;
  }

  Future<User> signinWithFacebook() async {
    final LoginResult loginResult = await FacebookAuth.instance.login();

    final OAuthCredential facebookAuthCredential =
        FacebookAuthProvider.credential(loginResult.accessToken!.tokenString);

    return (await FirebaseAuth.instance.signInWithCredential(
      facebookAuthCredential,
    )).user!;
  }

  bool isLoggedIn() {
    return FirebaseAuth.instance.currentUser != null;
  }
}



import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:fruit_hub/core/services/database_services.dart';

class FirestoreServices implements DatabaseServices {
  FirebaseFirestore firestore = FirebaseFirestore.instance;

  @override
  Future<void> addData({
    required String path,
    required Map<String, dynamic> data,
    String? documentId,
  }) async {
    if (documentId != null) {
      firestore.collection(path).doc(documentId).set(data);
    } else {
      await firestore.collection(path).add(data);
    }
  }

  @override
  Future<dynamic> getUserData({
    required String path,
    String? docuementId,
    Map<String, dynamic>? query,
  }) async {
    if (docuementId != null) {
      var data = await firestore.collection(path).doc(docuementId).get();
      return data.data;
    } else {
      Query data = firestore.collection(path);
      if (query != null) {
        if (query['orderBy'] != null) {
          var orderByField = query['orderBy'];
          var descending = query['descending'];
          data = data.orderBy(orderByField, descending: descending);
        }
        if (query['limit'] != null) {
          var limit = query['limit'];
          data = data.limit(limit);
        }
      }
      var result = await data.get();
      return result.docs.map((e) => e.data()).toList();
    }
  }

  @override
  Future<bool> checkIfDataExists({
    required String path,
    required String docuementId,
  }) async {
    var data = await firestore.collection(path).doc(docuementId).get();
    return data.exists;
  }
}



import 'package:fruit_hub/core/repos/products_repo/products_repo.dart';
import 'package:fruit_hub/core/repos/products_repo/products_repo_impl.dart';
import 'package:fruit_hub/core/services/database_services.dart';
import 'package:fruit_hub/core/services/firebase_auth_service.dart';
import 'package:fruit_hub/core/services/firestore_services.dart';
import 'package:fruit_hub/features/auth/data/repos/auth_repo_impl.dart';
import 'package:fruit_hub/features/auth/domain/repos/auth_repo.dart';
import 'package:get_it/get_it.dart';

final getIt = GetIt.instance;

void setupGitIt() {
  getIt.registerSingleton<FirebaseAuthService>(FirebaseAuthService());
  getIt.registerSingleton<DatabaseServices>(FirestoreServices());
  GetIt.I.registerSingleton<AuthRepo>(
    AuthRepoImpl(
      firebaseAuthService: getIt<FirebaseAuthService>(),
      databaseServices: getIt<DatabaseServices>(),
    ),
  );
  GetIt.I.registerSingleton<ProductsRepo>(
    ProductsRepoImpl(getIt<DatabaseServices>()),
  );
}



import 'package:shared_preferences/shared_preferences.dart';

class Prefs {
  static late SharedPreferences _instance;

  static Future<void> init() async {
    _instance = await SharedPreferences.getInstance();
  }

  static setBool(String key, bool value) {
    _instance.setBool(key, value);
  }

  static getBool(String key) {
    return _instance.getBool(key) ?? false;
  }

  static setString(String key, String value) async {
    await _instance.setString(key, value);
  }

  static getString(String key) {
    return _instance.getString(key) ?? '';
  }
}



import 'package:flutter/material.dart';

abstract class AppColors {
  static const Color primaryColor = Color(0xff1F5E3B);
  static const Color lightPrimaryColor = Color(0xFF2D9F5D);
  static const Color secondaryColor = Color(0xFFF4A91F);
  static const Color lightSecondaryColor = Color(0xFFF8C76D);
}



import 'package:flutter/material.dart';

abstract class TextStyles {
  static const TextStyle bold13 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 13,
  );
  static const TextStyle bold23 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 23,
  );

  static const TextStyle semiBold13 = TextStyle(
    fontWeight: FontWeight.w600,
    fontSize: 13,
  );

  static const TextStyle regular13 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 13,
  );

  static const TextStyle bold16 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 16,
  );

  static const TextStyle bold19 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 19,
  );

  static const TextStyle semiBold16 = TextStyle(
    fontWeight: FontWeight.w600,
    fontSize: 16,
  );

  static const TextStyle bold28 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 28,
  );

  static const TextStyle regular22 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 22,
  );

  static const TextStyle semiBold11 = TextStyle(
    fontWeight: FontWeight.w600,
    fontSize: 11,
  );

  static const TextStyle medium15 = TextStyle(
    fontWeight: FontWeight.w500,
    fontSize: 15,
  );

  static const TextStyle regular26 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 26,
  );

  static const TextStyle regular16 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 16,
  );

  static const TextStyle regular11 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 11,
  );
}



// ignore_for_file: prefer_single_quotes
class Assets {
  Assets._();
  
  /// Assets for assetsImagesAppIcon
  /// assets/images/app_icon.png
  static const String assetsImagesAppIcon = "assets/images/app_icon.png";

  /// Assets for assetsImagesAppLoge
  /// assets/images/app_loge.svg
  static const String assetsImagesAppLoge = "assets/images/app_loge.svg";

  /// Assets for assetsImagesAppleIcon
  /// assets/images/apple_icon.svg
  static const String assetsImagesAppleIcon = "assets/images/apple_icon.svg";

  /// Assets for assetsImagesBottomSplashScreen
  /// assets/images/bottom_splash_screen.svg
  static const String assetsImagesBottomSplashScreen = "assets/images/bottom_splash_screen.svg";

  /// Assets for assetsImagesCheckbox
  /// assets/images/Checkbox.svg
  static const String assetsImagesCheckbox = "assets/images/Checkbox.svg";

  /// Assets for assetsImagesFacebookIcon
  /// assets/images/facebook_icon.svg
  static const String assetsImagesFacebookIcon = "assets/images/facebook_icon.svg";

  /// Assets for assetsImagesFilterImage
  /// assets/images/filter_image.svg
  static const String assetsImagesFilterImage = "assets/images/filter_image.svg";

  /// Assets for assetsImagesFiltter2
  /// assets/images/filtter2.svg
  static const String assetsImagesFiltter2 = "assets/images/filtter2.svg";

  /// Assets for assetsImagesFreepikPlantInject63
  /// assets/images/freepik--Plant--inject-63.svg
  static const String assetsImagesFreepikPlantInject63 = "assets/images/freepik--Plant--inject-63.svg";

  /// Assets for assetsImagesGoogleIcon
  /// assets/images/google_icon.svg
  static const String assetsImagesGoogleIcon = "assets/images/google_icon.svg";

  /// Assets for assetsImagesHome
  /// assets/images/home.svg
  static const String assetsImagesHome = "assets/images/home.svg";

  /// Assets for assetsImagesHomeActive
  /// assets/images/home_active.svg
  static const String assetsImagesHomeActive = "assets/images/home_active.svg";

  /// Assets for assetsImagesImagesFeaturedItemBackground
  /// assets/images/imagesFeaturedItemBackground.svg
  static const String assetsImagesImagesFeaturedItemBackground = "assets/images/imagesFeaturedItemBackground.svg";

  /// Assets for assetsImagesNotification
  /// assets/images/notification.svg
  static const String assetsImagesNotification = "assets/images/notification.svg";

  /// Assets for assetsImagesOnBoardingPage1ViewItem
  /// assets/images/on_boarding_page1_view_item.svg
  static const String assetsImagesOnBoardingPage1ViewItem = "assets/images/on_boarding_page1_view_item.svg";

  /// Assets for assetsImagesOnBoardingPage1ViewItemBackground
  /// assets/images/On_Boarding_Page1_View_Item_background.svg
  static const String assetsImagesOnBoardingPage1ViewItemBackground = "assets/images/On_Boarding_Page1_View_Item_background.svg";

  /// Assets for assetsImagesOnBoardingPage2ViewItem
  /// assets/images/on_boarding_page2_view_item.svg
  static const String assetsImagesOnBoardingPage2ViewItem = "assets/images/on_boarding_page2_view_item.svg";

  /// Assets for assetsImagesOnBoardingPage2ViewItemBackground
  /// assets/images/On_Boarding_Page2_View_Item_background.svg
  static const String assetsImagesOnBoardingPage2ViewItemBackground = "assets/images/On_Boarding_Page2_View_Item_background.svg";

  /// Assets for assetsImagesProductActive
  /// assets/images/product_active.svg
  static const String assetsImagesProductActive = "assets/images/product_active.svg";

  /// Assets for assetsImagesProducts
  /// assets/images/products.svg
  static const String assetsImagesProducts = "assets/images/products.svg";

  /// Assets for assetsImagesProfileImage
  /// assets/images/profile_image.png
  static const String assetsImagesProfileImage = "assets/images/profile_image.png";

  /// Assets for assetsImagesSearchIcon
  /// assets/images/search_icon.svg
  static const String assetsImagesSearchIcon = "assets/images/search_icon.svg";

  /// Assets for assetsImagesShoppingCart
  /// assets/images/shopping-cart.svg
  static const String assetsImagesShoppingCart = "assets/images/shopping-cart.svg";

  /// Assets for assetsImagesShoppingCartActive
  /// assets/images/shopping-cart_active.svg
  static const String assetsImagesShoppingCartActive = "assets/images/shopping-cart_active.svg";

  /// Assets for assetsImagesTrashimage
  /// assets/images/trashimage.svg
  static const String assetsImagesTrashimage = "assets/images/trashimage.svg";

  /// Assets for assetsImagesUser
  /// assets/images/user.svg
  static const String assetsImagesUser = "assets/images/user.svg";

  /// Assets for assetsImagesUserActive
  /// assets/images/user_active.svg
  static const String assetsImagesUserActive = "assets/images/user_active.svg";
}




class BackendEndpoints {
  static const addUserData = 'users';
  static const getUserData = 'users';
  static const isUserExists = 'users';
  static const getProducts = 'products';
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/notification_widget.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

AppBar buildAppBar(context, {required String title}) {
  return AppBar(
    backgroundColor: Colors.white,
    actions: const [
      Padding(
        padding: EdgeInsets.symmetric(horizontal: 16),
        child: NotificationWidget(),
      ),
    ],
    leading: GestureDetector(
      onTap: () {
        Navigator.pop(context);
      },
      child: const Icon(Icons.arrow_back_ios_new),
    ),
    centerTitle: true,
    title: Text(title, textAlign: TextAlign.center, style: TextStyles.bold19),
  );
}



import 'package:flutter/material.dart';

class CustomNetworkImage extends StatelessWidget {
  const CustomNetworkImage({super.key, required this.imageUrl});

  final String imageUrl;

  @override
  Widget build(BuildContext context) {
    return Image.network(imageUrl);
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/notification_widget.dart';

import '../utils/app_text_styles.dart';

AppBar buildAppBar() {
  return AppBar(
    actions: const [
      Padding(
        padding: EdgeInsets.symmetric(horizontal: 16),
        child: NotificationWidget(),
      ),
    ],
    backgroundColor: Colors.transparent,
    elevation: 0,
    title: const Text(
      'Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ù‹Ø§',
      textAlign: TextAlign.center,
      style: TextStyles.bold19,
    ),
  );
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/notification_widget.dart';

import '../utils/app_text_styles.dart';

AppBar buildAppBar(
  context, {
  required String title,
  bool showBackButton = true,
  bool showNotification = true,
}) {
  return AppBar(
    backgroundColor: Colors.white,
    actions: [
      if (showNotification)
        Padding(
          padding: EdgeInsets.symmetric(horizontal: 16),
          child: const NotificationWidget(),
        ),
    ],
    leading: Visibility(
      visible: showBackButton,
      child: GestureDetector(
        onTap: () {
          Navigator.pop(context);
        },
        child: const Icon(Icons.arrow_back_ios_new),
      ),
    ),
    centerTitle: true,
    title: Text(title, textAlign: TextAlign.center, style: TextStyles.bold19),
  );
}



import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class CustomButton extends StatelessWidget {
  const CustomButton({super.key, required this.onPressed, required this.text});
  final VoidCallback onPressed;
  final String text;
  @override
  Widget build(BuildContext context) {
    return SizedBox(
      width: double.infinity,
      height: 54,
      child: TextButton(
        style: TextButton.styleFrom(
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(16),
          ),
          backgroundColor: AppColors.primaryColor,
        ),
        onPressed: onPressed,
        child: Text(
          text,
          style: TextStyles.bold16.copyWith(color: Colors.white),
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';

class CustomErrorWidget extends StatelessWidget {
  const CustomErrorWidget({super.key, required this.text});
  final String text;
  @override
  Widget build(BuildContext context) {
    return Center(child: Text(text));
  }
}






import 'package:flutter/material.dart';
import 'package:fruit_hub/core/widgets/custom_text_field.dart';

class CustomPasswordField extends StatefulWidget {
  const CustomPasswordField({super.key, this.onSaved});
  final void Function(String?)? onSaved;

  @override
  State<CustomPasswordField> createState() => _CustomPasswordFieldState();
}

class _CustomPasswordFieldState extends State<CustomPasswordField> {
  bool obscureText = true;
  @override
  Widget build(BuildContext context) {
    return CustomTextFormField(
      onSaved: widget.onSaved,
      obscureText: obscureText,
      hintText: 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
      textInputType: TextInputType.visiblePassword,
      suffixIcon: GestureDetector(
        onTap: () {
          obscureText = !obscureText;
          setState(() {});
        },
        child:
            obscureText
                ? const Icon(Icons.visibility_off, color: Color(0xFFC9CECF))
                : const Icon(Icons.remove_red_eye, color: Color(0xFFC9CECF)),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:modal_progress_hud_nsn/modal_progress_hud_nsn.dart';

class CustomProgressHud extends StatelessWidget {
  const CustomProgressHud({
    super.key,
    required this.isLoading,
    required this.child,
  });

  final bool isLoading;
  final Widget child;
  @override
  Widget build(BuildContext context) {
    return ModalProgressHUD(inAsyncCall: isLoading, child: child);
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class CustomTextFormField extends StatelessWidget {
  const CustomTextFormField({
    super.key,
    required this.hintText,
    required this.textInputType,
    this.suffixIcon,
    this.onSaved,
    this.obscureText = false,
  });
  final String hintText;
  final TextInputType textInputType;
  final Widget? suffixIcon;
  final void Function(String?)? onSaved;
  final bool obscureText;
  @override
  Widget build(BuildContext context) {
    return TextFormField(
      obscureText: obscureText,
      onSaved: onSaved,
      validator: (value) {
        if (value == null || value.isEmpty) {
          return "Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ù…Ø·Ù„ÙˆØ¨";
        }
        return null;
      },
      keyboardType: textInputType,
      decoration: InputDecoration(
        suffixIcon: suffixIcon,
        hintStyle: TextStyles.bold13.copyWith(color: const Color(0xFF949D9E)),
        hintText: hintText,
        filled: true,
        fillColor: const Color(0xFFF9FAFA),
        border: buildBorder(),
        enabledBorder: buildBorder(),
        focusedBorder: buildBorder(),
      ),
    );
  }

  OutlineInputBorder buildBorder() {
    return OutlineInputBorder(
      borderRadius: BorderRadius.circular(4),
      borderSide: const BorderSide(width: 1, color: Color(0xFFE6E9E9)),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/entities/product_entity.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/core/utils/assets.dart';

class FruitItem extends StatelessWidget {
  const FruitItem({super.key, required this.productEntity});

  final ProductEntity productEntity;
  @override
  Widget build(BuildContext context) {
    return Container(
      decoration: ShapeDecoration(
        color: const Color(0xFFF3F5F7),
        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(4)),
      ),
      child: Stack(
        children: [
          Positioned(
            top: 0,
            right: 0,
            child: IconButton(
              onPressed: () {},
              icon: const Icon(Icons.favorite_outline),
            ),
          ),
          Positioned.fill(
            child: Column(
              children: [
                const SizedBox(height: 20),
                Flexible(child: Image.network(productEntity.imageUrl!)),
                const SizedBox(height: 24),
                ListTile(
                  title: Text(
                    productEntity.name,
                    textAlign: TextAlign.right,
                    style: TextStyles.semiBold16,
                  ),
                  subtitle: Text.rich(
                    TextSpan(
                      children: [
                        TextSpan(
                          text: '${productEntity.price}Ø¬Ù†ÙŠØ© ',
                          style: TextStyles.bold13.copyWith(
                            color: AppColors.secondaryColor,
                          ),
                        ),
                        TextSpan(
                          text: '/',
                          style: TextStyles.bold13.copyWith(
                            color: AppColors.lightSecondaryColor,
                          ),
                        ),
                        TextSpan(
                          text: ' ',
                          style: TextStyles.semiBold13.copyWith(
                            color: AppColors.secondaryColor,
                          ),
                        ),
                        TextSpan(
                          text: 'ÙƒÙŠÙ„Ùˆ',
                          style: TextStyles.semiBold13.copyWith(
                            color: AppColors.lightSecondaryColor,
                          ),
                        ),
                      ],
                    ),
                    textAlign: TextAlign.right,
                  ),
                  trailing: const CircleAvatar(
                    backgroundColor: AppColors.primaryColor,
                    child: Icon(Icons.add, color: Colors.white),
                  ),
                ),
              ],
            ),
          ),
        ],
      ),
    );
  }
}


Cancel

Send

ChatGPT said:
تمام 👍، وصلتني أول جزء من الكود، وده يشمل:

ملخص أول جزء:
الثوابت والمراجع العامة:

kHorizintalPadding, kTopPaddding, kIsOnBoardingViewSeen, kUserData

مساعدة في تخزين البيانات المحلية عبر SharedPreferences.

إعداد Firebase:

ملف firebase_options.dart لتحديد إعدادات Firebase لكل منصة.

Firebase.initializeApp(options: DefaultFirebaseOptions.currentPlatform); في main.dart.

App setup:

MaterialApp مع Theme و Localization.

شاشة البداية SplashView().

Entities و Models:

ProductEntity و ReviewEntity لتخزين بيانات المنتجات والتقييمات.

ProductModel و ReviewModel لتحويل البيانات بين JSON و Entities.

Dummy data لتجربة المنتجات بدون الحاجة للـ backend.

Repositories و Cubits:

ProductsRepo و ProductsRepoImpl للتعامل مع جلب المنتجات من Firebase.

ProductsCubit لإدارة الحالة باستخدام Bloc/Cubit.

Services:

FirebaseAuthService للمصادقة (email, Google, Facebook).

FirestoreServices للتعامل مع البيانات (إضافة، استعلام، تحقق من وجود البيانات).

Singleton setup عبر GetIt لتسهيل الوصول للخدمات في أي مكان.

Utilities:

Prefs للتخزين المحلي.

AppColors, TextStyles, Assets, BackendEndpoints.

Helper functions مثل buildSnackBar, getAvgRating.

UI Helpers:

NotificationWidget, buildAppBar, CustomNetworkImage.

ملاحظات مهمة عن المشروع من هذا الجزء:
المشروع يعتمد Clean Architecture:

Entities: نموذج بيانات أساسي.

Models: تحويل البيانات بين الـ API و Entities.

Repositories: للتعامل مع البيانات (Firebase هنا).

Cubit/Bloc: لإدارة الحالة.

Services: لتجريد الـ Firebase (Authentication + Firestore).

التطبيق تطبيق متجر الكتروني للمنتجات (مش دروس أو لعبة).

الهدف الرئيسي: تعلم التعامل مع Firebase/Firestore، وإدارة البيانات باستخدام Clean Architecture، Cubits، و Dependency Injection.

حاليا تستخدم Firebase لكل شيء، لكن بعد انتهاء الكورس تنوي التحويل إلى Supabase.

الجزء ده غطي أساسيات التطبيق الأساسي، الـ Entities، Models، Cubits، Services، والـ UI helpers.

✅ خطوة مقبلة: أنتظر الجزئين التاني والثالث عشان أربط الكود كله وأقدر أشرح كل شيء سطر سطر، وأبدأ أمثلة وأسئلة زي ما اتفقنا.

سؤال سريع عشان أتأكد إنك فاهم:

في الكود، إيه الفرق بين ProductEntity و ProductModel؟ ولماذا محتاجين الاثنين؟


You said:
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/assets.dart';

class NotificationWidget extends StatelessWidget {
  const NotificationWidget({super.key});

  @override
  Widget build(BuildContext context) {
    return Container(
      padding: const EdgeInsets.all(12),
      decoration: const ShapeDecoration(
        color: Color(0xFFEEF8ED),
        shape: OvalBorder(),
      ),
      child: SvgPicture.asset(Assets.assetsImagesNotification),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/core/utils/assets.dart';

class SearchTextField extends StatelessWidget {
  const SearchTextField({super.key});

  @override
  Widget build(BuildContext context) {
    return Container(
      decoration: const BoxDecoration(
        boxShadow: [
          BoxShadow(
            color: Color(0x0A000000),
            blurRadius: 9,
            offset: Offset(0, 2),
            spreadRadius: 0,
          ),
        ],
      ),
      child: TextField(
        keyboardType: TextInputType.text,
        decoration: InputDecoration(
          prefixIcon: Container(
            width: 20,
            child: Center(
              child: SvgPicture.asset(Assets.assetsImagesSearchIcon),
            ),
          ),
          suffixIcon: Container(
            width: 20,
            child: Center(
              child: SvgPicture.asset(Assets.assetsImagesFilterImage),
            ),
          ),
          hintStyle: TextStyles.regular13.copyWith(color: Colors.white),
          hintText: 'Ø§Ø¨Ø­Ø« Ø¹Ù†.......',
          filled: true,
          fillColor: const Color(0xFFF9FAFA),
          border: buildBorder(),
          enabledBorder: buildBorder(),
          focusedBorder: buildBorder(),
        ),
      ),
    );
  }

  OutlineInputBorder buildBorder() {
    return OutlineInputBorder(
      borderRadius: BorderRadius.circular(4),
      borderSide: const BorderSide(width: 1, color: Colors.white),
    );
  }
}



import 'package:firebase_auth/firebase_auth.dart';
import 'package:flutter/material.dart';
import 'package:fruit_hub/features/auth/domain/entites/user_entity.dart';

class UserModel extends UserEntity {
  UserModel({required super.name, required super.email, required super.uId});
  factory UserModel.fromFirebaseUser(User user) {
    return UserModel(
      name: user.displayName ?? '',
      email: user.email ?? '',
      uId: user.uid,
    );
  }
  factory UserModel.fromJson(Map<String, dynamic> map) {
    return UserModel(
      name: map['name'] ?? '',
      email: map['email'] ?? '',
      uId: map['uId'] ?? '',
    );
  }
  factory UserModel.fromEntity(UserEntity user) {
    return UserModel(name: user.name, email: user.email, uId: user.uId);
  }
  toMap() {
    return {'name': name, 'email': email, 'uId': uId};
  }
}



import 'dart:convert';
import 'dart:developer';

import 'package:dartz/dartz.dart';
import 'package:firebase_auth/firebase_auth.dart';

import 'package:fruit_hub/constants.dart';
import 'package:fruit_hub/core/errors/exceptions.dart';
import 'package:fruit_hub/core/errors/failures.dart';
import 'package:fruit_hub/core/services/database_services.dart';
import 'package:fruit_hub/core/services/firebase_auth_service.dart';
import 'package:fruit_hub/core/services/shared_preferences_singleton.dart';
import 'package:fruit_hub/core/utils/backend_endpoints.dart';
import 'package:fruit_hub/features/auth/data/models/user_model.dart';
import 'package:fruit_hub/features/auth/domain/entites/user_entity.dart';
import 'package:fruit_hub/features/auth/domain/repos/auth_repo.dart';

class AuthRepoImpl extends AuthRepo {
  final FirebaseAuthService firebaseAuthService;
  final DatabaseServices databaseServices;

  AuthRepoImpl({
    required this.databaseServices,
    required this.firebaseAuthService,
  });

  @override
  Future<Either<Failure, UserEntity>> createUserWithEmailAndPassword(
    String email,
    String password,
    String name,
  ) async {
    User? user;
    try {
      user = await firebaseAuthService.createUserWithEmailAndPassword(
        email: email,
        password: password,
      );

      final userEntity = UserEntity(name: name, email: email, uId: user.uid);

      await addUserData(user: userEntity);
      await saveUserData(user: userEntity);

      return right(userEntity);
    } catch (e) {
      await deleteUser(user);
      log('Signup error: $e');
      return left(ServerFailure('Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§'));
    }
  }

  @override
  Future<Either<Failure, UserEntity>> signInWithEmailAndPassword(
    String email,
    String password,
  ) async {
    try {
      final user = await firebaseAuthService.signInWithEmailAndPassword(
        email: email,
        password: password,
      );

      final userEntity = await _handleUserAfterAuth(user);

      return right(userEntity);
    } on CustomException catch (e) {
      return left(ServerFailure(e.message));
    } catch (e) {
      log('Signin error: $e');
      return left(ServerFailure('Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§'));
    }
  }

  @override
  Future<Either<Failure, UserEntity>> signinWithGoogle() async {
    User? user;
    try {
      user = await firebaseAuthService.signInWithGoogle();

      final userEntity = await _handleUserAfterAuth(user);

      return right(userEntity);
    } catch (e) {
      await deleteUser(user);
      log('Google signin error: $e');
      return left(ServerFailure('Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§'));
    }
  }

  @override
  Future<Either<Failure, UserEntity>> signinWithFacebook() async {
    User? user;
    try {
      user = await firebaseAuthService.signinWithFacebook();

      final userEntity = await _handleUserAfterAuth(user);

      return right(userEntity);
    } catch (e) {
      await deleteUser(user);
      log('Facebook signin error: $e');
      return left(ServerFailure('Ø­Ø¯Ø« Ø®Ø·Ø£ Ù…Ø§'));
    }
  }

  @override
  Future addUserData({required UserEntity user}) async {
    await databaseServices.addData(
      path: BackendEndpoints.addUserData,
      data: UserModel.fromEntity(user).toMap(),
      documentId: user.uId,
    );
  }

  @override
  Future<UserEntity> getUserData({required String uid}) async {
    final userData = await databaseServices.getUserData(
      path: BackendEndpoints.getUserData,
      docuementId: uid,
    );

    return UserModel.fromJson(userData);
  }

  Future saveUserData({required UserEntity user}) async {
    final jsonData = jsonEncode(UserModel.fromEntity(user).toMap());
    await Prefs.setString(kUserData, jsonData);
  }

  Future<UserEntity> _handleUserAfterAuth(User user) async {
    final userData = await databaseServices.getUserData(
      path: BackendEndpoints.getUserData,
      docuementId: user.uid,
    );

    late UserEntity userEntity;

    if (userData == null) {
      userEntity = UserModel.fromFirebaseUser(user);
      await addUserData(user: userEntity);
    } else {
      userEntity = UserModel.fromJson(userData);
    }

    await saveUserData(user: userEntity);

    return userEntity;
  }

  Future<void> deleteUser(User? user) async {
    if (user != null) {
      await firebaseAuthService.deleteUser();
    }
  }
}






class UserEntity {
  final String name;
  final String email;
  final String uId;

  UserEntity({required this.name, required this.email, required this.uId});
}



import 'package:dartz/dartz.dart';
import 'package:fruit_hub/core/errors/failures.dart';
import 'package:fruit_hub/features/auth/domain/entites/user_entity.dart';

abstract class AuthRepo {
  Future<Either<Failure, UserEntity>> createUserWithEmailAndPassword(
    String email,
    String password,
    String name,
  );
  Future<Either<Failure, UserEntity>> signInWithEmailAndPassword(
    String email,
    String password,
  );
  Future<Either<Failure, UserEntity>> signinWithGoogle();
  Future<Either<Failure, UserEntity>> signinWithFacebook();
  Future addUserData({required UserEntity user});
  Future<UserEntity> getUserData({required String uid});
}



import 'package:bloc/bloc.dart';
import 'package:fruit_hub/features/auth/domain/entites/user_entity.dart';
import 'package:fruit_hub/features/auth/domain/repos/auth_repo.dart';
import 'package:meta/meta.dart';

part 'signin_state.dart';

class SigninCubit extends Cubit<SigninState> {
  SigninCubit(this.authRepo) : super(SigninInitial());
  final AuthRepo authRepo;
  Future<void> signin(String email, String password) async {
    emit(SigninLoading());
    var result = await authRepo.signInWithEmailAndPassword(email, password);
    result.fold(
      (failure) => emit(SigninFailure(message: failure.message)),
      (userEntity) => emit(SigninSuccess(userEntity: userEntity)),
    );
  }

  Future<void> signinWithGoogle() async {
    emit(SigninLoading());
    var result = await authRepo.signinWithGoogle();
    result.fold(
      (failure) => emit(SigninFailure(message: failure.message)),
      (userEntity) => emit(SigninSuccess(userEntity: userEntity)),
    );
  }

  Future<void> signinWithFacebook() async {
    emit(SigninLoading());
    var result = await authRepo.signinWithFacebook();
    result.fold(
      (failure) => emit(SigninFailure(message: failure.message)),
      (userEntity) => emit(SigninSuccess(userEntity: userEntity)),
    );
  }
}



part of 'signin_cubit.dart';

@immutable
sealed class SigninState {}

final class SigninInitial extends SigninState {}

final class SigninLoading extends SigninState {}

final class SigninSuccess extends SigninState {
  final UserEntity userEntity;
  SigninSuccess({required this.userEntity});
}

final class SigninFailure extends SigninState {
  final String message;
  SigninFailure({required this.message});
}



import 'package:bloc/bloc.dart';
import 'package:fruit_hub/features/auth/domain/repos/auth_repo.dart';
import 'package:meta/meta.dart';
import 'package:fruit_hub/features/auth/domain/entites/user_entity.dart';
part 'signup_state.dart';

class SignupCubit extends Cubit<SignupState> {
  SignupCubit(this.authRepo) : super(SignupInitial());

  final AuthRepo authRepo;

  Future<void> createUserWithEmailAndPassword(
    String email,
    String password,
    String name,
  ) async {
    emit(SignupLoading());
    final result = await authRepo.createUserWithEmailAndPassword(
      email,
      password,
      name,
    );
    result.fold(
      (failure) => emit(SignupFailure(message: failure.message)),
      (userEntity) => emit(SignupSuccess(userEntity: userEntity)),
    );
  }
}



part of 'signup_cubit.dart';

@immutable
sealed class SignupState {}

final class SignupInitial extends SignupState {}

final class SignupLoading extends SignupState {}

final class SignupSuccess extends SignupState {
  final UserEntity userEntity;

  SignupSuccess({required this.userEntity});
}

final class SignupFailure extends SignupState {
  final String message;
  SignupFailure({required this.message});
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/core/services/git_it_services.dart';
import 'package:fruit_hub/core/utils/widgets/custom_app_bar.dart';
import 'package:fruit_hub/features/auth/domain/repos/auth_repo.dart';
import 'package:fruit_hub/features/auth/presentation/cubits/signin_cubit/cubit/signin_cubit.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/singin_view_body_bloc_consumer.dart';

class SigninView extends StatelessWidget {
  const SigninView({super.key});
  static const routeName = 'SigninView';
  @override
  Widget build(BuildContext context) {
    return BlocProvider(
      create: (context) => SigninCubit(getIt.get<AuthRepo>()),
      child: Scaffold(
        appBar: buildAppBar(context, title: 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„'),
        body: SinginViewBodyBlocConsumer(),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/services/git_it_services.dart';
import 'package:fruit_hub/core/utils/widgets/custom_app_bar.dart';
import 'package:fruit_hub/features/auth/domain/repos/auth_repo.dart';
import 'package:fruit_hub/features/auth/presentation/cubits/singup_cubit/cubit/signup_cubit.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/signup_view_body_bloc_consumer.dart';

class SignUpView extends StatelessWidget {
  const SignUpView({super.key});

  static const routeName = 'signup';

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: buildAppBar(context, title: 'Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯'),
      body: BlocProvider(
        create: (context) => SignupCubit(getIt<AuthRepo>()),
        child: SignupViewbodyBlocConsumer(),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/assets.dart';

class CustomCheckBox extends StatelessWidget {
  const CustomCheckBox({
    super.key,
    required this.isChecked,
    required this.onChecked,
  });
  final bool isChecked;
  final ValueChanged<bool> onChecked;
  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      onTap: () {
        onChecked(!isChecked);
      },
      child: AnimatedContainer(
        width: 24,
        height: 24,
        duration: const Duration(milliseconds: 100),
        decoration: ShapeDecoration(
          color: isChecked ? AppColors.primaryColor : Colors.white,
          shape: RoundedRectangleBorder(
            side: BorderSide(
              width: 1.50,
              color: isChecked ? Colors.transparent : const Color(0xFFDCDEDE),
            ),
            borderRadius: BorderRadius.circular(8),
          ),
        ),
        child:
            isChecked
                ? Padding(
                  padding: const EdgeInsets.all(2),
                  child: SvgPicture.asset(Assets.assetsImagesCheckbox),
                )
                : const SizedBox(),
      ),
    );
  }
}



import 'package:flutter/gestures.dart';
import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class IsHaveAnAccountWidget extends StatelessWidget {
  const IsHaveAnAccountWidget({
    super.key,
    required this.text1,
    required this.text2,
    required this.onTap,
  });

  final String text1;
  final String text2;
  final VoidCallback onTap;

  @override
  Widget build(BuildContext context) {
    return Text.rich(
      TextSpan(
        children: [
          TextSpan(
            text: text1,
            style: TextStyles.semiBold16.copyWith(
              color: const Color(0xFF949D9E),
            ),
          ),
          const TextSpan(text: ' '),
          TextSpan(
            recognizer: TapGestureRecognizer()..onTap = onTap,
            text: text2,
            style: TextStyles.semiBold16.copyWith(
              color: AppColors.primaryColor,
            ),
          ),
        ],
      ),
      textAlign: TextAlign.center,
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class OrDivider extends StatelessWidget {
  const OrDivider({super.key});

  @override
  Widget build(BuildContext context) {
    return const Row(
      children: [
        Expanded(child: Divider(color: Color(0xFFDCDEDE))),
        SizedBox(width: 18),
        Text('Ø£Ùˆ', textAlign: TextAlign.center, style: TextStyles.semiBold16),
        SizedBox(width: 18),
        Expanded(child: Divider(color: Color(0xFFDCDEDE))),
      ],
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/constants.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/core/utils/assets.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/widgets/custom_button.dart';
import 'package:fruit_hub/core/widgets/custom_password_field.dart';
import 'package:fruit_hub/core/widgets/custom_text_field.dart';
import 'package:fruit_hub/features/auth/presentation/cubits/signin_cubit/cubit/signin_cubit.dart';
import 'package:fruit_hub/features/auth/presentation/views/sign_up_view.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/is_have_account_widget.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/or_divider.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/social_signin_view_button.dart';

class SigninViewBody extends StatefulWidget {
  const SigninViewBody({super.key});

  @override
  State<SigninViewBody> createState() => _SigninViewBodyState();
}

class _SigninViewBodyState extends State<SigninViewBody> {
  AutovalidateMode autovalidateMode = AutovalidateMode.disabled;
  late String email, password;
  final GlobalKey<FormState> formKey = GlobalKey<FormState>();
  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.symmetric(horizontal: kHorizintalPadding),
      child: SingleChildScrollView(
        child: Form(
          key: formKey,
          autovalidateMode: autovalidateMode,
          child: Column(
            children: [
              SizedBox(height: 24),
              CustomTextFormField(
                onSaved: (value) {
                  email = value!;
                },
                hintText: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
                textInputType: TextInputType.emailAddress,
              ),
              const SizedBox(height: 16),
              CustomPasswordField(
                onSaved: (value) {
                  password = value!;
                },
              ),
              const SizedBox(height: 16),
              Row(
                mainAxisAlignment: MainAxisAlignment.end,
                children: [
                  Text(
                    'Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ',
                    style: TextStyles.semiBold13.copyWith(
                      color: AppColors.lightPrimaryColor,
                    ),
                  ),
                ],
              ),
              const SizedBox(height: 33),
              CustomButton(
                onPressed: () {
                  if (formKey.currentState!.validate()) {
                    formKey.currentState!.save();
                    context.read<SigninCubit>().signin(email, password);
                  } else {
                    autovalidateMode = AutovalidateMode.always;
                    setState(() {});
                  }
                },
                text: 'ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„',
              ),
              const SizedBox(height: 33),
              IsHaveAnAccountWidget(
                text1: 'Ù„Ø§ ØªÙ…ØªÙ„Ùƒ Ø­Ø³Ø§Ø¨ØŸ',
                text2: 'Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨',
                onTap: () {
                  Navigator.pushNamed(context, SignUpView.routeName);
                },
              ),
              const SizedBox(height: 33),
              const OrDivider(),
              const SizedBox(height: 16),
              SocialSigninViewButton(
                onPressed: () {
                  context.read<SigninCubit>().signinWithGoogle();
                },
                image: Assets.assetsImagesGoogleIcon,
                title: 'ØªØ³Ø¬ÙŠÙ„ Ø¨ÙˆØ§Ø³Ø·Ø© Ø¬ÙˆØ¬Ù„',
              ),
              const SizedBox(height: 16),
              SocialSigninViewButton(
                onPressed: () {
                  context.read<SigninCubit>().signinWithFacebook();
                },
                image: Assets.assetsImagesFacebookIcon,
                title: 'ØªØ³Ø¬ÙŠÙ„ Ø¨ÙˆØ§Ø³Ø·Ø© ÙÙŠØ³Ø¨ÙˆÙƒ',
              ),
            ],
          ),
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/core/helper_fun/build_snack_bar.dart';
import 'package:fruit_hub/core/widgets/custom_progress_hud.dart';
import 'package:fruit_hub/features/auth/presentation/cubits/singup_cubit/cubit/signup_cubit.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/sign_up_view_body.dart';

class SignupViewbodyBlocConsumer extends StatelessWidget {
  const SignupViewbodyBlocConsumer({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocConsumer<SignupCubit, SignupState>(
      listener: (context, state) {
        if (state is SignupSuccess) {
          Navigator.pop(context);
        }
        if (state is SignupFailure) {
          buildSnackBar(context, state.message);
        }
      },
      builder: (context, state) {
        return CustomProgressHud(
          isLoading: state is SignupLoading ? true : false,
          child: const SignUpViewBody(),
        );
      },
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/constants.dart';
import 'package:fruit_hub/core/helper_fun/build_snack_bar.dart';
import 'package:fruit_hub/core/widgets/custom_button.dart';
import 'package:fruit_hub/core/widgets/custom_password_field.dart';
import 'package:fruit_hub/core/widgets/custom_text_field.dart';
import 'package:fruit_hub/features/auth/presentation/cubits/singup_cubit/cubit/signup_cubit.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/is_have_account_widget.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/terms_and_conditions.dart';

class SignUpViewBody extends StatefulWidget {
  const SignUpViewBody({super.key});

  @override
  State<SignUpViewBody> createState() => _SignUpViewBodyState();
}

class _SignUpViewBodyState extends State<SignUpViewBody> {
  final GlobalKey<FormState> formkey = GlobalKey<FormState>();
  AutovalidateMode autoValidateMode = AutovalidateMode.disabled;
  late String email, userName, password;
  late bool isTermsAccepted = false;
  @override
  Widget build(BuildContext context) {
    return SingleChildScrollView(
      child: Padding(
        padding: const EdgeInsets.symmetric(horizontal: kHorizintalPadding),
        child: Form(
          key: formkey,
          autovalidateMode: autoValidateMode,
          child: Column(
            children: [
              SizedBox(height: 24),
              CustomTextFormField(
                onSaved: (value) {
                  userName = value!;
                },
                hintText: 'Ø§Ù„Ø§Ø³Ù… ÙƒØ§Ù…Ù„',
                textInputType: TextInputType.name,
              ),
              const SizedBox(height: 16),
              CustomTextFormField(
                onSaved: (value) {
                  email = value!;
                },

                hintText: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
                textInputType: TextInputType.emailAddress,
              ),
              const SizedBox(height: 16),
              CustomPasswordField(
                onSaved: (value) {
                  password = value!;
                },
              ),
              const SizedBox(height: 16),
              TermsAndConditionsWidget(
                onChecked: (value) {
                  isTermsAccepted = value;
                },
              ),
              const SizedBox(height: 30),
              CustomButton(
                onPressed: () {
                  if (formkey.currentState!.validate()) {
                    formkey.currentState!.save();
                    if (isTermsAccepted)
                      context
                          .read<SignupCubit>()
                          .createUserWithEmailAndPassword(
                            email,
                            password,
                            userName,
                          );
                    else {
                      buildSnackBar(
                        context,
                        "ÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø§Ø­ÙƒØ§Ù…",
                      );
                    }
                  } else {
                    setState(() {
                      autoValidateMode = AutovalidateMode.always;
                    });
                  }
                },
                text: "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨",
              ),
              const SizedBox(height: 26),
              IsHaveAnAccountWidget(
                text1: "ØªÙ…ØªÙ„Ùƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ",
                text2: "ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„",
                onTap: () {
                  Navigator.pop(context);
                },
              ),
            ],
          ),
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/core/helper_fun/build_snack_bar.dart';
import 'package:fruit_hub/core/widgets/custom_progress_hud.dart';
import 'package:fruit_hub/features/auth/presentation/cubits/signin_cubit/cubit/signin_cubit.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/signin_view_body.dart';
import 'package:fruit_hub/features/home/presentation/views/main_view.dart';

class SinginViewBodyBlocConsumer extends StatelessWidget {
  const SinginViewBodyBlocConsumer({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocConsumer<SigninCubit, SigninState>(
      listener: (context, state) {
        if (state is SigninSuccess) {
          Navigator.popAndPushNamed(context, MainView.routeName);
        }
        if (state is SigninFailure) {
          buildSnackBar(context, state.message);
        }
      },
      builder: (context, state) {
        return CustomProgressHud(
          isLoading: state is SigninLoading ? true : false,
          child: const SigninViewBody(),
        );
      },
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class SocialSigninViewButton extends StatelessWidget {
  const SocialSigninViewButton({
    super.key,
    required this.image,
    required this.title,
    required this.onPressed,
  });

  final String image;
  final String title;
  final VoidCallback onPressed;
  @override
  Widget build(BuildContext context) {
    return SizedBox(
      width: double.infinity,
      height: 56,
      child: TextButton(
        style: TextButton.styleFrom(
          shape: RoundedRectangleBorder(
            side: const BorderSide(color: Color(0xFFDCDEDE), width: 1),
            borderRadius: BorderRadius.circular(16),
          ),
        ),
        onPressed: onPressed,
        child: ListTile(
          visualDensity: const VisualDensity(
            vertical: VisualDensity.minimumDensity,
          ),
          leading: SvgPicture.asset(image),
          title: Text(
            title,
            textAlign: TextAlign.center,
            style: TextStyles.semiBold16,
          ),
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/features/auth/presentation/views/widgets/custom_check_box.dart';

class TermsAndConditionsWidget extends StatefulWidget {
  const TermsAndConditionsWidget({super.key, required this.onChecked});
  final ValueChanged<bool> onChecked;
  @override
  State<TermsAndConditionsWidget> createState() =>
      _TermsAndConditionsWidgetState();
}

class _TermsAndConditionsWidgetState extends State<TermsAndConditionsWidget> {
  bool isTermsAccepted = false;
  @override
  Widget build(BuildContext context) {
    return Row(
      children: [
        CustomCheckBox(
          onChecked: (value) {
            isTermsAccepted = value;
            widget.onChecked(value);
            setState(() {});
          },
          isChecked: isTermsAccepted,
        ),
        const SizedBox(width: 16),
        Expanded(
          child: Text.rich(
            TextSpan(
              children: [
                TextSpan(
                  text: 'Ù…Ù† Ø®Ù„Ø§Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ ØŒ ÙØ¥Ù†Ùƒ ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ ',
                  style: TextStyles.semiBold13.copyWith(
                    color: const Color(0xFF949D9E),
                  ),
                ),
                TextSpan(
                  text: 'Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…',
                  style: TextStyles.semiBold13.copyWith(
                    color: AppColors.lightPrimaryColor,
                  ),
                ),
                const TextSpan(text: ' ', style: TextStyles.semiBold13),
                TextSpan(
                  text: 'Ø§Ù„Ø®Ø§ØµØ©',
                  style: TextStyles.semiBold13.copyWith(
                    color: AppColors.lightPrimaryColor,
                  ),
                ),
                const TextSpan(text: ' ', style: TextStyles.semiBold13),
                TextSpan(
                  text: 'Ø¨Ù†Ø§',
                  style: TextStyles.semiBold13.copyWith(
                    color: AppColors.lightPrimaryColor,
                  ),
                ),
              ],
            ),
            textAlign: TextAlign.right,
          ),
        ),
      ],
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/widgets/custom_app_bar.dart';
import 'package:fruit_hub/features/best_selling/presentation/view/widgets/best_selling_view_body.dart';

class BestSellingView extends StatelessWidget {
  const BestSellingView({super.key});
  static const routeName = 'BestSellingView';
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: buildAppBar(context, title: 'Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ù‹Ø§'),
      body: const BestSellingViewBody(),
    );
  }
}



import 'package:flutter/material.dart';

class BestSellingViewBody extends StatelessWidget {
  const BestSellingViewBody({super.key});

  @override
  Widget build(BuildContext context) {
    return const Placeholder();
  }
}



import 'package:fruit_hub/core/utils/assets.dart';

class BottomNavigationBarEntity {
  final String activeImage, inActiveImage;
  final String name;

  BottomNavigationBarEntity({
    required this.activeImage,
    required this.inActiveImage,
    required this.name,
  });
}

List<BottomNavigationBarEntity> get bottomNavigationBarItems => [
  BottomNavigationBarEntity(
    activeImage: Assets.assetsImagesHomeActive,
    inActiveImage: Assets.assetsImagesHome,
    name: 'Ø§Ù„Ø±ÙŠÙ”ÙŠØ³ÙŠØ©',
  ),
  BottomNavigationBarEntity(
    activeImage: Assets.assetsImagesProductActive,
    inActiveImage: Assets.assetsImagesProducts,
    name: 'Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª',
  ),
  BottomNavigationBarEntity(
    activeImage: Assets.assetsImagesShoppingCartActive,
    inActiveImage: Assets.assetsImagesShoppingCart,
    name: 'Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚',
  ),
  BottomNavigationBarEntity(
    activeImage: Assets.assetsImagesUserActive,
    inActiveImage: Assets.assetsImagesUser,
    name: 'Ø­Ø³Ø§Ø¨ÙŠ',
  ),
];



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/cart_view_body.dart';

class CartView extends StatelessWidget {
  const CartView({super.key});

  @override
  Widget build(BuildContext context) {
    return CartViewBody();
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/home/presentation/views/cart_view.dart';
import 'package:fruit_hub/features/home/presentation/views/products_view.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/custom_bottom_navigation_bar.dart';
import 'widgets/home_view.dart';

class MainView extends StatefulWidget {
  const MainView({super.key});

  static const routeName = 'home_view';

  @override
  State<MainView> createState() => _MainViewState();
}

class _MainViewState extends State<MainView> {
  int currentViewIndex = 0;
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      bottomNavigationBar: CustomBottomNavigationBar(
        onItemTapped: (index) {
          currentViewIndex = index;

          setState(() {});
        },
      ),
      body: SafeArea(
        child: IndexedStack(
          index: currentViewIndex,
          children: const [HomeView(), ProductsView(), CartView()],
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/core/products_cubit/cubit/products_cubit.dart';
import 'package:fruit_hub/core/repos/products_repo/products_repo.dart';
import 'package:fruit_hub/core/services/git_it_services.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/products_view_body.dart';

class ProductsView extends StatelessWidget {
  const ProductsView({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocProvider(
      create: (context) => ProductsCubit(getIt.get<ProductsRepo>()),
      child: const ProductsViewBody(),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class ActiveItem extends StatelessWidget {
  const ActiveItem({super.key, required this.text, required this.image});

  final String text;
  final String image;
  @override
  Widget build(BuildContext context) {
    return Center(
      child: Container(
        padding: const EdgeInsets.only(left: 16),
        decoration: ShapeDecoration(
          color: const Color(0xFFEEEEEE),
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(30),
          ),
        ),
        child: Row(
          mainAxisSize: MainAxisSize.min,
          children: [
            Container(
              width: 30,
              height: 30,
              decoration: ShapeDecoration(
                color: const Color(0xFF1B5E37),
                shape: RoundedRectangleBorder(
                  borderRadius: BorderRadius.circular(30),
                ),
              ),
              child: Center(child: SvgPicture.asset(image)),
            ),
            const SizedBox(width: 4),
            Text(
              text,
              style: TextStyles.semiBold11.copyWith(
                color: AppColors.primaryColor,
              ),
            ),
          ],
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/features/best_selling/presentation/view/best_selling_view.dart';

class BestSellingHeader extends StatelessWidget {
  const BestSellingHeader({super.key});

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.symmetric(horizontal: 12.0),
      child: Row(
        mainAxisAlignment: MainAxisAlignment.spaceBetween,
        children: [
          Text(
            'Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ù‹Ø§',
            style: TextStyles.bold16.copyWith(color: const Color(0xFF0C0D0D)),
          ),
          GestureDetector(
            onTap: () {
              Navigator.of(context).popAndPushNamed(BestSellingView.routeName);
            },
            child: Text(
              'Ø§Ù„Ù…Ø²ÙŠØ¯',
              style: TextStyles.regular13.copyWith(
                color: const Color(0xFF949D9E),
              ),
            ),
          ),
        ],
      ),
    );
  }
}



import 'package:flutter/material.dart';

class CartHeader extends StatelessWidget {
  const CartHeader({super.key});

  @override
  Widget build(BuildContext context) {
    return Container(
      width: double.infinity,
      padding: const EdgeInsets.symmetric(vertical: 20),
      decoration: const BoxDecoration(color: Color(0xFFEBF9F1)),
      child: const Center(
        child: Text(
          'Ù„Ø¯ÙŠÙƒ 3 Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø³Ù„Ù‡ Ø§Ù„ØªØ³ÙˆÙ‚',
          style: TextStyle(
            color: Color(0xFF1B5E37),
            fontSize: 13,
            fontFamily: 'Cairo',
            fontWeight: FontWeight.w400,
            height: 0.12,
          ),
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/entities/product_entity.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/assets.dart';
import 'package:fruit_hub/core/utils/widgets/custom_network_image.dart';
import 'package:fruit_hub/features/auth/domain/entites/cart_entity.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/cart_item_action_buttons.dart';
import '../../../../../core/entities/product_entity.dart';
import '../../../../../core/utils/app_text_styles.dart';

class CartItem extends StatelessWidget {
  const CartItem({super.key, required this.cartEntity});
  final CartEntity cartEntity;
  @override
  Widget build(BuildContext context) {
    return IntrinsicHeight(
      child: Row(
        children: [
          Container(
            width: 73,
            height: 92,
            decoration: const BoxDecoration(color: Color(0xFFF3F5F7)),
            child: CustomNetworkImage(
              imageUrl: CartEntity.ProductEntity.imageUrl!,
            ),
          ),
          const SizedBox(width: 17),
          Expanded(
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                Row(
                  children: [
                    const Text('Ø¨Ø·ÙŠØ®', style: TextStyles.bold13),
                    const Spacer(),
                    GestureDetector(
                      onTap: () {},
                      child: SvgPicture.asset(Assets.assetsImagesTrashimage),
                    ),
                  ],
                ),
                Text(
                  '3 ÙƒÙ…',
                  textAlign: TextAlign.right,
                  style: TextStyles.regular13.copyWith(
                    color: AppColors.secondaryColor,
                  ),
                ),
                Row(
                  children: [
                    const CartItemActionButtons(),
                    const Spacer(),
                    Text(
                      '60 Ø¬Ù†ÙŠÙ‡ ',
                      style: TextStyles.bold16.copyWith(
                        color: AppColors.secondaryColor,
                      ),
                    ),
                  ],
                ),
              ],
            ),
          ),
        ],
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class CartItemActionButtons extends StatelessWidget {
  const CartItemActionButtons({super.key});

  @override
  Widget build(BuildContext context) {
    return Row(
      children: [
        CartItemActionButton(
          iconColor: Colors.white,
          icon: Icons.add,
          color: AppColors.primaryColor,
          onPressed: () {},
        ),
        const Padding(
          padding: EdgeInsets.symmetric(horizontal: 16),
          child: Text(
            '3',
            textAlign: TextAlign.center,
            style: TextStyles.bold16,
          ),
        ),
        CartItemActionButton(
          iconColor: Colors.grey,
          icon: Icons.remove,
          color: const Color(0xFFF3F5F7),
          onPressed: () {},
        ),
      ],
    );
  }
}

class CartItemActionButton extends StatelessWidget {
  const CartItemActionButton({
    super.key,
    required this.icon,
    required this.color,
    required this.onPressed,
    required this.iconColor,
  });

  final IconData icon;
  final Color iconColor;
  final Color color;
  final VoidCallback onPressed;
  @override
  Widget build(BuildContext context) {
    return Container(
      width: 24,
      height: 24,
      padding: const EdgeInsets.all(2),
      decoration: ShapeDecoration(
        color: color,
        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(100)),
      ),
      child: FittedBox(child: Icon(icon, color: iconColor)),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/auth/domain/entites/cart_entity.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/cart_item.dart';

class CartItemList extends StatelessWidget {
  const CartItemList({super.key, required this.cartItems});
  final List<CartEntity> cartItems;
  @override
  Widget build(BuildContext context) {
    return SliverList.separated(
      separatorBuilder: (context, index) => const CustomDivider(),
      itemCount: cartItems.length,
      itemBuilder: (context, index) {
        return CartItem(cartEntity: cartItems[index]);
      },
    );
  }
}

class CustomDivider extends StatelessWidget {
  const CustomDivider({super.key});

  @override
  Widget build(BuildContext context) {
    return const Divider(color: Color(0xFFF1F1F5), height: 22);
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/widgets/custom_button.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/cart_header.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/cart_item_list.dart';

import '../../../../../constants.dart';
import '../../../../../core/widgets/custom_app_bar.dart';

class CartViewBody extends StatelessWidget {
  const CartViewBody({super.key});

  @override
  Widget build(BuildContext context) {
    return Stack(
      children: [
        CustomScrollView(
          slivers: [
            SliverToBoxAdapter(
              child: Column(
                children: [
                  const SizedBox(height: kTopPaddding),
                  buildAppBar(context, title: 'Ø§Ù„Ø³Ù„Ø©', showNotification: false),
                  const SizedBox(height: 16),
                  const CartHeader(),
                  const SizedBox(height: 12),
                ],
              ),
            ),
            const SliverToBoxAdapter(child: CustomDivider()),
            const CartItemList(),
            const SliverToBoxAdapter(child: CustomDivider()),
          ],
        ),
        Positioned(
          left: 16,
          right: 16,
          bottom: MediaQuery.sizeOf(context).height * .07,
          child: CustomButton(onPressed: () {}, text: 'Ø§Ù„Ø¯ÙØ¹  120Ø¬Ù†ÙŠÙ‡'),
        ),
      ],
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/home/domain/entites/bottom_navigation_bar_entity.dart';
import 'naivation_bar_item.dart';

class CustomBottomNavigationBar extends StatefulWidget {
  const CustomBottomNavigationBar({super.key, required this.onItemTapped});
  final ValueChanged<int> onItemTapped;
  @override
  State<CustomBottomNavigationBar> createState() =>
      _CustomBottomNavigationBarState();
}

class _CustomBottomNavigationBarState extends State<CustomBottomNavigationBar> {
  int selectedIndex = 0;
  @override
  Widget build(BuildContext context) {
    return Container(
      width: 375,
      height: 70,
      decoration: const ShapeDecoration(
        color: Colors.white,
        shape: RoundedRectangleBorder(
          borderRadius: BorderRadius.only(
            topLeft: Radius.circular(30),
            topRight: Radius.circular(30),
          ),
        ),
        shadows: [
          BoxShadow(
            color: Color(0x19000000),
            blurRadius: 25,
            offset: Offset(0, -2),
            spreadRadius: 0,
          ),
        ],
      ),
      child: Row(
        children:
            bottomNavigationBarItems.asMap().entries.map((e) {
              var index = e.key;
              var entity = e.value;

              return Expanded(
                flex: index == selectedIndex ? 3 : 2,
                child: GestureDetector(
                  onTap: () {
                    setState(() {
                      selectedIndex = index;
                      widget.onItemTapped(index);
                    });
                  },
                  child: NaivgationBarItem(
                    isSelected: selectedIndex == index,
                    bottomNavigationBarEntity: entity,
                  ),
                ),
              );
            }).toList(),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/helper_fun/get_user.dart';
import 'package:fruit_hub/core/notification_widget.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/core/utils/assets.dart';

class CustomHomeAppbar extends StatelessWidget {
  const CustomHomeAppbar({super.key});

  @override
  Widget build(BuildContext context) {
    return ListTile(
      trailing: NotificationWidget(),
      leading: Image.asset(Assets.assetsImagesProfileImage),
      title: Text(
        'ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ± !..',
        textAlign: TextAlign.right,
        style: TextStyles.regular16.copyWith(color: const Color(0xFF949D9E)),
      ),
      subtitle: Text(
        getUser().name,
        textAlign: TextAlign.right,
        style: TextStyles.bold16,
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/core/utils/assets.dart';
import 'package:flutter_svg_provider/flutter_svg_provider.dart' as svg;
import 'package:fruit_hub/features/home/presentation/views/widgets/featured_item_button.dart';

class FeaturedItem extends StatelessWidget {
  const FeaturedItem({super.key});

  @override
  Widget build(BuildContext context) {
    var itemWidth = MediaQuery.sizeOf(context).width - 32;
    return ClipRRect(
      borderRadius: BorderRadius.circular(4),
      child: SizedBox(
        width: itemWidth,
        child: AspectRatio(
          aspectRatio: 342 / 158,
          child: Stack(
            children: [
              Positioned(
                left: 0,
                top: 0,
                bottom: 0,
                right: itemWidth * .4,
                child: SvgPicture.asset(
                  Assets.assetsImagesOnBoardingPage2ViewItem,
                  fit: BoxFit.fill,
                ),
              ),
              Container(
                width: itemWidth * .5,
                decoration: const BoxDecoration(
                  image: DecorationImage(
                    image: svg.Svg(
                      Assets.assetsImagesImagesFeaturedItemBackground,
                    ),
                    fit: BoxFit.fill,
                  ),
                ),
                child: Padding(
                  padding: const EdgeInsets.only(right: 33),
                  child: Column(
                    crossAxisAlignment: CrossAxisAlignment.start,
                    children: [
                      const SizedBox(height: 25),
                      Text(
                        'Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø¹ÙŠØ¯',
                        style: TextStyles.regular13.copyWith(
                          color: Colors.white,
                        ),
                      ),
                      const Spacer(),
                      Text(
                        'Ø®ØµÙ… 25%',
                        style: TextStyles.bold19.copyWith(color: Colors.white),
                      ),
                      const SizedBox(height: 11),
                      FeaturedItemButton(onPressed: () {}),
                      const SizedBox(height: 29),
                    ],
                  ),
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }
}




Cancel

Send

ChatGPT said:
تمام، شفت كل ملفات الكود اللي بعتهالي، هي عبارة عن مشروع Flutter كامل معتمِد على Bloc لإدارة الحالة، ويحتوي على:

شاشات تسجيل الدخول (SigninView) والتسجيل (SignUpView) مع الـ Cubit الخاص بكل منهم.

موديل UserModel وUserEntity للتعامل مع بيانات المستخدم.

Repository AuthRepoImpl للتعامل مع Firebase Auth و Firestore.

واجهات مختلفة مثل HomeView, ProductsView, CartView, BestSellingView.

Widgets مخصصة مثل CustomCheckBox, SearchTextField, NotificationWidget, SocialSigninViewButton, TermsAndConditionsWidget.

Navigation مع MainView يستخدم IndexedStack و CustomBottomNavigationBar.

لو تحب، أقدر أعمللك:

تلخيص الهيكل العام للمشروع (Screen flow، ملفات مهمة).

توضيح طريقة الربط بين Bloc و Repository.

اقتراح تحسينات على الكود الحالي لتقليل التكرار وزيادة الكفاءة.

أيهما تحب أبدأ بيه؟


You said:
فاضل الجزء الثالث كود الداش بورد اصبر ابعته ليك وراجع الاكواد مع بعض لتكون ملم بالمشروع كامل ملاحوظة كود الداش بورد هو تطبق منصل يكون لماك تالطيق لرفع بيانات المنتجات لتعلاض علي التطبيق الرئيسي

ChatGPT said:
تمام يا مومن 👍، ابعتلي كود الدashboard وكل الملفات الخاصة بيه، وأنا هراجع كل الأكواد مع بعض، بحيث يكون عندي صورة كاملة عن المشروع بالكامل، ونقدر بعد كده نفكر في أي تحسينات أو تعديلات، وكمان نفهم طريقة الربط بين الـ Dashboard والتطبيق الرئيسي لرفع وعرض بيانات المنتجات.

ابعت الكود كله مرة واحدة عشان أقدر أراجع بشكل متكامل.


You said:
import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';

class FeaturedItemButton extends StatelessWidget {
  const FeaturedItemButton({super.key, required this.onPressed});
  final VoidCallback onPressed;
  @override
  Widget build(BuildContext context) {
    return SizedBox(
      height: 32,
      child: TextButton(
        style: TextButton.styleFrom(
          shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(4)),
          backgroundColor: Colors.white,
        ),
        onPressed: onPressed,
        child: Padding(
          padding: const EdgeInsets.symmetric(horizontal: 24),
          child: FittedBox(
            child: Text(
              'ØªØ³ÙˆÙ‚ Ø§Ù„Ø§Ù†',
              style: TextStyles.bold13.copyWith(color: AppColors.primaryColor),
            ),
          ),
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/featured_item.dart';

class FeaturedList extends StatelessWidget {
  const FeaturedList({super.key});

  @override
  Widget build(BuildContext context) {
    return SingleChildScrollView(
      scrollDirection: Axis.horizontal,
      child: Row(
        children: List.generate(4, (index) {
          return Padding(
            padding: const EdgeInsets.symmetric(horizontal: 8.0),
            child: const FeaturedItem(),
          );
        }),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/core/products_cubit/cubit/products_cubit.dart';
import 'package:fruit_hub/core/repos/products_repo/products_repo.dart';
import 'package:fruit_hub/core/services/git_it_services.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/home_view_body.dart';

class HomeView extends StatelessWidget {
  const HomeView({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocProvider(
      create: (context) => ProductsCubit(getIt.get<ProductsRepo>()),
      child: HomeViewBody(),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/constants.dart';
import 'package:fruit_hub/core/products_cubit/cubit/products_cubit.dart';
import 'package:fruit_hub/core/widgets/search_text_field.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/products_grid_view.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/products_grid_view_bloc_builder.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/best_selling_header.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/custom_home_appbar.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/featured_list.dart';

class HomeViewBody extends StatefulWidget {
  const HomeViewBody({super.key});

  @override
  State<HomeViewBody> createState() => _HomeViewBodyState();
}

class _HomeViewBodyState extends State<HomeViewBody> {
  @override
  void initState() {
    context.read<ProductsCubit>().getBestSellingProducts();
    super.initState();
  }

  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.symmetric(horizontal: 16.0),
      child: CustomScrollView(
        slivers: [
          SliverToBoxAdapter(
            child: Column(
              children: [
                SizedBox(height: kTopPaddding),
                CustomHomeAppbar(),
                SizedBox(height: 16),
                SearchTextField(),
                SizedBox(height: 12),
                FeaturedList(),
                SizedBox(height: 12),
                BestSellingHeader(),
                SizedBox(height: 8),
              ],
            ),
          ),
          ProductsGridViewBlocBuilder(),
        ],
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class InActiveItem extends StatelessWidget {
  const InActiveItem({super.key, required this.image});

  final String image;
  @override
  Widget build(BuildContext context) {
    return Container(color: Colors.transparent, child: SvgPicture.asset(image));
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/in_active_item.dart';

import '../../../domain/entites/bottom_navigation_bar_entity.dart';
import 'active_item.dart';

class NaivgationBarItem extends StatelessWidget {
  const NaivgationBarItem({
    super.key,
    required this.isSelected,
    required this.bottomNavigationBarEntity,
  });

  final bool isSelected;
  final BottomNavigationBarEntity bottomNavigationBarEntity;
  @override
  Widget build(BuildContext context) {
    return isSelected
        ? ActiveItem(
          image: bottomNavigationBarEntity.activeImage,
          text: bottomNavigationBarEntity.name,
        )
        : InActiveItem(image: bottomNavigationBarEntity.inActiveImage);
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/entities/product_entity.dart';
import 'package:fruit_hub/core/widgets/fruit_item.dart';

class ProductsGridView extends StatelessWidget {
  const ProductsGridView({super.key, required this.products});

  final List<ProductEntity> products;
  @override
  Widget build(BuildContext context) {
    return SliverGrid.builder(
      itemCount: products.length,
      gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
        crossAxisCount: 2,
        childAspectRatio: 163 / 214,
        mainAxisSpacing: 8,
        crossAxisSpacing: 16,
      ),
      itemBuilder: (context, index) {
        return FruitItem(productEntity: products[index]);
      },
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/core/helper_fun/get_dummy_product.dart';
import 'package:fruit_hub/core/products_cubit/cubit/products_cubit.dart';
import 'package:fruit_hub/core/widgets/custom_error_widget.dart';
import 'package:skeletonizer/skeletonizer.dart';
import 'products_grid_view.dart';

class ProductsGridViewBlocBuilder extends StatelessWidget {
  const ProductsGridViewBlocBuilder({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocBuilder<ProductsCubit, ProductsState>(
      builder: (context, state) {
        if (state is ProductsSuccess) {
          return ProductsGridView(products: state.products);
        } else if (state is ProductsFailure) {
          return SliverToBoxAdapter(
            child: CustomErrorWidget(text: state.errMessage),
          );
        } else {
          return Skeletonizer.sliver(
            enabled: true,
            child: ProductsGridView(products: getDummyProducts()),
          );
        }
      },
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub/core/products_cubit/cubit/products_cubit.dart';
import 'package:fruit_hub/core/widgets/custom_app_bar.dart';
import 'package:fruit_hub/features/home/presentation/views/widgets/products_view_header.dart';
import '../../../../../constants.dart';
import '../../../../../core/widgets/search_text_field.dart';
import 'products_grid_view_bloc_builder.dart';

class ProductsViewBody extends StatefulWidget {
  const ProductsViewBody({super.key});

  @override
  State<ProductsViewBody> createState() => _ProductsViewBodyState();
}

class _ProductsViewBodyState extends State<ProductsViewBody> {
  @override
  void initState() {
    super.initState();
    context.read<ProductsCubit>().getProducts();
  }

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.symmetric(horizontal: 16),
      child: CustomScrollView(
        slivers: [
          SliverToBoxAdapter(
            child: Column(
              children: [
                const SizedBox(height: kTopPaddding),
                buildAppBar(context, title: "Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª", showBackButton: false),
                const SizedBox(height: 16),
                const SearchTextField(),
                const SizedBox(height: 12),
                ProductsViewHeader(
                  productsLength: context.read<ProductsCubit>().productsLength,
                ),
                const SizedBox(height: 8),
              ],
            ),
          ),
          const ProductsGridViewBlocBuilder(),
        ],
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/core/utils/assets.dart';

class ProductsViewHeader extends StatelessWidget {
  const ProductsViewHeader({super.key, required this.productsLength});
  final int productsLength;
  @override
  Widget build(BuildContext context) {
    return Row(
      children: [
        Text(
          '$productsLength Ù†ØªØ§Ø¦Ø¬',
          textAlign: TextAlign.right,
          style: TextStyles.bold16,
        ),
        const Spacer(),
        Container(
          padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),
          decoration: ShapeDecoration(
            color: Colors.white.withOpacity(0.10000000149011612),
            shape: RoundedRectangleBorder(
              side: const BorderSide(width: 1, color: Color(0x66CACECE)),
              borderRadius: BorderRadius.circular(4),
            ),
          ),
          child: SvgPicture.asset(Assets.assetsImagesFiltter2),
        ),
      ],
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/on_boarding/presentation/views/widgets/on_boarding_view_body.dart';

class OnBoardingView extends StatelessWidget {
  const OnBoardingView({super.key});
  static const String routeName = 'onBoardingView';
  @override
  Widget build(BuildContext context) {
    return Scaffold(body: SafeArea(child: const OnBoardingViewBody()));
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/utils/app_text_styles.dart';
import 'package:fruit_hub/core/utils/assets.dart';
import 'package:fruit_hub/features/on_boarding/presentation/views/widgets/on_boarding_page_view_item.dart';

class OnBoardingPageView extends StatelessWidget {
  const OnBoardingPageView({super.key, required this.pageController});
  final PageController pageController;
  @override
  Widget build(BuildContext context) {
    return Expanded(
      child: PageView(
        controller: pageController,
        children: [
          OnBoardingPageViewItem(
            isVisible: true,
            image: Assets.assetsImagesOnBoardingPage1ViewItem,
            backgroundimage:
                Assets.assetsImagesOnBoardingPage1ViewItemBackground,
            title: Row(
              mainAxisAlignment: MainAxisAlignment.center,
              children: [
                const Text('Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ', style: TextStyles.bold23),
                Text(
                  '  HUB',
                  style: TextStyles.bold23.copyWith(
                    color: AppColors.secondaryColor,
                  ),
                ),
                Text(
                  'Fruit',
                  style: TextStyles.bold23.copyWith(
                    color: AppColors.primaryColor,
                  ),
                ),
              ],
            ),
            subtitle:
                "Ø§ÙƒØªØ´Ù ØªØ¬Ø±Ø¨Ø© ØªØ³ÙˆÙ‚ ÙØ±ÙŠØ¯Ø© Ù…Ø¹ FruitHUB. Ø§Ø³ØªÙƒØ´Ù Ù…Ø¬Ù…ÙˆØ¹ØªÙ†Ø§ Ø§Ù„ÙˆØ§Ø³Ø¹Ø© Ù…Ù† Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ø§Ù„Ø·Ø§Ø²Ø¬Ø© Ø§Ù„Ù…Ù…ØªØ§Ø²Ø© ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ø±ÙˆØ¶ ÙˆØ§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¹Ø§Ù„ÙŠØ©.",
          ),
          OnBoardingPageViewItem(
            isVisible: false,
            image: Assets.assetsImagesOnBoardingPage2ViewItem,
            backgroundimage:
                Assets.assetsImagesOnBoardingPage2ViewItemBackground,
            subtitle:
                'Ù†Ù‚Ø¯Ù… Ù„Ùƒ Ø£ÙØ¶Ù„ Ø§Ù„ÙÙˆØ§ÙƒÙ‡ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø¨Ø¹Ù†Ø§ÙŠØ©. Ø§Ø·Ù„Ø¹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ù„ØµÙˆØ± ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù„ØªØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ§ÙƒÙ‡Ø© Ø§Ù„Ù…Ø«Ø§Ù„ÙŠØ©',
            title: Text(
              'Ø§Ø¨Ø­Ø« ÙˆØªØ³ÙˆÙ‚',
              textAlign: TextAlign.center,
              style: TextStyle(
                color: Color(0xFF0C0D0D),
                fontSize: 23,
                fontFamily: 'Cairo',
                fontWeight: FontWeight.w700,
                height: 0,
              ),
            ),
          ),
        ],
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/core/services/shared_preferences_singleton.dart';
import 'package:fruit_hub/features/auth/presentation/views/signin_view.dart';

class OnBoardingPageViewItem extends StatelessWidget {
  const OnBoardingPageViewItem({
    super.key,
    required this.title,
    required this.subtitle,
    required this.image,
    required this.backgroundimage,
    required this.isVisible,
  });

  final Widget title;
  final String subtitle;
  final String image;
  final String backgroundimage;
  final bool isVisible;

  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        SizedBox(
          height: MediaQuery.of(context).size.height * 0.5,
          width: double.infinity,
          child: Stack(
            children: [
              // Ø§Ù„Ø®Ù„ÙÙŠØ©
              Positioned.fill(
                child: SvgPicture.asset(backgroundimage, fit: BoxFit.fill),
              ),
              // Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ù…Ø­Ø§Ø°Ø§Ø© Bottom)
              Positioned(
                bottom: 0,
                left: 0,
                right: 0,
                child: SvgPicture.asset(image),
              ),
              // Ø²Ø± "ØªØ®Ø·"
              Visibility(
                visible: isVisible,
                child: GestureDetector(
                  onTap: () {
                    Prefs.setBool('KisOnBoardingViewSeen', true);
                    Navigator.of(context).popAndPushNamed(SigninView.routeName);
                  },
                  child: const Padding(
                    padding: EdgeInsets.all(16),
                    child: Text(
                      'ØªØ®Ø·',
                      style: TextStyle(color: Color(0xFF949D9E), fontSize: 13),
                    ),
                  ),
                ),
              ),
            ],
          ),
        ),

        // Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
        title,
        const SizedBox(height: 64),

        // Ø§Ù„Ù€ subtitle Ù…Ø¹ padding Ø£ÙƒØ¨Ø±
        Padding(
          padding: const EdgeInsets.symmetric(horizontal: 37),
          child: Text(
            subtitle,
            textAlign: TextAlign.center,
            style: const TextStyle(
              color: Color(0xFF4E5456),
              fontSize: 13,
              fontWeight: FontWeight.w600,
            ),
          ),
        ),
        const SizedBox(height: 24), // Ù…Ø³Ø§ÙØ© Ø¨Ø¹Ø¯ Ø§Ù„Ù€ subtitle
      ],
    );
  }
}



import 'package:dots_indicator/dots_indicator.dart';
import 'package:flutter/material.dart';
import 'package:fruit_hub/constants.dart';
import 'package:fruit_hub/core/services/shared_preferences_singleton.dart';
import 'package:fruit_hub/core/utils/app_colors.dart';
import 'package:fruit_hub/core/widgets/custom_button.dart';
import 'package:fruit_hub/features/auth/presentation/views/signin_view.dart';
import 'package:fruit_hub/features/on_boarding/presentation/views/widgets/on_boarding_page_view.dart';

class OnBoardingViewBody extends StatefulWidget {
  const OnBoardingViewBody({super.key});

  @override
  State<OnBoardingViewBody> createState() => _OnBoardingViewBodyState();
}

class _OnBoardingViewBodyState extends State<OnBoardingViewBody> {
  late PageController pageController;
  var currentPage = 0;
  @override
  void initState() {
    pageController = PageController();
    pageController.addListener(() {
      currentPage = pageController.page!.round();
      setState(() {});
    });
    super.initState();
  }

  @override
  void dispose() {
    pageController.dispose();
    super.dispose();
  }

  Widget build(BuildContext context) {
    return Column(
      children: [
        Expanded(child: OnBoardingPageView(pageController: pageController)),
        DotsIndicator(
          dotsCount: 2,
          decorator: DotsDecorator(
            activeColor: AppColors.primaryColor,
            color:
                currentPage == 1
                    ? AppColors.primaryColor
                    : AppColors.primaryColor.withOpacity(0.5),
          ),
        ),
        const SizedBox(height: 29),
        Visibility(
          visible: currentPage == 1 ? true : false,
          maintainSize: true,
          maintainAnimation: true,
          maintainState: true,
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: kHorizintalPadding),
            child: CustomButton(
              onPressed: () {
                Prefs.setBool('KisOnBoardingViewSeen', true);
                Navigator.of(
                  context,
                ).pushReplacementNamed(SigninView.routeName);
              },
              text: 'Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ù†',
            ),
          ),
        ),
        const SizedBox(height: 43),
      ],
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub/features/splash/presentation/views/widgets/splash_view_body.dart';

class SplashView extends StatelessWidget {
  const SplashView({super.key});
  static const routeName = "splash";
  @override
  Widget build(BuildContext context) {
    return const Scaffold(body: SplashViewBody());
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';
import 'package:fruit_hub/constants.dart';
import 'package:fruit_hub/core/services/firebase_auth_service.dart';
import 'package:fruit_hub/core/services/shared_preferences_singleton.dart';
import 'package:fruit_hub/core/utils/assets.dart';
import 'package:fruit_hub/features/auth/presentation/views/signin_view.dart';
import 'package:fruit_hub/features/home/presentation/views/main_view.dart';
import 'package:fruit_hub/features/on_boarding/presentation/views/on_boarding_view.dart';

class SplashViewBody extends StatefulWidget {
  const SplashViewBody({super.key});

  @override
  State<SplashViewBody> createState() => _SplashViewBodyState();
}

class _SplashViewBodyState extends State<SplashViewBody> {
  @override
  void initState() {
    excuteNaviagtion();
    super.initState();
  }

  @override
  Widget build(BuildContext context) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.stretch,
      mainAxisAlignment: MainAxisAlignment.spaceBetween,
      children: [
        Row(
          mainAxisAlignment: MainAxisAlignment.end,
          children: [SvgPicture.asset(Assets.assetsImagesFreepikPlantInject63)],
        ),
        SvgPicture.asset(Assets.assetsImagesAppLoge),
        SvgPicture.asset(
          Assets.assetsImagesBottomSplashScreen,
          fit: BoxFit.fill,
        ),
      ],
    );
  }

  void excuteNaviagtion() {
    bool isOnBoardingViewSeen = Prefs.getBool(kIsOnBoardingViewSeen);
    Future.delayed(const Duration(seconds: 1), () {
      if (isOnBoardingViewSeen) {
        var isLoggedIn = FirebaseAuthService().isLoggedIn();

        if (isLoggedIn) {
          Navigator.pushReplacementNamed(context, MainView.routeName);
        } else {
          Navigator.pushReplacementNamed(context, SigninView.routeName);
        }
      } else {
        Navigator.pushReplacementNamed(context, OnBoardingView.routeName);
      }
    });
  }
}



// GENERATED CODE - DO NOT MODIFY BY HAND
import 'package:flutter/material.dart';
import 'package:intl/intl.dart';
import 'intl/messages_all.dart';

// **************************************************************************
// Generator: Flutter Intl IDE plugin
// Made by Localizely
// **************************************************************************

// ignore_for_file: non_constant_identifier_names, lines_longer_than_80_chars
// ignore_for_file: join_return_with_assignment, prefer_final_in_for_each
// ignore_for_file: avoid_redundant_argument_values, avoid_escaping_inner_quotes

class S {
  S();

  static S? _current;

  static S get current {
    assert(
      _current != null,
      'No instance of S was loaded. Try to initialize the S delegate before accessing S.current.',
    );
    return _current!;
  }

  static const AppLocalizationDelegate delegate = AppLocalizationDelegate();

  static Future<S> load(Locale locale) {
    final name =
        (locale.countryCode?.isEmpty ?? false)
            ? locale.languageCode
            : locale.toString();
    final localeName = Intl.canonicalizedLocale(name);
    return initializeMessages(localeName).then((_) {
      Intl.defaultLocale = localeName;
      final instance = S();
      S._current = instance;

      return instance;
    });
  }

  static S of(BuildContext context) {
    final instance = S.maybeOf(context);
    assert(
      instance != null,
      'No instance of S present in the widget tree. Did you add S.delegate in localizationsDelegates?',
    );
    return instance!;
  }

  static S? maybeOf(BuildContext context) {
    return Localizations.of<S>(context, S);
  }

  /// `Flash`
  String get AppBarTitle {
    return Intl.message('Flash', name: 'AppBarTitle', desc: '', args: []);
  }

  /// `Currencies`
  String get currency {
    return Intl.message('Currencies', name: 'currency', desc: '', args: []);
  }

  /// `Crypto`
  String get cyrpto {
    return Intl.message('Crypto', name: 'cyrpto', desc: '', args: []);
  }

  /// `Metals`
  String get metal {
    return Intl.message('Metals', name: 'metal', desc: '', args: []);
  }

  /// `Gram`
  String get gram {
    return Intl.message('Gram', name: 'gram', desc: '', args: []);
  }

  /// `Ounce`
  String get Ounce {
    return Intl.message('Ounce', name: 'Ounce', desc: '', args: []);
  }

  /// `Kilogram`
  String get kilo {
    return Intl.message('Kilogram', name: 'kilo', desc: '', args: []);
  }

  /// `Tonne`
  String get tonne {
    return Intl.message('Tonne', name: 'tonne', desc: '', args: []);
  }

  /// `ID`
  String get id {
    return Intl.message('ID', name: 'id', desc: '', args: []);
  }

  /// `Symbol`
  String get symbol {
    return Intl.message('Symbol', name: 'symbol', desc: '', args: []);
  }

  /// `Name`
  String get name {
    return Intl.message('Name', name: 'name', desc: '', args: []);
  }

  /// `Image`
  String get image {
    return Intl.message('Image', name: 'image', desc: '', args: []);
  }

  /// `Current Price`
  String get currentPrice {
    return Intl.message(
      'Current Price',
      name: 'currentPrice',
      desc: '',
      args: [],
    );
  }

  /// `Market Cap`
  String get marketCap {
    return Intl.message('Market Cap', name: 'marketCap', desc: '', args: []);
  }

  /// `Market Cap Rank`
  String get marketCapRank {
    return Intl.message(
      'Market Cap Rank',
      name: 'marketCapRank',
      desc: '',
      args: [],
    );
  }

  /// `Fully Diluted Valuation`
  String get fullyDilutedValuation {
    return Intl.message(
      'Fully Diluted Valuation',
      name: 'fullyDilutedValuation',
      desc: '',
      args: [],
    );
  }

  /// `Total Volume`
  String get totalVolume {
    return Intl.message(
      'Total Volume',
      name: 'totalVolume',
      desc: '',
      args: [],
    );
  }

  /// `High 24h`
  String get high24h {
    return Intl.message('High 24h', name: 'high24h', desc: '', args: []);
  }

  /// `Low 24h`
  String get low24h {
    return Intl.message('Low 24h', name: 'low24h', desc: '', args: []);
  }

  /// `Price Change 24h`
  String get priceChange24h {
    return Intl.message(
      'Price Change 24h',
      name: 'priceChange24h',
      desc: '',
      args: [],
    );
  }

  /// `Price Change Percentage 24h`
  String get priceChangePercentage24h {
    return Intl.message(
      'Price Change Percentage 24h',
      name: 'priceChangePercentage24h',
      desc: '',
      args: [],
    );
  }

  /// `Market Cap Change 24h`
  String get marketCapChange24h {
    return Intl.message(
      'Market Cap Change 24h',
      name: 'marketCapChange24h',
      desc: '',
      args: [],
    );
  }

  /// `Market Cap Change Percentage 24h`
  String get marketCapChangePercentage24h {
    return Intl.message(
      'Market Cap Change Percentage 24h',
      name: 'marketCapChangePercentage24h',
      desc: '',
      args: [],
    );
  }

  /// `Circulating Supply`
  String get circulatingSupply {
    return Intl.message(
      'Circulating Supply',
      name: 'circulatingSupply',
      desc: '',
      args: [],
    );
  }

  /// `Total Supply`
  String get totalSupply {
    return Intl.message(
      'Total Supply',
      name: 'totalSupply',
      desc: '',
      args: [],
    );
  }

  /// `Max Supply`
  String get maxSupply {
    return Intl.message('Max Supply', name: 'maxSupply', desc: '', args: []);
  }

  /// `All-Time High`
  String get ath {
    return Intl.message('All-Time High', name: 'ath', desc: '', args: []);
  }

  /// `ATH Change Percentage`
  String get athChangePercentage {
    return Intl.message(
      'ATH Change Percentage',
      name: 'athChangePercentage',
      desc: '',
      args: [],
    );
  }

  /// `ATH Date`
  String get athDate {
    return Intl.message('ATH Date', name: 'athDate', desc: '', args: []);
  }

  /// `All-Time Low`
  String get atl {
    return Intl.message('All-Time Low', name: 'atl', desc: '', args: []);
  }

  /// `ATL Change Percentage`
  String get atlChangePercentage {
    return Intl.message(
      'ATL Change Percentage',
      name: 'atlChangePercentage',
      desc: '',
      args: [],
    );
  }

  /// `ATL Date`
  String get atlDate {
    return Intl.message('ATL Date', name: 'atlDate', desc: '', args: []);
  }

  /// `Last Updated`
  String get lastUpdated {
    return Intl.message(
      'Last Updated',
      name: 'lastUpdated',
      desc: '',
      args: [],
    );
  }

  /// `Search for a metal...`
  String get SearchForAMetal {
    return Intl.message(
      'Search for a metal...',
      name: 'SearchForAMetal',
      desc: '',
      args: [],
    );
  }

  /// `Amount`
  String get Amount {
    return Intl.message('Amount', name: 'Amount', desc: '', args: []);
  }

  /// `Search for a currency...`
  String get SearchForACurrency {
    return Intl.message(
      'Search for a currency...',
      name: 'SearchForACurrency',
      desc: '',
      args: [],
    );
  }

  /// `Search for a crypto...`
  String get SearchForACrypto {
    return Intl.message(
      'Search for a crypto...',
      name: 'SearchForACrypto',
      desc: '',
      args: [],
    );
  }

  /// `No cryptocurrencies found`
  String get NoCryptoFound {
    return Intl.message(
      'No cryptocurrencies found',
      name: 'NoCryptoFound',
      desc: '',
      args: [],
    );
  }

  /// `No metals found`
  String get NoMetalsFound {
    return Intl.message(
      'No metals found',
      name: 'NoMetalsFound',
      desc: '',
      args: [],
    );
  }

  /// `No currencies found`
  String get NoCurrenciesFound {
    return Intl.message(
      'No currencies found',
      name: 'NoCurrenciesFound',
      desc: '',
      args: [],
    );
  }

  /// `{currency}`
  String currency_name(Object currency) {
    return Intl.message(
      '$currency',
      name: 'currency_name',
      desc: '',
      args: [currency],
    );
  }

  /// `    comparison currency`
  String get comparison_currency {
    return Intl.message(
      '    comparison currency',
      name: 'comparison_currency',
      desc: '',
      args: [],
    );
  }

  /// `Ø¹Ø±Ø¨ÙŠ`
  String get current_language {
    return Intl.message('Ø¹Ø±Ø¨ÙŠ', name: 'current_language', desc: '', args: []);
  }
}

class AppLocalizationDelegate extends LocalizationsDelegate<S> {
  const AppLocalizationDelegate();

  List<Locale> get supportedLocales {
    return const <Locale>[
      Locale.fromSubtags(languageCode: 'en'),
      Locale.fromSubtags(languageCode: 'ar'),
    ];
  }

  @override
  bool isSupported(Locale locale) => _isSupported(locale);
  @override
  Future<S> load(Locale locale) => S.load(locale);
  @override
  bool shouldReload(AppLocalizationDelegate old) => false;

  bool _isSupported(Locale locale) {
    for (var supportedLocale in supportedLocales) {
      if (supportedLocale.languageCode == locale.languageCode) {
        return true;
      }
    }
    return false;
  }
}



// DO NOT EDIT. This is code generated via package:intl/generate_localized.dart
// This is a library that looks up messages for specific locales by
// delegating to the appropriate library.

// Ignore issues from commonly used lints in this file.
// ignore_for_file:implementation_imports, file_names, unnecessary_new
// ignore_for_file:unnecessary_brace_in_string_interps, directives_ordering
// ignore_for_file:argument_type_not_assignable, invalid_assignment
// ignore_for_file:prefer_single_quotes, prefer_generic_function_type_aliases
// ignore_for_file:comment_references

import 'dart:async';

import 'package:flutter/foundation.dart';
import 'package:intl/intl.dart';
import 'package:intl/message_lookup_by_library.dart';
import 'package:intl/src/intl_helpers.dart';

import 'messages_ar.dart' as messages_ar;
import 'messages_en.dart' as messages_en;

typedef Future<dynamic> LibraryLoader();
Map<String, LibraryLoader> _deferredLibraries = {
  'ar': () => new SynchronousFuture(null),
  'en': () => new SynchronousFuture(null),
};

MessageLookupByLibrary? _findExact(String localeName) {
  switch (localeName) {
    case 'ar':
      return messages_ar.messages;
    case 'en':
      return messages_en.messages;
    default:
      return null;
  }
}

/// User programs should call this before using [localeName] for messages.
Future<bool> initializeMessages(String localeName) {
  var availableLocale = Intl.verifiedLocale(
    localeName,
    (locale) => _deferredLibraries[locale] != null,
    onFailure: (_) => null,
  );
  if (availableLocale == null) {
    return new SynchronousFuture(false);
  }
  var lib = _deferredLibraries[availableLocale];
  lib == null ? new SynchronousFuture(false) : lib();
  initializeInternalMessageLookup(() => new CompositeMessageLookup());
  messageLookup.addLocale(availableLocale, _findGeneratedMessagesFor);
  return new SynchronousFuture(true);
}

bool _messagesExistFor(String locale) {
  try {
    return _findExact(locale) != null;
  } catch (e) {
    return false;
  }
}

MessageLookupByLibrary? _findGeneratedMessagesFor(String locale) {
  var actualLocale = Intl.verifiedLocale(
    locale,
    _messagesExistFor,
    onFailure: (_) => null,
  );
  if (actualLocale == null) return null;
  return _findExact(actualLocale);
}





Cancel

Send

ChatGPT said:
تمام يا مومن، شفت الكود اللي بعته، وده يغطي معظم الواجهة الرئيسية للتطبيق، OnBoarding، Splash Screen، إدارة المنتجات، وLocalization، وكل الـ Widgets الخاصة بالـ HomeView والـ ProductsView.

لو عايز نربط الموضوع كله بالـ Dashboard اللي هترفع منه بيانات المنتجات للتطبيق الرئيسي، يبقى نحتاج كمان:

كود الـ Dashboard نفسه (الـ admin panel أو واجهة رفع المنتجات).

أي ملفات API / Services مسؤولة عن رفع البيانات أو جلبها للتطبيق.

أي Models / Repositories خاصة بالمنتجات لو مختلفة عن الموجود.

ده مهم عشان نقدر نراجع المشروع كامل ونفهم طريقة الربط بين الـ Dashboard والتطبيق الرئيسي بشكل صحيح، ونتأكد إن كل شيء متناسق.

ابعتلي الجزء ده كمان، وبعدها هقدر أديك مراجعة كاملة لكل الأكواد مع بعض، ونقاط التحسين والتعديلات المحتملة.

تحب أجهزلك كمان مخطط بصري يوضح كل المكونات والربط بينهم عشان يكون واضح في دماغك؟


You said:
// File generated by FlutterFire CLI.
// ignore_for_file: type=lint
import 'package:firebase_core/firebase_core.dart' show FirebaseOptions;
import 'package:flutter/foundation.dart'
    show defaultTargetPlatform, kIsWeb, TargetPlatform;

/// Default [FirebaseOptions] for use with your Firebase apps.
///
/// Example:
/// ```dart
/// import 'firebase_options.dart';
/// // ...
/// await Firebase.initializeApp(
///   options: DefaultFirebaseOptions.currentPlatform,
/// );
/// ```
class DefaultFirebaseOptions {
  static FirebaseOptions get currentPlatform {
    if (kIsWeb) {
      return web;
    }
    switch (defaultTargetPlatform) {
      case TargetPlatform.android:
        return android;
      case TargetPlatform.iOS:
        return ios;
      case TargetPlatform.macOS:
        return macos;
      case TargetPlatform.windows:
        return windows;
      case TargetPlatform.linux:
        throw UnsupportedError(
          'DefaultFirebaseOptions have not been configured for linux - '
          'you can reconfigure this by running the FlutterFire CLI again.',
        );
      default:
        throw UnsupportedError(
          'DefaultFirebaseOptions are not supported for this platform.',
        );
    }
  }

  static const FirebaseOptions web = FirebaseOptions(
    apiKey: 'AIzaSyD52SOM5s1kUJapsbN6RzF9KNfJEaBjlUc',
    appId: '1:724668581926:web:6b919e2aae679a93abfee7',
    messagingSenderId: '724668581926',
    projectId: 'fruit-hub-69f2d',
    authDomain: 'fruit-hub-69f2d.firebaseapp.com',
    storageBucket: 'fruit-hub-69f2d.appspot.com',
    measurementId: 'G-55VVR3M7XH',
  );

  static const FirebaseOptions android = FirebaseOptions(
    apiKey: 'AIzaSyD8qTPbFyIT_DxYA_JH1w5JdKmPXKsvhKY',
    appId: '1:724668581926:android:d3f5696093ad5ca0abfee7',
    messagingSenderId: '724668581926',
    projectId: 'fruit-hub-69f2d',
    storageBucket: 'fruit-hub-69f2d.appspot.com',
  );

  static const FirebaseOptions ios = FirebaseOptions(
    apiKey: 'AIzaSyCze2RrLntOKDAlFGN4R2NNlpS-dmXcO_4',
    appId: '1:724668581926:ios:e10b8dd4a196e27cabfee7',
    messagingSenderId: '724668581926',
    projectId: 'fruit-hub-69f2d',
    storageBucket: 'fruit-hub-69f2d.appspot.com',
    androidClientId: '724668581926-93r04hfcjd0244p3gr54fhnbo8mnnvfs.apps.googleusercontent.com',
    iosClientId: '724668581926-elmvt0tat0u6b3sg3msm1b8oi5usr0hv.apps.googleusercontent.com',
    iosBundleId: 'com.example.fruitHubDashboard',
  );

  static const FirebaseOptions macos = FirebaseOptions(
    apiKey: 'AIzaSyCze2RrLntOKDAlFGN4R2NNlpS-dmXcO_4',
    appId: '1:724668581926:ios:e10b8dd4a196e27cabfee7',
    messagingSenderId: '724668581926',
    projectId: 'fruit-hub-69f2d',
    storageBucket: 'fruit-hub-69f2d.appspot.com',
    androidClientId: '724668581926-93r04hfcjd0244p3gr54fhnbo8mnnvfs.apps.googleusercontent.com',
    iosClientId: '724668581926-elmvt0tat0u6b3sg3msm1b8oi5usr0hv.apps.googleusercontent.com',
    iosBundleId: 'com.example.fruitHubDashboard',
  );

  static const FirebaseOptions windows = FirebaseOptions(
    apiKey: 'AIzaSyD52SOM5s1kUJapsbN6RzF9KNfJEaBjlUc',
    appId: '1:724668581926:web:20e05eca3d79d9e7abfee7',
    messagingSenderId: '724668581926',
    projectId: 'fruit-hub-69f2d',
    authDomain: 'fruit-hub-69f2d.firebaseapp.com',
    storageBucket: 'fruit-hub-69f2d.appspot.com',
    measurementId: 'G-LL1ZW8X34F',
  );
}



import 'package:firebase_core/firebase_core.dart';
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub_dashboard/core/helper_functions/on_generate_routes.dart';
import 'package:fruit_hub_dashboard/core/services/get_it_service.dart';
import 'package:fruit_hub_dashboard/core/services/supabase_stoarge.dart';
import 'package:fruit_hub_dashboard/features/dashboard/views/dashboard_view.dart';
import 'package:fruit_hub_dashboard/firebase_options.dart';
import 'package:supabase_flutter/supabase_flutter.dart';

import 'core/services/custom_bloc_observer.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();

  await SupabaseStoargeService.initSupabase();
  Bloc.observer = CustomBlocObserver();
  setupGetit();
  runApp(const MainApp());
}

class MainApp extends StatelessWidget {
  const MainApp({super.key});

  @override
  Widget build(BuildContext context) {
    return const MaterialApp(
      initialRoute: DashboardView.routeName,
      onGenerateRoute: onGenerateRoute,
    );
  }
}



class CustomException implements Exception {
  final String message;

  CustomException({required this.message});

  @override
  String toString() {
    return message;
  }
}



abstract class Failure {
  final String message;
  Failure(this.message);
}

class ServerFailure extends Failure {
  ServerFailure(super.message);
}



import 'package:flutter/material.dart';

void buildBar(BuildContext context, String message) {
  ScaffoldMessenger.of(context).showSnackBar(
    SnackBar(
      content: Text(message),
    ),
  );
}



import 'package:flutter/material.dart';
import 'package:fruit_hub_dashboard/features/add_product/presentation/views/add_product_view.dart';
import 'package:fruit_hub_dashboard/features/dashboard/views/dashboard_view.dart';

Route<dynamic> onGenerateRoute(RouteSettings settings) {
  switch (settings.name) {
    case DashboardView.routeName:
      return MaterialPageRoute(builder: (context) => const DashboardView());

    case AddProductView.routeName:
      return MaterialPageRoute(builder: (context) => const AddProductView());
    default:
      return MaterialPageRoute(builder: (context) => const Scaffold());
  }
}



import 'dart:io';

import 'package:dartz/dartz.dart';
import 'package:fruit_hub_dashboard/core/errors/failures.dart';

abstract class ImagesRepo 
{
  Future<Either<Failure, String>> uploadImage(File image);
}



import 'dart:io';

import 'package:dartz/dartz.dart';
import 'package:fruit_hub_dashboard/core/errors/failures.dart';
import 'package:fruit_hub_dashboard/core/repos/images_repo/images_repo.dart';
import 'package:fruit_hub_dashboard/core/services/stoarage_service.dart';
import 'package:fruit_hub_dashboard/core/utils/backend_endpoint.dart';

class ImagesRepoImpl implements ImagesRepo {
  final StoarageService stoarageService;

  ImagesRepoImpl(this.stoarageService);
  @override
  Future<Either<Failure, String>> uploadImage(File image) async {
    try {
      String url =
          await stoarageService.uploadFile(image, BackendEndpoint.images);
      return Right(url);
    } catch (e) {
      return Left(
        ServerFailure('Failed to uoload image'),
      );
    }
  }
}



import 'package:dartz/dartz.dart';
import 'package:fruit_hub_dashboard/core/errors/failures.dart';

import '../../../features/add_product/domain/entities/product_entity.dart';

abstract class ProductsRepo {
  Future<Either<Failure, void>> addProduct(ProductEntity addProductInputEntity);
}



import 'package:dartz/dartz.dart';
import 'package:fruit_hub_dashboard/core/repos/product_repo/products_repo.dart';
import 'package:fruit_hub_dashboard/core/services/data_service.dart';
import 'package:fruit_hub_dashboard/features/add_product/data/models/product_model.dart';
import 'package:fruit_hub_dashboard/features/add_product/domain/entities/product_entity.dart';

import '../../errors/failures.dart';
import '../../utils/backend_endpoint.dart';

class ProductsRepoImpl implements ProductsRepo {
  final DatabaseService databaseService;

  ProductsRepoImpl(this.databaseService);
  @override
  Future<Either<Failure, void>> addProduct(
      ProductEntity addProductInputEntity) async {
    try {
      await databaseService.addData(
        path: BackendEndpoint.productsCollection,
        data: ProductModel.fromEntity(addProductInputEntity).toJson(),
      );

      return const Right(null);
    } catch (e) {
      return Left(ServerFailure('Failed to add product'));
    }
  }
}



import 'dart:developer';

import 'package:bloc/bloc.dart';
import 'package:flutter/foundation.dart';
import 'package:flutter/material.dart';

class CustomBlocObserver extends BlocObserver {
  @override
  void onTransition(Bloc bloc, Transition transition) {
    super.onTransition(bloc, transition);
    if (kDebugMode) {
      log('${bloc.runtimeType} $transition');
    }
  }

  @override
  void onChange(BlocBase bloc, Change change) {
    super.onChange(bloc, change);
    if (kDebugMode) {
      log('${bloc.runtimeType} $change');
    }
  }
}




abstract class DatabaseService {
  Future<void> addData(
      {required String path,
      required Map<String, dynamic> data,
      String? documentId});
  Future<Map<String, dynamic>> getData({
    required String path,
    required String docuementId,
  });


  Future<bool> checkIfDataExists({required String path, required String docuementId});
}



import 'data_service.dart';

class FireStoreService implements DatabaseService {
  @override
  Future<void> addData(
      {required String path,
      required Map<String, dynamic> data,
      String? documentId}) {
    // TODO: implement addData
    throw UnimplementedError();
  }

  @override
  Future<bool> checkIfDataExists(
      {required String path, required String docuementId}) {
    // TODO: implement checkIfDataExists
    throw UnimplementedError();
  }

  @override
  Future<Map<String, dynamic>> getData(
      {required String path,  String? docuementId}) {
    // TODO: implement getData
    throw UnimplementedError();
  }
}



import 'dart:io';

import 'package:firebase_storage/firebase_storage.dart';
import 'package:fruit_hub_dashboard/core/services/stoarage_service.dart';
import 'package:path/path.dart' as b;

class FireStorage implements StoarageService {
  final stoargeReference = FirebaseStorage.instance.ref();
  @override
  Future<String> uploadFile(File file, String path) async {
    String fileName = b.basename(file.path);
    String extensionName = b.extension(file.path);
    var fileReference =
        stoargeReference.child('$path/$fileName.$extensionName');
    await fileReference.putFile(file);
    var fileUrl = fileReference.getDownloadURL();
    return fileUrl;
  }
}



import 'package:fruit_hub_dashboard/core/repos/images_repo/images_repo.dart';
import 'package:fruit_hub_dashboard/core/repos/images_repo/images_repo_impl.dart';
import 'package:fruit_hub_dashboard/core/repos/product_repo/products_repo.dart';
import 'package:fruit_hub_dashboard/core/repos/product_repo/products_repo_impl.dart';
import 'package:fruit_hub_dashboard/core/services/data_service.dart';
import 'package:fruit_hub_dashboard/core/services/fire_storage.dart';
import 'package:fruit_hub_dashboard/core/services/firestore_service.dart';
import 'package:fruit_hub_dashboard/core/services/stoarage_service.dart';
import 'package:fruit_hub_dashboard/core/services/supabase_stoarge.dart';
import 'package:get_it/get_it.dart';

final getIt = GetIt.instance;

void setupGetit() {
  getIt.registerSingleton<StoarageService>(SupabaseStoargeService());
  getIt.registerSingleton<DatabaseService>(FireStoreService());

  getIt.registerSingleton<ImagesRepo>(
      ImagesRepoImpl(getIt.get<StoarageService>()));
  getIt.registerSingleton<ProductsRepo>(
    ProductsRepoImpl(
      getIt.get<DatabaseService>(),
    ),
  );
}



import 'dart:io';

abstract class StoarageService {
  Future<String> uploadFile(File file , String path);
}



import 'dart:io';

import 'package:fruit_hub_dashboard/core/services/stoarage_service.dart';
import 'package:supabase_flutter/supabase_flutter.dart';
import 'package:path/path.dart' as b;

class SupabaseStoargeService implements StoarageService {
  static late Supabase _supabase;

  static initSupabase() async {
    _supabase = await Supabase.initialize(
      url: 'https://iwhxwcqfcpcblvdifidv.supabase.co',
      anonKey:
          'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml3aHh3Y3FmY3BjYmx2ZGlmaWR2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk2MjA0NzgsImV4cCI6MjA4NTE5NjQ3OH0.BZp9PXcXXOJbb5Npy3wra7JO6Ed0M-JrRqYXSQ8F83c',
    );
  }

  @override
  Future<String> uploadFile(File file, String path) async {
    String fileName = b.basenameWithoutExtension(file.path);
    String extensionName = b.extension(file.path);

    try {
      final result = await _supabase.client.storage
          .from('product-images')
          .upload('$path/$fileName$extensionName', file);
      return result;
    } on StorageException catch (e) {
      print('âŒ StorageException: ${e.message}');
      print('StatusCode: ${e.statusCode}');
      throw Exception('Storage Error ${e.statusCode}: ${e.message}');
    } catch (e) {
      print('âŒ Unknown error: $e');
      throw Exception('Unknown Error: $e');
    }
  }
}



import 'package:flutter/material.dart';

abstract class AppColors {
  static const Color primaryColor = Color(0xff1F5E3B);
  static const Color lightPrimaryColor = Color(0xFF2D9F5D);
  static const Color secondaryColor = Color(0xFFF4A91F);
  static const Color lightSecondaryColor = Color(0xFFF8C76D);
}



// ignore_for_file: prefer_single_quotes
class Assets {
  Assets._();
  
  /// Assets for imagesAppIcon
  /// assets/images/app_icon.png
  static const String imagesAppIcon = "assets/images/app_icon.png";

  /// Assets for imagesApplIcon
  /// assets/images/appl_icon.svg
  static const String imagesApplIcon = "assets/images/appl_icon.svg";

  /// Assets for imagesCheck
  /// assets/images/Check.svg
  static const String imagesCheck = "assets/images/Check.svg";

  /// Assets for imagesFacebookIcon
  /// assets/images/facebook_icon.svg
  static const String imagesFacebookIcon = "assets/images/facebook_icon.svg";

  /// Assets for imagesFeaturedItemBackground
  /// assets/images/featured_item_background.svg
  static const String imagesFeaturedItemBackground = "assets/images/featured_item_background.svg";

  /// Assets for imagesFilter
  /// assets/images/filter.svg
  static const String imagesFilter = "assets/images/filter.svg";

  /// Assets for imagesGoogleIcon
  /// assets/images/google_icon.svg
  static const String imagesGoogleIcon = "assets/images/google_icon.svg";

  /// Assets for imagesLogo
  /// assets/images/logo.svg
  static const String imagesLogo = "assets/images/logo.svg";

  /// Assets for imagesNotification
  /// assets/images/notification.svg
  static const String imagesNotification = "assets/images/notification.svg";

  /// Assets for imagesPageViewItem1BackgroundImage
  /// assets/images/page_view_item1_background_image.svg
  static const String imagesPageViewItem1BackgroundImage = "assets/images/page_view_item1_background_image.svg";

  /// Assets for imagesPageViewItem1Image
  /// assets/images/page_view_item1_image.svg
  static const String imagesPageViewItem1Image = "assets/images/page_view_item1_image.svg";

  /// Assets for imagesPageViewItem2BackgroundImage
  /// assets/images/page_view_item2_background_image.svg
  static const String imagesPageViewItem2BackgroundImage = "assets/images/page_view_item2_background_image.svg";

  /// Assets for imagesPageViewItem2Image
  /// assets/images/page_view_item2_image.svg
  static const String imagesPageViewItem2Image = "assets/images/page_view_item2_image.svg";

  /// Assets for imagesPlant
  /// assets/images/plant.svg
  static const String imagesPlant = "assets/images/plant.svg";

  /// Assets for imagesProfileImage
  /// assets/images/profile_image.png
  static const String imagesProfileImage = "assets/images/profile_image.png";

  /// Assets for imagesSearchIcon
  /// assets/images/search_icon.svg
  static const String imagesSearchIcon = "assets/images/search_icon.svg";

  /// Assets for imagesSplashBottom
  /// assets/images/splash_bottom.svg
  static const String imagesSplashBottom = "assets/images/splash_bottom.svg";

  /// Assets for imagesVector
  /// assets/images/Vector.svg
  static const String imagesVector = "assets/images/Vector.svg";

  /// Assets for imagesVuesaxBoldHome
  /// assets/images/vuesax/bold/home.svg
  static const String imagesVuesaxBoldHome = "assets/images/vuesax/bold/home.svg";

  /// Assets for imagesVuesaxBoldProducts
  /// assets/images/vuesax/bold/products.svg
  static const String imagesVuesaxBoldProducts = "assets/images/vuesax/bold/products.svg";

  /// Assets for imagesVuesaxBoldShoppingCart
  /// assets/images/vuesax/bold/shopping-cart.svg
  static const String imagesVuesaxBoldShoppingCart = "assets/images/vuesax/bold/shopping-cart.svg";

  /// Assets for imagesVuesaxBoldUser
  /// assets/images/vuesax/bold/user.svg
  static const String imagesVuesaxBoldUser = "assets/images/vuesax/bold/user.svg";

  /// Assets for imagesVuesaxOutlineHome
  /// assets/images/vuesax/outline/home.svg
  static const String imagesVuesaxOutlineHome = "assets/images/vuesax/outline/home.svg";

  /// Assets for imagesVuesaxOutlineProducts
  /// assets/images/vuesax/outline/products.svg
  static const String imagesVuesaxOutlineProducts = "assets/images/vuesax/outline/products.svg";

  /// Assets for imagesVuesaxOutlineShoppingCart
  /// assets/images/vuesax/outline/shopping-cart.svg
  static const String imagesVuesaxOutlineShoppingCart = "assets/images/vuesax/outline/shopping-cart.svg";

  /// Assets for imagesVuesaxOutlineUser
  /// assets/images/vuesax/outline/user.svg
  static const String imagesVuesaxOutlineUser = "assets/images/vuesax/outline/user.svg";

  /// Assets for imagesWatermelonTest
  /// assets/images/watermelon_test.png
  static const String imagesWatermelonTest = "assets/images/watermelon_test.png";
}




import 'package:flutter/material.dart';

abstract class TextStyles {
  static const TextStyle bold13 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 13,
  );
  static const TextStyle bold23 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 23,
  );

  static const TextStyle semiBold13 = TextStyle(
    fontWeight: FontWeight.w600,
    fontSize: 13,
  );

  static const TextStyle regular13 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 13,
  );

  static const TextStyle bold16 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 16,
  );

  static const TextStyle bold19 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 19,
  );

  static const TextStyle semiBold16 = TextStyle(
    fontWeight: FontWeight.w600,
    fontSize: 16,
  );

  static const TextStyle bold28 = TextStyle(
    fontWeight: FontWeight.bold,
    fontSize: 28,
  );

  static const TextStyle regular22 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 22,
  );

  static const TextStyle semiBold11 = TextStyle(
    fontWeight: FontWeight.w600,
    fontSize: 11,
  );

  static const TextStyle medium15 = TextStyle(
    fontWeight: FontWeight.w500,
    fontSize: 15,
  );

  static const TextStyle regular26 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 26,
  );

  static const TextStyle regular16 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 16,
  );

  static const TextStyle regular11 = TextStyle(
    fontWeight: FontWeight.normal,
    fontSize: 11,
  );
}



class BackendEndpoint {
  static const images = 'images';
  static const addUserData = 'users';
  static const getUsersData = 'users';
  static const isUserExists = 'users';
  static const productsCollection = 'products';
}



import 'package:flutter/material.dart';

AppBar buildAppBar(String text) {
  return AppBar(
    title: Text(
      text,
    ),
  );
}



import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';

import '../utils/app_colors.dart';
import '../utils/app_text_styles.dart';


class CustomButton extends StatelessWidget {
  const CustomButton({super.key, required this.onPressed, required this.text});
  final VoidCallback onPressed;
  final String text;
  @override
  Widget build(BuildContext context) {
    return SizedBox(
      width: double.infinity,
      height: 54,
      child: TextButton(
        style: TextButton.styleFrom(
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(
              16,
            ),
          ),
          backgroundColor: AppColors.primaryColor,
        ),
        onPressed: onPressed,
        child: Text(
          text,
          style: TextStyles.bold16.copyWith(
            color: Colors.white,
          ),
        ),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:modal_progress_hud_nsn/modal_progress_hud_nsn.dart';

class CustomProgressHud extends StatelessWidget {
  const CustomProgressHud(
      {super.key, required this.isLoading, required this.child});

  final bool isLoading;
  final Widget child;
  @override
  Widget build(BuildContext context) {
    return ModalProgressHUD(inAsyncCall: isLoading, child: child);
  }
}



import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

import '../utils/app_text_styles.dart';

class CustomTextFormField extends StatelessWidget {
  const CustomTextFormField(
      {super.key,
      required this.hintText,
      required this.textInputType,
      this.maxLines = 1,
      this.suffixIcon,
      this.onSaved,
      this.obscureText = false});
  final String hintText;
  final TextInputType textInputType;
  final int? maxLines;
  final Widget? suffixIcon;
  final void Function(String?)? onSaved;
  final bool obscureText;
  @override
  Widget build(BuildContext context) {
    return TextFormField(
      maxLines: maxLines,
      obscureText: obscureText,
      onSaved: onSaved,
      validator: (value) {
        if (value == null || value.isEmpty) {
          return 'Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ù…Ø·Ù„ÙˆØ¨';
        }
        return null;
      },
      keyboardType: textInputType,
      decoration: InputDecoration(
        suffixIcon: suffixIcon,
        hintStyle: TextStyles.bold13.copyWith(
          color: const Color(0xFF949D9E),
        ),
        hintText: hintText,
        filled: true,
        fillColor: const Color(0xFFF9FAFA),
        border: buildBorder(),
        enabledBorder: buildBorder(),
        focusedBorder: buildBorder(),
      ),
    );
  }

  OutlineInputBorder buildBorder() {
    return OutlineInputBorder(
      borderRadius: BorderRadius.circular(4),
      borderSide: const BorderSide(
        width: 1,
        color: Color(0xFFE6E9E9),
      ),
    );
  }
}



import 'dart:io';

import '../../domain/entities/product_entity.dart';
import 'review_model.dart';

class ProductModel {
  final String name;
  final String code;
  final String description;
  final num price;
  final File image;
  final bool isFeatured;
  String? imageUrl;
  final int expirationsMonths;
  final bool isOrganic;
  final int numberOfCalories;
  final num avgRating = 0;
  final num ratingCount = 0;
  final int unitAmount;
  final int sellingCount;
  final List<ReviewModel> reviews;
  ProductModel(
      {required this.name,
      required this.code,
      required this.description,
      required this.expirationsMonths,
      required this.numberOfCalories,
      required this.unitAmount,
      required this.reviews,
      required this.price,
      this.sellingCount = 0,
      required this.isOrganic,
      required this.image,
      required this.isFeatured,
      this.imageUrl});

  factory ProductModel.fromEntity(ProductEntity addProductInputEntity) {
    return ProductModel(
        reviews: addProductInputEntity.reviews
            .map((e) => ReviewModel.fromEntity(e))
            .toList(),
        name: addProductInputEntity.name,
        code: addProductInputEntity.code,
        description: addProductInputEntity.description,
        price: addProductInputEntity.price,
        isOrganic: addProductInputEntity.isOrganic,
        image: addProductInputEntity.image,
        expirationsMonths: addProductInputEntity.expirationsMonths,
        numberOfCalories: addProductInputEntity.numberOfCalories,
        unitAmount: addProductInputEntity.unitAmount,
        isFeatured: addProductInputEntity.isFeatured,
        imageUrl: addProductInputEntity.imageUrl);
  }

  toJson() {
    return {
      'name': name,
      'code': code,
      'sellingCount': sellingCount,
      'description': description,
      'price': price,
      'isFeatured': isFeatured,
      'imageUrl': imageUrl,
      'expirationsMonths': expirationsMonths,
      'numberOfCalories': numberOfCalories,
      'unitAmount': unitAmount,
      'isOrganic': isOrganic,
      'reviews': reviews.map((e) => e.toJson()).toList()
    };
  }
}



import '../../domain/entities/review_entity.dart';

class ReviewModel {
  final String name;
  final String image;
  final num ratting;
  final String date;
  final String reviewDescription;

  ReviewModel(
      {required this.name,
      required this.image,
      required this.ratting,
      required this.date,
      required this.reviewDescription});

  factory ReviewModel.fromEntity(ReviewEntity reviewEntity) {
    return ReviewModel(
        name: reviewEntity.name,
        image: reviewEntity.image,
        ratting: reviewEntity.ratting,
        date: reviewEntity.date,
        reviewDescription: reviewEntity.reviewDescription);
  }

  factory ReviewModel.fromJson(Map<String, dynamic> json) {
    return ReviewModel(
        name: json['name'],
        image: json['image'],
        ratting: json['ratting'],
        date: json['date'],
        reviewDescription: json['reviewDescription']);
  }
  toJson() {
    return {
      'name': name,
      'image': image,
      'ratting': ratting,
      'date': date,
      'reviewDescription': reviewDescription
    };
  }
}



import 'dart:io';

import 'package:fruit_hub_dashboard/features/add_product/domain/entities/review_entity.dart';

class ProductEntity {
  final String name;
  final String code;
  final String description;
  final num price;
  final File image;
  final bool isFeatured;
  String? imageUrl;
  final int expirationsMonths;
  final bool isOrganic;
  final int numberOfCalories;
  final num avgRating = 0;
  final num ratingCount = 0;
  final int unitAmount;
  final List<ReviewEntity> reviews;
  ProductEntity(
      {required this.name,
      required this.code,
      required this.description,
      required this.price,
      required this.reviews,
      required this.expirationsMonths,
      required this.numberOfCalories,
      required this.unitAmount,
      this.isOrganic = false,
      required this.image,
      required this.isFeatured,
      this.imageUrl});
}



class ReviewEntity {
  final String name;
  final String image;
  final num ratting;
  final String date;
  final String reviewDescription;

  ReviewEntity(
      {required this.name,
      required this.image,
      required this.ratting,
      required this.date,
      required this.reviewDescription});
}



import 'package:bloc/bloc.dart';
import 'package:fruit_hub_dashboard/core/repos/images_repo/images_repo.dart';
import 'package:fruit_hub_dashboard/core/repos/product_repo/products_repo.dart';
import 'package:meta/meta.dart';

import '../../../domain/entities/product_entity.dart';

part 'add_product_state.dart';

class AddProductCubit extends Cubit<AddProductState> {
  AddProductCubit(this.imagesRepo, this.productsRepo)
      : super(AddProductInitial());

  final ImagesRepo imagesRepo;
  final ProductsRepo productsRepo;

  Future<void> addProduct(ProductEntity addProductInputEntity) async {
    emit(AddProductLoading());
    var result = await imagesRepo.uploadImage(addProductInputEntity.image);
    result.fold(
      (f) {
        emit(
          AddProductFailure(f.message),
        );
      },
      (url) async {
        addProductInputEntity.imageUrl = url;
        var result = await productsRepo.addProduct(addProductInputEntity);
        result.fold(
          (f) {
            emit(
              AddProductFailure(f.message),
            );
          },
          (r) {
            emit(AddProductSucceess());
          },
        );
      },
    );
  }
}



part of 'add_product_cubit.dart';

@immutable
sealed class AddProductState {}

final class AddProductInitial extends AddProductState {}

final class AddProductLoading extends AddProductState {}

final class AddProductFailure extends AddProductState {
  final String errMessage;

  AddProductFailure(this.errMessage);
}

final class AddProductSucceess extends AddProductState {}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub_dashboard/features/add_product/presentation/manger/cubit/add_product_cubit.dart';
import 'package:fruit_hub_dashboard/features/add_product/presentation/views/widgets/add_product_view_body.dart';

import '../../../../core/repos/images_repo/images_repo.dart';
import '../../../../core/repos/product_repo/products_repo.dart';
import '../../../../core/services/get_it_service.dart';
import '../../../../core/widgets/build_app_bar.dart';
import 'widgets/add_product_view_body_bloc_builder.dart';

class AddProductView extends StatelessWidget {
  const AddProductView({super.key});

  static const routeName = 'add-product';
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: buildAppBar(
        'Add Product',
      ),
      body: BlocProvider(
        create: (context) => AddProductCubit(
          getIt.get<ImagesRepo>(),
          getIt.get<ProductsRepo>(),
        ),
        child: const AddProductsViewBodyBlocBuilder(),
      ),
    );
  }
}



import 'dart:io';

import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub_dashboard/core/widgets/custom_button.dart';
import 'package:fruit_hub_dashboard/core/widgets/custom_text_field.dart';
import 'package:fruit_hub_dashboard/features/add_product/domain/entities/product_entity.dart';
import 'package:fruit_hub_dashboard/features/add_product/domain/entities/review_entity.dart';
import 'package:fruit_hub_dashboard/features/add_product/presentation/manger/cubit/add_product_cubit.dart';
import 'package:fruit_hub_dashboard/features/add_product/presentation/views/widgets/custom_check_box.dart';
import 'package:fruit_hub_dashboard/features/add_product/presentation/views/widgets/image_field.dart';
import 'package:fruit_hub_dashboard/features/add_product/presentation/views/widgets/is_featured_check_box.dart';
import 'package:fruit_hub_dashboard/features/add_product/presentation/views/widgets/is_organic_check_box.dart';

class AddProductViewBody extends StatefulWidget {
  const AddProductViewBody({super.key});

  @override
  State<AddProductViewBody> createState() => _AddProductViewBodyState();
}

class _AddProductViewBodyState extends State<AddProductViewBody> {
  final GlobalKey<FormState> _formKey = GlobalKey<FormState>();
  AutovalidateMode autovalidateMode = AutovalidateMode.disabled;

  late String name, code, description;
  late num price, expirationMonths, numberOfCalories, unitAmount;
  File? image;
  bool isFeatured = false;
  bool isOrganic = false;
  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.symmetric(horizontal: 16),
      child: SingleChildScrollView(
        child: Form(
          key: _formKey,
          autovalidateMode: autovalidateMode,
          child: Column(
            children: [
              CustomTextFormField(
                onSaved: (value) {
                  name = value!;
                },
                hintText: 'Product Name',
                textInputType: TextInputType.text,
              ),
              const SizedBox(
                height: 16,
              ),
              CustomTextFormField(
                onSaved: (value) {
                  price = num.parse(value!);
                },
                hintText: 'Product Price',
                textInputType: TextInputType.number,
              ),
              const SizedBox(
                height: 16,
              ),
              CustomTextFormField(
                onSaved: (value) {
                  expirationMonths = num.parse(value!);
                },
                hintText: 'Expiration Months',
                textInputType: TextInputType.number,
              ),
              const SizedBox(
                height: 16,
              ),
              CustomTextFormField(
                onSaved: (value) {
                  numberOfCalories = num.parse(value!);
                },
                hintText: 'Number Of Calories',
                textInputType: TextInputType.number,
              ),
              const SizedBox(
                height: 16,
              ),
              CustomTextFormField(
                onSaved: (value) {
                  unitAmount = num.parse(value!);
                },
                hintText: 'Unit Amont',
                textInputType: TextInputType.number,
              ),
              const SizedBox(
                height: 16,
              ),
              CustomTextFormField(
                onSaved: (value) {
                  code = value!.toLowerCase();
                },
                hintText: 'Product Code',
                textInputType: TextInputType.number,
              ),
              const SizedBox(
                height: 16,
              ),
              CustomTextFormField(
                onSaved: (value) {
                  description = value!;
                },
                hintText: 'Product Description',
                textInputType: TextInputType.text,
                maxLines: 5,
              ),
              const SizedBox(
                height: 16,
              ),
              IsOrganciCheckBox(
                onChanged: (value) {
                  isOrganic = value;
                },
              ),
              const SizedBox(
                height: 16,
              ),
              IsFeaturedCheckBox(
                onChanged: (value) {
                  isFeatured = value;
                },
              ),
              const SizedBox(
                height: 16,
              ),
              ImageField(
                onFileChanged: (image) {
                  this.image = image;
                },
              ),
              const SizedBox(
                height: 24,
              ),
              CustomButton(
                onPressed: () {
                  if (image != null) {
                    if (_formKey.currentState!.validate()) {
                      _formKey.currentState!.save();
                      ProductEntity input = ProductEntity(
                        name: name,
                        reviews: [
                          ReviewEntity(
                            name: 'tharwat',
                            image:
                                'https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.pexels.com%2Fsearch%2Fbeautiful%2F&psig=AOvVaw19xjUBre0RXfV2IZ-cEAEV&ust=1726749821993000&source=images&cd=vfe&opi=89978449&ved=0CBEQjRxqFwoTCPCJ3L_CzIgDFQAAAAAdAAAAABAE',
                            ratting: 5,
                            date: DateTime.now().toIso8601String(),
                            reviewDescription: 'Nice product',
                          )
                        ],
                        isOrganic: isOrganic,
                        code: code,
                        description: description,
                        expirationsMonths: expirationMonths.toInt(),
                        numberOfCalories: numberOfCalories.toInt(),
                        unitAmount: unitAmount.toInt(),
                        price: price,
                        image: image!,
                        isFeatured: isFeatured,
                      );

                      context.read<AddProductCubit>().addProduct(input);
                    } else {
                      autovalidateMode = AutovalidateMode.always;
                      setState(() {});
                    }
                  } else {
                    showError(context);
                  }
                },
                text: 'Add Product',
              ),
              const SizedBox(
                height: 24,
              ),
            ],
          ),
        ),
      ),
    );
  }

  void showError(BuildContext context) {
    ScaffoldMessenger.of(context).showSnackBar(
      const SnackBar(
        content: Text('Please select an image'),
      ),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:fruit_hub_dashboard/core/helper_functions/build_error_bar.dart';
import 'package:fruit_hub_dashboard/core/widgets/custom_progress_hud.dart';
import 'package:fruit_hub_dashboard/features/add_product/presentation/manger/cubit/add_product_cubit.dart';

import 'add_product_view_body.dart';

class AddProductsViewBodyBlocBuilder extends StatelessWidget {
  const AddProductsViewBodyBlocBuilder({
    super.key,
  });

  @override
  Widget build(BuildContext context) {
    return BlocConsumer<AddProductCubit, AddProductState>(
      listener: (context, state) {
        if (state is AddProductSucceess) {
          buildBar(context, 'Product added successfully');
        }
        if (state is AddProductFailure) {
          buildBar(context, state.errMessage);
        }
      },
      builder: (context, state) {
        return CustomProgressHud(
          isLoading: state is AddProductLoading,
          child: const AddProductViewBody(),
        );
      },
    );
  }
}



import 'package:flutter/material.dart';

import '../../../../../core/utils/app_colors.dart';

class CustomCheckBox extends StatelessWidget {
  const CustomCheckBox(
      {super.key, required this.isChecked, required this.onChecked});
  final bool isChecked;
  final ValueChanged<bool> onChecked;
  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      onTap: () {
        onChecked(!isChecked);
      },
      child: AnimatedContainer(
        width: 24,
        height: 24,
        duration: const Duration(milliseconds: 100),
        decoration: ShapeDecoration(
          color: isChecked ? AppColors.primaryColor : Colors.white,
          shape: RoundedRectangleBorder(
            side: BorderSide(
              width: 1.50,
              color: isChecked ? Colors.transparent : const Color(0xFFDCDEDE),
            ),
            borderRadius: BorderRadius.circular(8),
          ),
        ),
        child: isChecked
            ? const Icon(
                Icons.check,
                color: Colors.white,
              )
            : const SizedBox(),
      ),
    );
  }
}



import 'dart:io';

import 'package:flutter/material.dart';
import 'package:image_picker/image_picker.dart';
import 'package:skeletonizer/skeletonizer.dart';

class ImageField extends StatefulWidget {
  const ImageField({super.key, required this.onFileChanged});
  final ValueChanged<File?> onFileChanged;
  @override
  State<ImageField> createState() => _ImageFieldState();
}

class _ImageFieldState extends State<ImageField> {
  bool isLoading = false;
  File? fileImage;
  @override
  Widget build(BuildContext context) {
    return Skeletonizer(
      enabled: isLoading,
      child: GestureDetector(
        onTap: () async {
          isLoading = true;
          setState(() {});
          try {
            await prickImage();
          } catch (e) {
            isLoading = false;
            setState(() {});
          }
          isLoading = false;
          setState(() {});
        },
        child: Stack(
          children: [
            Container(
              width: double.infinity,
              decoration: BoxDecoration(
                  borderRadius: BorderRadius.circular(
                    16,
                  ),
                  border: Border.all(
                    color: Colors.grey,
                  )),
              child: fileImage != null
                  ? ClipRRect(
                      borderRadius: BorderRadius.circular(16),
                      child: Image.file(fileImage!))
                  : const Icon(
                      Icons.image_outlined,
                      size: 180,
                    ),
            ),
            Visibility(
              visible: fileImage != null,
              child: IconButton(
                onPressed: () {
                  fileImage = null;
                  widget.onFileChanged(fileImage);
                  setState(() {});
                },
                icon: const Icon(
                  Icons.close,
                  color: Colors.red,
                ),
              ),
            )
          ],
        ),
      ),
    );
  }

  Future<void> prickImage() async {
    final ImagePicker picker = ImagePicker();

    final XFile? image = await picker.pickImage(source: ImageSource.gallery);
    fileImage = File(image!.path);

    widget.onFileChanged(fileImage!);
  }
}



import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

import '../../../../../core/utils/app_text_styles.dart';
import 'custom_check_box.dart';

class IsFeaturedCheckBox extends StatefulWidget {
  const IsFeaturedCheckBox({super.key, required this.onChanged});

  final ValueChanged<bool> onChanged;
  @override
  State<IsFeaturedCheckBox> createState() => _IsFeaturedCheckBoxState();
}

class _IsFeaturedCheckBoxState extends State<IsFeaturedCheckBox> {
  bool isTermsAccepted = false;
  @override
  Widget build(BuildContext context) {
    return Row(
      children: [
        Text.rich(
          TextSpan(
            children: [
              TextSpan(
                text: 'is Featured Item?',
                style: TextStyles.semiBold13.copyWith(
                  color: const Color(0xFF949D9E),
                ),
              ),
            ],
          ),
          textAlign: TextAlign.right,
        ),
        const Expanded(
          child: SizedBox(
            width: 16,
          ),
        ),
        CustomCheckBox(
          onChecked: (value) {
            isTermsAccepted = value;
            widget.onChanged(value);
            setState(() {});
          },
          isChecked: isTermsAccepted,
        ),
      ],
    );
  }
}



import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';

import '../../../../../core/utils/app_text_styles.dart';
import 'custom_check_box.dart';

class IsOrganciCheckBox extends StatefulWidget {
  const IsOrganciCheckBox({super.key, required this.onChanged});

  final ValueChanged<bool> onChanged;
  @override
  State<IsOrganciCheckBox> createState() => _IsOrganciCheckBoxState();
}

class _IsOrganciCheckBoxState extends State<IsOrganciCheckBox> {
  bool isOrganic = false;
  @override
  Widget build(BuildContext context) {
    return Row(
      children: [
        Text.rich(
          TextSpan(
            children: [
              TextSpan(
                text: 'is Product Organic?',
                style: TextStyles.semiBold13.copyWith(
                  color: const Color(0xFF949D9E),
                ),
              ),
            ],
          ),
          textAlign: TextAlign.right,
        ),
        const Expanded(
          child: SizedBox(
            width: 16,
          ),
        ),
        CustomCheckBox(
          onChecked: (value) {
            isOrganic = value;
            widget.onChanged(value);
            setState(() {});
          },
          isChecked: isOrganic,
        ),
      ],
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub_dashboard/features/dashboard/views/widgets/dashboard_view_body.dart';

class DashboardView extends StatelessWidget {
  const DashboardView({super.key});
  static const routeName = 'dashboard';
  @override
  Widget build(BuildContext context) {
    
    return const Scaffold(
      body: DashboardViewBody(),
    );
  }
}



import 'package:flutter/material.dart';
import 'package:fruit_hub_dashboard/core/widgets/custom_button.dart';
import 'package:fruit_hub_dashboard/features/add_product/presentation/views/add_product_view.dart';

class DashboardViewBody extends StatelessWidget {
  const DashboardViewBody({super.key});

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.symmetric(horizontal: 16),
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          CustomButton(
            onPressed: () {
              Navigator.pushNamed(context, AddProductView.routeName);
            },
            text: 'Add Data',
          ),
        ],
      ),
    );
  }
}





Cancel

Send

ChatGPT said:
تمام، شفت الكود كله. من خلال مراجعة الكود، عندي بعض الملاحظات والنقاط المهمة اللي ممكن تحسن المشروع أو تحل مشاكل ممكن تواجهك:

1️⃣ مشكلة في FireStorage.uploadFile
في الكود ده:

var fileReference =
    stoargeReference.child('$path/$fileName.$extensionName');
b.extension(file.path) ترجع بالفعل .png أو .jpg مع النقطة، فأنت هنا تضيف النقطة مرتين.

الصحيح يكون:

var fileReference = stoargeReference.child('$path/$fileName$extensionName');
يعني بدون النقطة الزائدة.
وإنت عندك نفس الشيء تقريبا في SupabaseStoargeService، لكن هنا حلو لأنك تستخدم basenameWithoutExtension وextension(file.path) بشكل صحيح.

2️⃣ مشكلة محتملة مع DatabaseService و FireStoreService
FireStoreService كله UnimplementedError. إذا حاولت تضيف بيانات باستخدام ProductsRepoImpl، هيفشل لأن الخدمة مش مفعلة.
لازم تكمّل:

@override
Future<void> addData({required String path, required Map<String, dynamic> data, String? documentId}) async {
  final docRef = documentId != null
      ? FirebaseFirestore.instance

You said:
كوده انا بعت ليك كود التطبيق الرئيسي مقسم للتل اجزاء ثم تطبيق الداش بورد

ChatGPT said:
تمام فهمت 😄، انت بعثت الكود كامل للتطبيق الرئيسي + كل الـ services والـ repos وواجهة إضافة المنتج، وكمان الـ DashboardView موجود ضمن الكود (أو على الأقل route لها معرف في onGenerateRoute).

يعني عندنا هيكل المشروع كالتالي تقريبًا:

هيكل التطبيق اللي بعته:
Main app + Firebase & Supabase initialization

main.dart

تهيئة Supabase و BlocObserver و GetIt

MaterialApp مع onGenerateRoute و initialRoute = DashboardView

Services Layer

StoarageService → abstract

SupabaseStoargeService → upload file

FireStorage → Firebase Storage (لكن مش مستخدم حالياً)

DatabaseService → abstract

FireStoreService → Unimplemented حالياً

setupGetit → تسجيل كل الـ services و repos في GetIt

Repositories

ImagesRepo / ImagesRepoImpl → رفع الصور

ProductsRepo / ProductsRepoImpl → إضافة منتج في قاعدة البيانات

Entities & Models

ProductEntity و ReviewEntity

ProductModel و ReviewModel → تحويل بين entity و json

Bloc / Cubit

AddProductCubit → رفع الصورة و إضافة المنتج

States: Initial, Loading, Failure, Success

UI Components

AddProductView → Scaffold + BlocProvider

AddProductViewBody → form + fields + image picker + checkbox + button

Widgets: CustomButton, CustomTextFormField, CustomProgressHud, IsOrganciCheckBox, IsFeaturedCheckBox, ImageField

Utilities

AppColors, TextStyles, Assets, BackendEndpoint, buildBar, buildAppBar

Routing

onGenerateRoute → DashboardView & AddProductView

لو عايز نكمل بناءً على الكود ده، عندي شوية اقتراحات مهمة:

تكملة FireStoreService:

حالياً Unimplemented → لو هتستخدم Firebase Firestore لازم تكمّل الوظائف:

addData()

getData()

checkIfDataExists()

تحديث Upload في FireStorage

أصلح مشكلة النقطة المكررة زي ما قلت قبل كده.

DashboardView

لو حابب أقدر أصممه لك مع Bloc أو GetIt بحيث يشتغل مع المنتجات اللي اتضافت.

ربط Supabase & Firestore

انت مسجل Supabase في GetIt → الصور تتخزن هناك، لكن Firestore مش شغال → المنتجات مش هتتسجل.

Validation

form validation تمام، لكن ممكن تحسّن الرسائل بدل ما تكون مشفرة (Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ù…Ø·Ù„ÙˆØ¨).

لو تحب، ممكن أعمل لك خريطة كاملة لتشغيل Dashboard + إضافة المنتجات + رفع الصور + تخزين البيانات في Supabase أو Firestore بحيث التطبيق يشتغل متكامل بدون أي UnimplementedError أو مشاكل رفع الصور.

هل تحب أبدأ أجهزلك النسخة الكاملة دي؟


You said:
راجع الشات ده كامل وقولي فهمت ايه وقولي مطلوب منك ايه ونا بحاول اعمل ايه 

ChatGPT said:
Streaming interrupted. Waiting for the complete message...




ChatGPT is still generating a response...